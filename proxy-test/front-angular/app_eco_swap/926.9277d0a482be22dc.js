"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[926],{9499:(w,D,i)=>{i.d(D,{O:()=>M});var t=i(4755),n=i(9433),m=i(9401),b=i(3148),e=i(2223);let M=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[t.ez,n.q,b.IJ,m.u5,m.UX]}),o})()},6262:(w,D,i)=>{i.d(D,{r:()=>z});var t=i(2223),n=i(5580),m=i(5226),b=i.n(m),e=i(2777),M=i(4303),o=i(4755),O=i(1728),r=i(6012),h=i(3148),l=i(9515);function C(p,A){if(1&p&&(t.TgZ(0,"a",21),t._uU(1),t.qZA()),2&p){const c=t.oxw(2);t.Q6J("href","/perfil/"+c.publicacion.particularDTO.usuarioDTO.idUsuario,t.LSH),t.xp6(1),t.AsE(" ",c.publicacion.particularDTO.nombre," ",c.publicacion.particularDTO.apellido," ")}}function E(p,A){if(1&p&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&p){const c=t.oxw(2);t.xp6(1),t.AsE("",c.publicacion.particularDTO.nombre," ",c.publicacion.particularDTO.apellido,"")}}function U(p,A){if(1&p&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&p){const c=t.oxw(2);t.xp6(1),t.hij(" ",c.publicacion.particularDTO.direcciones[0].localidad,"")}}function q(p,A){if(1&p&&(t.TgZ(0,"div",25),t._UZ(1,"img",26),t.qZA(),t._UZ(2,"div",27)),2&p){const c=t.oxw().$implicit,u=t.oxw(3);t.xp6(1),t.Q6J("src",u.getImage(c),t.LSH)}}function F(p,A){1&p&&t.YNc(0,q,3,1,"ng-template",24)}function R(p,A){if(1&p&&(t.TgZ(0,"ngb-carousel",22),t.YNc(1,F,1,0,null,23),t.qZA()),2&p){const c=t.oxw(2);t.Q6J("showNavigationArrows",c.publicacion.parsedImagenes.length>1)("showNavigationIndicators",c.publicacion.parsedImagenes.length>1),t.xp6(1),t.Q6J("ngForOf",c.publicacion.parsedImagenes)}}function J(p,A){if(1&p&&(t.TgZ(0,"div",28),t._uU(1," Precio de venta: "),t.TgZ(2,"h2"),t._uU(3),t.ALo(4,"currency"),t.qZA(),t.TgZ(5,"p",29),t._uU(6,"Si compr\xe1s, te lo enviamos"),t._uU(7,"!"),t.qZA()()),2&p){const c=t.oxw(2);t.xp6(3),t.hij("",t.lcZ(4,1,c.publicacion.precioVenta)," ")}}function N(p,A){if(1&p&&(t.TgZ(0,"div",32),t._uU(1),t.qZA()),2&p){const c=A.$implicit;t.xp6(1),t.hij(" ",c.caracteristica," ")}}function W(p,A){if(1&p&&(t.TgZ(0,"div",30)(1,"b"),t._uU(2,"Caracter\xedsticas:"),t.qZA(),t.YNc(3,N,2,1,"div",31),t.qZA()),2&p){const c=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",c.publicacion.caracteristicaProducto)}}function K(p,A){if(1&p){const c=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(c);const T=t.oxw(3);return t.KtG(T.comprar())}),t._UZ(1,"img",37),t._uU(2," QUIERO COMPRAR "),t.qZA()}}function Q(p,A){if(1&p){const c=t.EpF();t.TgZ(0,"mat-card-actions",33)(1,"button",34),t.NdJ("click",function(){t.CHM(c);const T=t.oxw(2);return t.KtG(T.intercambiar())}),t._uU(2,"QUIERO INTERCAMBIAR"),t.qZA(),t.YNc(3,K,3,0,"button",35),t.qZA()}if(2&p){const c=t.oxw(2);t.xp6(3),t.Q6J("ngIf","VENTA_Y_TRUEQUE"==c.publicacion.tipoPublicacion&&c.publicacion.particularDTO.accessToken&&c.publicacion.particularDTO.publicKey)}}function Y(p,A){if(1&p&&(t.TgZ(0,"mat-card",1)(1,"mat-card-header",2)(2,"div",3)(3,"div",4),t._UZ(4,"div",5),t.TgZ(5,"div")(6,"mat-card-title",6),t.YNc(7,C,2,3,"a",7),t.YNc(8,E,2,2,"span",8),t.qZA(),t.TgZ(9,"mat-card-subtitle"),t._UZ(10,"app-rating",9),t.qZA()()(),t.TgZ(11,"div",10)(12,"div"),t._uU(13),t.ALo(14,"date"),t.qZA(),t.YNc(15,U,2,1,"div",8),t.qZA()()(),t.TgZ(16,"mat-card-content",11)(17,"div",12),t.YNc(18,R,2,3,"ngb-carousel",13),t.qZA(),t.TgZ(19,"div")(20,"h2",14),t._uU(21),t.qZA(),t.TgZ(22,"div",15),t._uU(23),t.qZA(),t.TgZ(24,"div",16),t._uU(25," Valor de trueque: "),t.TgZ(26,"h2",17),t._uU(27),t.ALo(28,"currency"),t.ALo(29,"currency"),t.qZA()(),t.YNc(30,J,8,3,"div",18),t.YNc(31,W,4,1,"div",19),t.qZA()(),t.YNc(32,Q,4,1,"mat-card-actions",20),t.qZA()),2&p){const c=t.oxw();t.xp6(7),t.Q6J("ngIf",c.userData.isLoggedIn),t.xp6(1),t.Q6J("ngIf",!c.userData.isLoggedIn),t.xp6(2),t.Q6J("puntuacion",c.publicacion.particularDTO.puntaje)("remSize",1.2),t.xp6(3),t.Oqu(t.xi3(14,14,c.publicacion.fechaPublicacion,"dd/MM/yyyy")),t.xp6(2),t.Q6J("ngIf",c.publicacion.particularDTO.direcciones.length>0),t.xp6(3),t.Q6J("ngIf",c.publicacion.parsedImagenes&&c.publicacion.parsedImagenes.length>0),t.xp6(3),t.Oqu(c.publicacion.titulo),t.xp6(2),t.hij(" ",c.publicacion.descripcion," "),t.xp6(4),t.AsE("",t.lcZ(28,17,c.publicacion.valorTruequeMin)," - ",t.lcZ(29,19,c.publicacion.valorTruequeMax),""),t.xp6(3),t.Q6J("ngIf","VENTA_Y_TRUEQUE"==c.publicacion.tipoPublicacion&&!!c.publicacion.particularDTO.accessToken),t.xp6(1),t.Q6J("ngIf",c.publicacion.caracteristicaProducto.length>0),t.xp6(1),t.Q6J("ngIf","publicacionOrigen"!=c.userType&&"ABIERTA"==c.publicacion.estadoPublicacion)}}let z=(()=>{class p{constructor(c,u,T){this.truequeService=c,this.data=u,this.logisticaService=T,this.userType="notLoggedIn",this.intercambiarEvent=new t.vpe,this.comprarEvent=new t.vpe,this.costoEnvio=100,console.log(this.publicacion,u),u&&(this.publicacion=u.publicacion,this.userData=u.userData,this.userType=u.userType)}getImage(c){return this.truequeService.getImagen(c)}zoomImage(c){c&&b().fire({html:`<img src="${this.getImage(c)}" style="width: 100%"/>`,showConfirmButton:!1,showCloseButton:!0})}intercambiar(){this.intercambiarEvent.emit()}comprar(){this.comprarEvent.emit()}}return p.\u0275fac=function(c){return new(c||p)(t.Y36(e.x),t.Y36(n.WI,8),t.Y36(M.C))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-main-card-publicacion"]],inputs:{publicacion:"publicacion",userData:"userData",userType:"userType"},outputs:{intercambiarEvent:"intercambiarEvent",comprarEvent:"comprarEvent"},decls:1,vars:1,consts:[["class","main-card",4,"ngIf"],[1,"main-card"],[2,"border-bottom","solid 1px var(--light-grey)","padding-bottom","10px"],[1,"div-header"],[1,"header-info"],["mat-card-avatar","",1,"example-header-image"],[2,"display","flex","align-items","center"],[3,"href",4,"ngIf"],[4,"ngIf"],["color","var(--trueques-dark)",3,"puntuacion","remSize"],[1,"div-fecha-zona"],[1,"card-content"],[2,"width","60%","margin","0 auto"],[3,"showNavigationArrows","showNavigationIndicators",4,"ngIf"],[1,"card-title"],[1,"descripcion"],[1,"trueque"],[2,"color","var(--trueques-dark)"],["class","venta",4,"ngIf"],["class","caracteristicas",4,"ngIf"],["class","card-button",4,"ngIf"],[3,"href"],[3,"showNavigationArrows","showNavigationIndicators"],[4,"ngFor","ngForOf"],["ngbSlide",""],[1,"picsum-img-wrapper"],[2,"width","100%","height","100%","object-fit","contain",3,"src"],[1,"carousel-caption"],[1,"venta"],[2,"font-size","14px"],[1,"caracteristicas"],["class","producto",4,"ngFor","ngForOf"],[1,"producto"],[1,"card-button"],["mat-fab","","extended","","color","primary",3,"click"],["mat-fab","","extended","","style","background-color: #3fb6e9; color: white;",3,"click",4,"ngIf"],["mat-fab","","extended","",2,"background-color","#3fb6e9","color","white",3,"click"],["src","assets/redes/mercadopago.png",2,"width","40px"]],template:function(c,u){1&c&&t.YNc(0,Y,33,21,"mat-card",0),2&c&&t.Q6J("ngIf",u.publicacion)},dependencies:[o.sg,o.O5,O.cs,r.a8,r.hq,r.kc,r.dn,r.dk,r.$j,r.n5,h.uo,h.xl,l.A,o.H9,o.uU],styles:[".example-header-image[_ngcontent-%COMP%]{background-image:url(perfiles-17.f67e69cf999cd190.jpg);background-size:cover;margin:0 10px 0 0;width:60px;height:60px}mat-card[_ngcontent-%COMP%]{border-radius:15px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{margin:10px}mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:20px!important}mat-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{max-width:100%}.div-header[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;align-items:flex-end;flex-wrap:wrap}.div-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{display:flex;align-items:center}.div-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-wrap:balance}.card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;margin:5px;border-radius:5px;box-shadow:2px 2px 5px var(--dark-grey)}.card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer}.card-content[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]{font-weight:500;font-size:16px;margin-bottom:15px}.card-content[_ngcontent-%COMP%]   .trueque[_ngcontent-%COMP%], .card-content[_ngcontent-%COMP%]   .venta[_ngcontent-%COMP%]{font-size:16px}.card-content[_ngcontent-%COMP%]   .trueque[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card-content[_ngcontent-%COMP%]   .venta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.card-content[_ngcontent-%COMP%]   .caracteristicas[_ngcontent-%COMP%]{margin-top:20px}.card-button[_ngcontent-%COMP%]{align-self:center}@media (min-width: 0px) and (max-width: 576px){.card-content[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}@media (min-width: 0px) and (max-width: 800px){.div-fecha-zona[_ngcontent-%COMP%]{display:flex;gap:10%;width:100%;justify-content:space-around}.header-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{max-width:80%}}@media (min-width: 801px){.div-fecha-zona[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center;align-items:flex-end}.header-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{max-width:420px}}"]}),p})()},4666:(w,D,i)=>{i.d(D,{K:()=>b});var t=i(2223),n=i(5500);const m="URImsUsuarios";let b=(()=>{class e{constructor(o){this.backendService=o}getMyCompras(){return this.backendService.get(m,"api/misCompras")}comprar(o){return this.backendService.post(m,`ms-users/api/comprar/${o}`,{})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(n.k))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8628:(w,D,i)=>{i.d(D,{M:()=>M});var t=i(2340),n=i(2223),m=i(5500);const b=t.N.apiUrl+"8080/",e="URImsUsuarios";let M=(()=>{class o{constructor(r){this.backendService=r}crearColecta(r){return this.backendService.post(e,"api/colecta",r)}getAllColectas(r){return this.backendService.get(e,"api/colectas",r)}getMisColectas(){return this.backendService.get(e,"api/misColectas")}getColecta(r){return this.backendService.get(e,"api/colecta/"+r)}getDonacionesColecta(r){return this.backendService.get(e,"api/colecta/"+r+"/donaciones")}getMisDonaciones(){return this.backendService.get(e,"api/particular/misDonaciones")}crearDonacion(r,h){return this.backendService.post(e,"api/colecta/"+r+"/crearDonacion",h)}getImagen(r){return`${b}api/getImage/${r}`}cambiarEstadoDonacion(r,h,l){return this.backendService.put(e,"api/colecta/"+r+"/donaciones/"+h,l)}}return o.\u0275fac=function(r){return new(r||o)(n.LFG(m.k))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4303:(w,D,i)=>{i.d(D,{C:()=>b});var t=i(2223),n=i(5500);const m="URImsUsuarios";let b=(()=>{class e{constructor(o){this.backendService=o}getOrden(o){return this.backendService.get(m,`ms-transacciones/api/logistica/orden/${o}`)}getOrdenes(){return this.backendService.get(m,"ms-transacciones/api/logistica/orden")}obtenerMisOrdenes(o){return this.backendService.get(m,"ms-transacciones/api/logistica/myOrdenes",{type:o})}getCostoEnvio(o){return this.backendService.get(m,"ms-transacciones/api/logistica/costoEnvio",{peso:o})}crearOrden(o){return this.backendService.post(m,"ms-transacciones/api/logistica/orden",o)}cambiarEstadoOrden(o,O){return this.backendService.put(m,`ms-transacciones/api/logistica/orden/${o}`,{nuevoEstado:O})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(n.k))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2777:(w,D,i)=>{i.d(D,{x:()=>b});var t=i(2223),n=i(5500);const m="URImsUsuarios";let b=(()=>{class e{constructor(o){this.backendService=o}crearPublicacion(o){return this.backendService.post(m,"api/publicacion",o)}getPublicaciones(o){return this.backendService.get(m,"api/publicaciones",o)}getMisPublicaciones(){return this.backendService.get(m,"api/misPublicaciones")}getPublicacion(o){return this.backendService.get(m,"api/publicacion/"+o)}getImagen(o){return this.backendService.getUrlByName(m)+"api/getImage/"+o}crearTrueque(o,O){return this.backendService.post(m,"api/trueque",{idPublicacionOrigen:o,idPublicacionPropuesta:O})}getTruequesFromPublicacion(o){return this.backendService.get(m,`api/publicacion/${o}/trueques`)}getPropuestasFromPublicacion(o){return this.backendService.get(m,`api/publicacion/${o}/propuestas`)}getMisPublicacionesForTrueque(o){return this.backendService.get(m,`api/${o}/publicaciones`)}cambiarEstadoTrueque(o,O){return this.backendService.put(m,`api/trueque/${o}`,{nuevoEstado:O})}getTruequesParticular(o){return this.backendService.get(m,`api/trueques/particular/${o}`)}cerrarPublicacion(o){return this.backendService.patch(m,`api/publicacion/${o}`,{})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(n.k))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7833:(w,D,i)=>{i.d(D,{A:()=>y});var t=i(5861),n=i(2223),m=i(6262),b=i(5226),e=i.n(b),M=i(5580),o=i(2777),O=i(1531),r=i(430),h=i(1330),l=i(3276),C=i(4755);const E=function(d,x){return{"even-row":d,"odd-row":x}};function U(d,x){if(1&d){const a=n.EpF();n.ynx(0),n.TgZ(1,"mat-list-item",8),n.NdJ("mouseenter",function(){const v=n.CHM(a).$implicit,S=n.oxw(2);return n.KtG(S.hoveredItem=v)})("mouseleave",function(){n.CHM(a);const g=n.oxw(2);return n.KtG(g.hoveredItem=null)})("click",function(g){return g.stopPropagation()}),n._UZ(2,"img",9),n.TgZ(3,"div",10)(4,"div")(5,"h4"),n._uU(6),n.qZA(),n.TgZ(7,"p"),n._uU(8),n.qZA()(),n.TgZ(9,"div",11)(10,"span",12),n._uU(11),n.qZA(),n._uU(12),n.qZA(),n.TgZ(13,"div")(14,"mat-icon",13),n.NdJ("click",function(){const v=n.CHM(a).$implicit,S=n.oxw(2);return n.KtG(S.access(v))}),n._uU(15,"open_in_new"),n.qZA()()()(),n.BQk()}if(2&d){const a=x.$implicit,_=x.even,g=x.odd,v=n.oxw(2);n.xp6(1),n.Q6J("ngClass",n.WLB(8,E,_,g)),n.xp6(1),n.Q6J("src",a.img,n.LSH),n.xp6(4),n.Oqu(a.title),n.xp6(2),n.Oqu(a.description),n.xp6(2),n.Udp("color",v.colorMap[a.estado]||"var(--warn)"),n.xp6(1),n.hij(" ",v.iconMap[a.estado]||"dangerous"," "),n.xp6(1),n.hij(" ",a.estado," ")}}function q(d,x){if(1&d&&(n.TgZ(0,"mat-nav-list"),n.YNc(1,U,16,11,"ng-container",7),n.qZA()),2&d){const a=n.oxw();n.xp6(1),n.Q6J("ngForOf",a.paginatedList)}}function F(d,x){if(1&d){const a=n.EpF();n.TgZ(0,"mat-paginator",14,15),n.NdJ("page",function(g){n.CHM(a);const v=n.oxw();return n.KtG(v.changePage(g))}),n.qZA()}if(2&d){const a=n.oxw();n.Q6J("hidePageSize",!0)("pageSize",a.pageSize)("showFirstLastButtons",!0)("length",a.list.length)}}function R(d,x){if(1&d&&(n.TgZ(0,"div",16),n._uU(1),n.qZA()),2&d){const a=n.oxw();n.xp6(1),n.hij(" ","CERRADA"==a.data.estado?"\xa1No propusiste esta publicaci\xf3n en ning\xfan trueque!":"\xa1Todav\xeda no propusiste esta publicaci\xf3n en ning\xfan trueque!"," ")}}let J=(()=>{class d{constructor(a,_,g,v){this.dialogRef=a,this.data=_,this.truequesService=g,this.router=v,this.list=[],this.paginatedList=[],this.title="Propuestas",this.pageSize=10,this.iconMap={APROBADO:"verified",APROBADA:"verified",RECIBIDO:"add_task",RECIBIDA:"add_task",PENDIENTE:"pending",ABIERTA:"lock_open",CERRADA:"lock"},this.colorMap={APROBADO:"var(--success)",APROBADA:"var(--success)",RECIBIDO:"var(--success)",RECIBIDA:"var(--success)",PENDIENTE:"purple",ABIERTA:"var(--success)"}}ngOnInit(){console.log(this.data),this.data.action&&"list"==this.data.action&&this.getPropuestas(this.data.id),this.paginatedList=this.list.slice(0,this.pageSize)}changePage(a){const _=a.pageIndex*a.pageSize;this.paginatedList=this.list.slice(_,_+a.pageSize)}getPropuestas(a){this.truequesService.getPropuestasFromPublicacion(a).subscribe({next:_=>{console.log(_);const g=_||[];console.log(g);for(const v of g)this.list.push({id:v.publicacionDTOorigen.idPublicacion,title:v.publicacionDTOorigen.titulo,description:v.publicacionDTOorigen.descripcion,img:this.getImagen(v.publicacionDTOorigen.imagenes.split("|")[0]),estado:v.estadoTrueque});this.paginatedList=this.list.slice(0,this.pageSize)}})}access(a){console.log("access",a),this.dialogRef.close(),this.router.navigate(["publicacion/"+a.id])}getImagen(a){return this.truequesService.getImagen(a)}}return d.\u0275fac=function(a){return new(a||d)(n.Y36(M.so),n.Y36(M.WI),n.Y36(o.x),n.Y36(O.F0))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-list"]],inputs:{list:"list",title:"title"},decls:10,vars:4,consts:[[1,"header"],[2,"width","30px"],[2,"margin-left","10px","cursor","pointer",3,"click"],[2,"margin","20px"],[4,"ngIf"],["style","border-radius: 15px;",3,"hidePageSize","pageSize","showFirstLastButtons","length","page",4,"ngIf"],["style","padding: 10%; text-align: center;",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass","mouseenter","mouseleave","click"],["matListItemIcon","",1,"item-img",3,"src"],[1,"item-content"],[2,"display","flex","gap","10px"],[1,"material-icons-outlined","result-icon"],[2,"cursor","pointer",3,"click"],[2,"border-radius","15px",3,"hidePageSize","pageSize","showFirstLastButtons","length","page"],["paginator",""],[2,"padding","10%","text-align","center"]],template:function(a,_){1&a&&(n.TgZ(0,"div",0),n._UZ(1,"span",1),n.TgZ(2,"span"),n._uU(3),n.qZA(),n.TgZ(4,"mat-icon",2),n.NdJ("click",function(){return _.dialogRef.close()}),n._uU(5,"close"),n.qZA()(),n.TgZ(6,"div",3),n.YNc(7,q,2,1,"mat-nav-list",4),n.YNc(8,F,2,4,"mat-paginator",5),n.YNc(9,R,2,1,"div",6),n.qZA()),2&a&&(n.xp6(3),n.Oqu(_.title),n.xp6(4),n.Q6J("ngIf",_.list.length>0),n.xp6(1),n.Q6J("ngIf",_.list.length>0),n.xp6(1),n.Q6J("ngIf",0==_.list.length))},dependencies:[r.Hw,h.Hk,h.Tg,h.Yt,l.NW,C.mk,C.sg,C.O5],styles:[".header[_ngcontent-%COMP%]{text-align:center;margin:20px;padding-bottom:20px;border-bottom:1px solid var(--light-grey);font-size:16px;display:flex;align-items:center;justify-content:space-between}.even-row[_ngcontent-%COMP%]{background-color:#e2e1e1}.odd-row[_ngcontent-%COMP%]{background-color:transparent}mat-list-item[_ngcontent-%COMP%]{height:-moz-fit-content!important;height:fit-content!important;padding:5px;cursor:default}mat-list-item[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}mat-list-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:5px;box-shadow:2px 2px 5px var(--dark-grey)}mat-list-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:10px;flex-wrap:wrap}mat-list-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}mat-list-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px!important}"]}),d})();var N=i(8988),W=i(4377),K=i(8628),Q=i(1728),Y=i(6996),z=i(3649),p=i(9515);function A(d,x){if(1&d&&(n.TgZ(0,"span",22),n._uU(1),n.qZA()),2&d){const a=n.oxw(2);n.Q6J("ngClass",a.colorMap[a.cardData.estado]||"red")("matTooltip",a.cardData.codigo?a.cardData.codigo+" "+a.cardData.estado:"donaciones"==a.app?"Donaci\xf3n "+a.cardData.estado:"Trueque "+a.cardData.estado),n.xp6(1),n.hij(" ",a.iconMap[a.cardData.estado]||"dangerous"," ")}}function c(d,x){if(1&d&&(n.TgZ(0,"div",23),n._uU(1),n.qZA()),2&d){const a=n.oxw(2);n.xp6(1),n.hij(" ",a.cardData.valorSecundario," ")}}function u(d,x){if(1&d){const a=n.EpF();n.TgZ(0,"button",26),n.NdJ("click",function(g){const S=n.CHM(a).$implicit,Z=n.oxw(3);return Z.buttonClicked(Z.cardData,S),n.KtG(g.stopPropagation())}),n.TgZ(1,"mat-icon"),n._uU(2),n.qZA()()}if(2&d){const a=x.$implicit;n.Akn("info"==a.color?"background-color: var(--info)":""),n.Q6J("color",a.color)("matTooltip",a.name),n.xp6(2),n.Oqu(a.icon)}}function T(d,x){if(1&d&&(n.TgZ(0,"div",24),n.YNc(1,u,3,5,"button",25),n.qZA()),2&d){const a=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",a.cardData.buttons)}}function s(d,x){1&d&&(n.TgZ(0,"span",27),n._uU(1," \xa1Llev\xe1 tu donaci\xf3n! "),n.TgZ(2,"mat-icon",28),n._uU(3,"info"),n.qZA()())}function P(d,x){if(1&d&&(n.TgZ(0,"h6"),n._uU(1),n.ALo(2,"date"),n.qZA()),2&d){const a=n.oxw(2);n.xp6(1),n.Oqu(n.xi3(2,1,a.cardData.fecha,"dd/MM/yyyy"))}}function f(d,x){if(1&d&&(n.TgZ(0,"h6"),n._uU(1),n.qZA()),2&d){const a=n.oxw(2);n.xp6(1),n.Oqu(a.cardData.fechaString)}}function I(d,x){if(1&d){const a=n.EpF();n.TgZ(0,"div",1),n.NdJ("click",function(){n.CHM(a);const g=n.oxw();return n.KtG(g.clicked(g.cardData))}),n.TgZ(1,"mat-chip",2)(2,"span"),n._uU(3),n.qZA()(),n.TgZ(4,"div",3),n.YNc(5,A,2,3,"span",4),n.qZA(),n.TgZ(6,"div",5),n._UZ(7,"img",6),n.qZA(),n.TgZ(8,"div",7)(9,"div",8)(10,"h3",9),n._uU(11),n.qZA(),n.TgZ(12,"div",10)(13,"h2",11),n._uU(14),n.qZA()(),n.YNc(15,c,2,1,"div",12),n.qZA()(),n.YNc(16,T,2,1,"div",13),n.YNc(17,s,4,0,"span",14),n.TgZ(18,"div",15),n._UZ(19,"img",16),n.TgZ(20,"h4")(21,"div",17)(22,"a",18),n._uU(23),n.qZA()(),n.TgZ(24,"div",19),n._UZ(25,"app-rating",20),n.qZA()(),n.TgZ(26,"div"),n.YNc(27,P,3,4,"h6",21),n.YNc(28,f,2,1,"h6",21),n.qZA()()()}if(2&d){const a=n.oxw();n.ekj("selected-card",1==a.cardData.isSelected)("is-donacion","Donaci\xf3n"==a.cardData.codigo),n.Q6J("ngClass","publicaciones"==a.app&&0==a.cardData.buttons.length?"small":"big"),n.xp6(1),n.Q6J("ngClass","publicaciones"==a.app?"background-verde":"background-lila"),n.xp6(2),n.hij(" ",a.cardData.usuario.localidad," "),n.xp6(2),n.Q6J("ngIf",a.cardData.estado),n.xp6(2),n.Q6J("src",a.getImagen(a.cardData.imagen),n.LSH),n.xp6(4),n.Oqu(a.cardData.titulo),n.xp6(2),n.Q6J("ngClass","publicaciones"==a.app?"font-verde":"font-lila"),n.xp6(1),n.hij(" ",a.cardData.valorPrincipal," "),n.xp6(1),n.Q6J("ngIf",a.cardData.valorSecundario),n.xp6(1),n.Q6J("ngIf",a.cardData.buttons.length>0),n.xp6(1),n.Q6J("ngIf","EN_ESPERA"==a.cardData.estado&&a.isSwapper),n.xp6(1),n.Q6J("ngClass","publicaciones"==a.app?"background-verde":"background-lila"),n.xp6(1),n.Q6J("src","assets/perfiles/perfiles-"+a.cardData.usuario.imagen+".jpg",n.LSH),n.xp6(3),n.Q6J("href","perfil/"+a.cardData.usuario.id,n.LSH),n.xp6(1),n.Oqu(a.cardData.usuario.nombre),n.xp6(2),n.Q6J("puntuacion",a.cardData.usuario.puntaje)("color","publicaciones"==a.app?"var(--trueques-dark)":"var(--donaciones-dark)"),n.xp6(2),n.Q6J("ngIf",a.cardData.fecha),n.xp6(1),n.Q6J("ngIf",a.cardData.fechaString)}}let y=(()=>{class d{constructor(a,_,g,v,S){this.truequesService=a,this.router=_,this.dialog=g,this.auth=v,this.donacionesService=S,this.app="colectas",this.statusChanged=new n.vpe,this.cardSelected=new n.vpe,this.cardUnselected=new n.vpe,this.modalClosed=new n.vpe,this.iconMap={APROBADO:"verified",APROBADA:"verified",RECIBIDO:"add_task",RECIBIDA:"add_task",PENDIENTE:"pending",EN_ESPERA:"schedule",ABIERTA:"lock_open",CERRADA:"lock"},this.colorMap={APROBADO:"green",APROBADA:"green",RECIBIDO:"green",RECIBIDA:"green",PENDIENTE:"purple",ABIERTA:"green",EN_ESPERA:"purple"},this.isSwapper=!1,this.isSwapper=v.isUserSwapper()}clicked(a){switch(a.action){case"select":this.cardData&&(this.cardData.isSelected=!this.cardData.isSelected,this.cardData.isSelected?this.cardSelected.emit(a.id):this.cardUnselected.emit(a.id));break;case"detail":this.showDetail(a);break;case"trueque":this.router.navigate(["publicacion/"+a.idAuxiliar]);break;default:this.router.navigate([("colectas"==this.app?"colecta/":"publicaciones"==this.app?"publicacion/":"colecta/")+("colectas"==this.app||"publicaciones"==this.app?a.id:a.idAuxiliar)])}}showDetail(a){var _=this;let g,v;var S;"publicaciones"==this.app&&(g=m.r,this.truequesService.getPublicacion(a.id).subscribe({next:(S=(0,t.Z)(function*(Z){v={publicacion:yield Z,userData:{isLoggedIn:_.auth.isUserLoggedIn},userType:"publicacionOrigen"},v.publicacion.parsedImagenes=v.publicacion.imagenes.split("|"),_.openDialog(g,v,"80vh")}),function(k){return S.apply(this,arguments)})}))}openDialog(a,_,g="60vh",v="80vw"){this.dialog.open(a,{maxWidth:v,maxHeight:g,width:"100%",panelClass:"full-screen-modal",data:_}).afterClosed().subscribe(Z=>{this.modalClosed.emit({result:Z,componente:a.name})})}buttonClicked(a,_){"INFO"==_.status?"list"==a.action?this.openDialog(J,a):"trueque"==a.action?this.router.navigate(["publicacion/"+a.idAuxiliar]):"Compra"==a.codigo||"donaciones"==this.app&&"Configurar env\xedo"==_.name?this.openDialog(N.o,{card:a},"70vh","60vw"):"Ver env\xedo"==_.name?this.openDialog(N.o,{cards:[a]},"70vh","60vw"):"select"==a.action&&"Donaci\xf3n"==a.codigo&&this.clicked(a):this.changeStatus(a,_.status)}changeStatus(a,_){let g="",v="",S="",Z="",k="",B="warning";const L=a.codigo?a.codigo.toLowerCase():"publicaciones"==this.app?"propuesta de trueque":"donaci\xf3n";switch(_){case"CANCELADO":g="Confirmar Cancelaci\xf3n",v="\xbfEst\xe1s seguro/a que quer\xe9s cancelar esta "+L+"? La acci\xf3n es irreversible, pero podr\xe1s crear otra luego.",k="S\xed, cancelar",Z="No, mantener",B="warning";break;case"ACEPTADO":g="Confirmar Aprobaci\xf3n",v="Confirm\xe1 que acept\xe1s la "+L+". Esta acci\xf3n es irreversible!",S="S\xed, aceptar",Z="No, cancelar",B="warning";break;case"RECHAZADO":g="Confirmar Rechazo",v="\xbfEst\xe1s seguro/a que quer\xe9s rechazar esta "+L+"? La acci\xf3n es irreversible.",k="S\xed, rechazar",Z="No, cancelar",B="warning";break;case"EN_ESPERA":g="Confirmar Env\xedo en Persona",v="Esto significa que vos ten\xe9s que llevar la donaci\xf3n a la fundaci\xf3n. Pod\xe9s ver la direcci\xf3n ingresando a su perfil.",k="S\xed, confirmar",Z="No, cancelar",B="warning";break;case"CERRADA":g="Confirmar Cierre",v="\xbfEst\xe1s seguro/a que quer\xe9s cerrar esta "+L+"? Se cancelar\xe1n todos sus trueques pendientes. Esta acci\xf3n es irreversible.",k="S\xed, confirmar",Z="No, cancelar",B="warning";break;default:g="Confirmar Acci\xf3n",v="Cambiar el estado de la "+L+" es irreversible, \xbfEst\xe1s seguro/a que quer\xe9s continuar?",S="S\xed, continuar",Z="No, cancelar",B="warning"}e().fire({title:g,text:v,showConfirmButton:""!=S,confirmButtonText:S,showDenyButton:""!=k,denyButtonText:k,showCancelButton:""!=Z,cancelButtonText:Z,icon:B,reverseButtons:!0}).then(({isConfirmed:H,isDenied:G})=>{(H||G)&&("CERRADA"==_?this.truequesService.cerrarPublicacion(a.id).subscribe({next:j=>{e().fire("Se cambi\xf3 el estado!","Se guard\xf3 el nuevo estado de la "+L,"success").then(()=>{this.statusChanged.emit()})}}):"publicaciones"==this.app&&a.idAuxiliar?this.truequesService.cambiarEstadoTrueque(a.idAuxiliar,_).subscribe({next:j=>{e().fire("Se cambi\xf3 el estado!","Se guard\xf3 el nuevo estado de la "+L,"success").then(()=>{this.statusChanged.emit()})}}):a.idAuxiliar&&this.donacionesService.cambiarEstadoDonacion(a.idAuxiliar,a.id,{nuevoEstado:_}).subscribe({next:j=>{e().fire("Se cambi\xf3 el estado!","Se guard\xf3 el nuevo estado de la "+L,"success").then(()=>{this.statusChanged.emit()})}}))})}getImagen(a){return this.truequesService.getImagen(a)}}return d.\u0275fac=function(a){return new(a||d)(n.Y36(o.x),n.Y36(O.F0),n.Y36(M.uw),n.Y36(W.e),n.Y36(K.M))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-card"]],inputs:{app:"app",cardData:"cardData"},outputs:{statusChanged:"statusChanged",cardSelected:"cardSelected",cardUnselected:"cardUnselected",modalClosed:"modalClosed"},decls:1,vars:1,consts:[["class","card",3,"selected-card","ngClass","is-donacion","click",4,"ngIf"],[1,"card",3,"ngClass","click"],[1,"chip-localidad",3,"ngClass"],[2,"position","absolute","top","10px","left","10px"],["class","material-icons-outlined result-icon",3,"ngClass","matTooltip",4,"ngIf"],[1,"img-div",2,"display","flex","justify-content","center"],[1,"card-img",3,"src"],[1,"card-body"],[1,"body-data"],[1,"card-title"],[1,"valor-principal"],[2,"max-width","300px",3,"ngClass"],["class","valor-secundario",4,"ngIf"],["class","buttons",4,"ngIf"],["class","llevar-donacion",4,"ngIf"],[1,"user-data",3,"ngClass"],[1,"user-img",3,"src"],[1,"name"],[3,"href"],[2,"margin","0 10px","display","flex","align-items","center","justify-content","center"],[3,"puntuacion","color"],[4,"ngIf"],[1,"material-icons-outlined","result-icon",3,"ngClass","matTooltip"],[1,"valor-secundario"],[1,"buttons"],["mat-mini-fab","","matTooltipPosition","above",3,"color","matTooltip","style","click",4,"ngFor","ngForOf"],["mat-mini-fab","","matTooltipPosition","above",3,"color","matTooltip","click"],[1,"llevar-donacion"],["matTooltip","Cuando entregues la donaci\xf3n, la fundaci\xf3n podr\xe1 marcarla como RECIBIDA.",1,"material-icons-outlined"]],template:function(a,_){1&a&&n.YNc(0,I,29,23,"div",0),2&a&&n.Q6J("ngIf",_.cardData)},dependencies:[r.Hw,Q.nh,Y.HS,z.gM,C.mk,C.sg,C.O5,p.A,C.uU],styles:[".card[_ngcontent-%COMP%]{margin:5px;display:flex;flex-direction:column;align-items:center;max-width:515px!important}.card.big[_ngcontent-%COMP%]{height:500px}.card.big[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px!important}.card.small[_ngcontent-%COMP%]{height:480px}.card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]:hover{cursor:pointer}.card.selected-card[_ngcontent-%COMP%]{background-color:#bceba1}.card.selected-card.is-donacion[_ngcontent-%COMP%]{background-color:#dcb9ef}.card[_ngcontent-%COMP%]   .chip-localidad[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;padding:2px;font-weight:500}.card[_ngcontent-%COMP%]   .chip-localidad.button[_ngcontent-%COMP%]{font-size:10px!important;padding:0 10px}.card[_ngcontent-%COMP%]   .chip-localidad.background-verde[_ngcontent-%COMP%]{background-color:var(--trueques)}.card[_ngcontent-%COMP%]   .chip-localidad.background-lila[_ngcontent-%COMP%]{background-color:var(--donaciones)}.card[_ngcontent-%COMP%]   .chip-localidad.background-warn[_ngcontent-%COMP%]{background-color:var(--info)}.card[_ngcontent-%COMP%]   .chip-localidad.background-warn[_ngcontent-%COMP%]:hover{cursor:pointer}.card[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px;align-items:center;height:200px}.card[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{max-height:160px;margin:20px;width:auto;max-width:100%;box-shadow:2px 2px 5px var(--dark-grey)}.card[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]   .card-img.big[_ngcontent-%COMP%]{max-height:160px}.card[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]   .card-img.small[_ngcontent-%COMP%]{max-height:110px}.card[_ngcontent-%COMP%]   .productos[_ngcontent-%COMP%]{display:flex;max-width:180px;gap:30px;flex-wrap:wrap;justify-content:center}.card[_ngcontent-%COMP%]   .estado-publicacion[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .body-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-evenly;height:100%}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin:0}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .valor-principal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700!important;margin:0}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]{text-align:center;padding:10px;display:grid;grid-template-columns:1fr 4fr 2fr;justify-items:center;align-items:center;width:100%;border-radius:0 0 10px 10px}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:0}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{width:30px;border-radius:50%}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#444}.card[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin:10px auto}.card[_ngcontent-%COMP%]   .llevar-donacion[_ngcontent-%COMP%]{gap:10px;background:var(--info);width:100%;display:flex;justify-content:center;align-items:center;padding:5px}.result-icon[_ngcontent-%COMP%]{font-size:40px}.result-icon.green[_ngcontent-%COMP%]{color:var(--success)}.result-icon.red[_ngcontent-%COMP%]{color:var(--warn)}.result-icon.purple[_ngcontent-%COMP%]{color:var(--secondary-color)}@media (min-width: 0px) and (max-width: 576px){.buttons[_ngcontent-%COMP%]{width:50%!important}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:uppercase;width:100%}}.background-verde[_ngcontent-%COMP%]{background-color:#bceba1}.background-lila[_ngcontent-%COMP%]{background-color:#dcb9ef}.font-verde[_ngcontent-%COMP%]{color:var(--trueques-dark)}.font-lila[_ngcontent-%COMP%]{color:var(--donaciones-dark)}"]}),d})()},9229:(w,D,i)=>{i.d(D,{o:()=>O});var t=i(2223),n=i(3276),m=i(4755),b=i(7833);function e(r,h){if(1&r){const l=t.EpF();t.TgZ(0,"div")(1,"app-card",4),t.NdJ("statusChanged",function(E){t.CHM(l);const U=t.oxw(2);return t.KtG(U.cardStatusChanged(E))})("cardSelected",function(E){t.CHM(l);const U=t.oxw(2);return t.KtG(U.cardWasSelected(E))})("cardUnselected",function(E){t.CHM(l);const U=t.oxw(2);return t.KtG(U.cardWasUnselected(E))})("modalClosed",function(E){t.CHM(l);const U=t.oxw(2);return t.KtG(U.modalWasClosed(E))}),t.qZA()()}if(2&r){const l=h.$implicit,C=t.oxw(2);t.Tol(C.fullScreenWidth?"col-xs-12 col-sm-6 col-md-4":C.smallWidth?"col-lg-12 col-xl-6":"col-xs-12 col-sm-6 col-md-12 col-lg-6 col-xl-4"),t.xp6(1),t.Q6J("cardData",l)("app",C.app)}}function M(r,h){if(1&r){const l=t.EpF();t.TgZ(0,"mat-paginator",5,6),t.NdJ("page",function(E){t.CHM(l);const U=t.oxw(2);return t.KtG(U.changePage(E))}),t.qZA()}if(2&r){const l=t.oxw(2);t.ekj("no-label",l.smallWidth),t.Q6J("hidePageSize",!0)("pageSize",l.pageSize)("showFirstLastButtons",!0)("length",l.cardList.length)}}function o(r,h){if(1&r&&(t.TgZ(0,"div",1),t.YNc(1,e,2,4,"div",2),t.YNc(2,M,2,6,"mat-paginator",3),t.qZA()),2&r){const l=t.oxw();t.xp6(1),t.Q6J("ngForOf",l.paginatedCardList),t.xp6(1),t.Q6J("ngIf",l.cardList.length>0)}}let O=(()=>{class r{constructor(){this.cardList=[],this.app="colectas",this.fullScreenWidth=!1,this.smallWidth=!1,this.statusChanged=new t.vpe,this.cardSelected=new t.vpe,this.cardUnselected=new t.vpe,this.modalClosed=new t.vpe,this.paginatedCardList=[],this.pageSize=12}ngOnChanges(l){this.fixedPageSize&&(this.pageSize=this.fixedPageSize),this.paginatedCardList=this.cardList.slice(0,this.pageSize)}changePage(l){const C=l.pageIndex*l.pageSize;this.paginatedCardList=this.cardList.slice(C,C+l.pageSize)}cardStatusChanged(l){this.statusChanged.emit(l)}cardWasSelected(l){this.cardList.map(C=>{C.id!=l&&(C.isSelected=!1)}),this.cardSelected.emit(l)}cardWasUnselected(l){this.cardUnselected.emit(l)}modalWasClosed(l){this.modalClosed.emit(l)}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-deck"]],viewQuery:function(l,C){if(1&l&&t.Gf(n.NW,5),2&l){let E;t.iGM(E=t.CRH())&&(C.paginator=E.first)}},inputs:{cardList:"cardList",app:"app",fullScreenWidth:"fullScreenWidth",smallWidth:"smallWidth",pageSize:"pageSize",fixedPageSize:"fixedPageSize"},outputs:{statusChanged:"statusChanged",cardSelected:"cardSelected",cardUnselected:"cardUnselected",modalClosed:"modalClosed"},features:[t.TTD],decls:1,vars:1,consts:[["class","card-deck row",4,"ngIf"],[1,"card-deck","row"],[3,"class",4,"ngFor","ngForOf"],["style","border-radius: 15px;",3,"hidePageSize","pageSize","showFirstLastButtons","length","no-label","page",4,"ngIf"],[3,"cardData","app","statusChanged","cardSelected","cardUnselected","modalClosed"],[2,"border-radius","15px",3,"hidePageSize","pageSize","showFirstLastButtons","length","page"],["paginator",""]],template:function(l,C){1&l&&t.YNc(0,o,3,2,"div",0),2&l&&t.Q6J("ngIf",C.cardList.length>0)},dependencies:[n.NW,m.sg,m.O5,b.A],styles:[".no-label[_ngcontent-%COMP%]     .mat-mdc-paginator-range-label{display:none!important}"]}),r})()},8988:(w,D,i)=>{i.d(D,{o:()=>c});var t=i(9401),n=i(5580),m=i(5226),b=i.n(m),e=i(2223),M=i(4303),o=i(4666),O=i(5763),r=i(4377),h=i(9114),l=i(430),C=i(9609),E=i(8467),U=i(1728),q=i(787),F=i(1217),R=i(4755);function J(u,T){1&u&&e._UZ(0,"mat-spinner",6)}function N(u,T){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," Campo obligatorio "),e.qZA())}function W(u,T){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," Campo obligatorio "),e.qZA())}function K(u,T){if(1&u&&(e.TgZ(0,"div",19)(1,"span"),e._uU(2,"El env\xedo se calcula utilizando tu direcci\xf3n:"),e.qZA(),e.TgZ(3,"span")(4,"b"),e._uU(5),e.qZA()()()),2&u){const s=e.oxw(2);e.xp6(5),e.HOy("",s.user.particularDTO.direcciones[0].calle," ",s.user.particularDTO.direcciones[0].altura,", ",s.user.particularDTO.direcciones[0].localidad," (CP",s.user.particularDTO.direcciones[0].codigoPostal,")")}}function Q(u,T){if(1&u){const s=e.EpF();e.TgZ(0,"div",20)(1,"div"),e._uU(2,"Costo de env\xedo:"),e.qZA(),e.TgZ(3,"b",21),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"button",22),e.NdJ("click",function(){e.CHM(s);const f=e.oxw(2);return e.KtG(f.calcularEnvio())}),e._uU(7,"Calcular"),e.qZA()()}if(2&u){const s=e.oxw(2);e.xp6(4),e.Oqu(s.costoEnvio?e.lcZ(5,1,s.costoEnvio):"-")}}function Y(u,T){1&u&&e._UZ(0,"mat-spinner",6)}function z(u,T){if(1&u){const s=e.EpF();e.TgZ(0,"div")(1,"form",7)(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Peso Aproximado del Producto"),e.qZA(),e._UZ(5,"input",8),e.TgZ(6,"span",9),e._uU(7,"gramos"),e.qZA(),e.YNc(8,N,2,0,"mat-error",4),e.qZA(),e.TgZ(9,"mat-form-field")(10,"mat-label"),e._uU(11,"Disponibilidad Horaria"),e.qZA(),e.TgZ(12,"mat-select",10)(13,"mat-option",11),e._uU(14," 9hs a 12hs"),e.qZA(),e.TgZ(15,"mat-option",12),e._uU(16," 13hs a 16hs"),e.qZA(),e.TgZ(17,"mat-option",13),e._uU(18," 17hs a 20hs"),e.qZA()(),e.YNc(19,W,2,0,"mat-error",4),e.qZA()(),e.YNc(20,K,6,4,"div",14),e.YNc(21,Q,8,3,"div",15),e.TgZ(22,"div",16)(23,"button",17),e.NdJ("click",function(){e.CHM(s);const f=e.oxw();return e.KtG(f.dialogRef.close())}),e._uU(24,"CANCELAR"),e.qZA(),e.TgZ(25,"button",18),e.NdJ("click",function(){e.CHM(s);const f=e.oxw();return f.crearOrden(),f.ordenForm.markAllAsTouched(),e.KtG(f.ordenForm.valid)}),e.TgZ(26,"span"),e._uU(27,"CONFIRMAR"),e.qZA()(),e.YNc(28,Y,1,0,"mat-spinner",3),e.qZA()()}if(2&u){const s=e.oxw();e.xp6(1),e.Q6J("formGroup",s.ordenForm),e.xp6(7),e.Q6J("ngIf",s.ordenForm.get("peso").hasError("required")),e.xp6(11),e.Q6J("ngIf",s.ordenForm.get("disponibilidad").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.user),e.xp6(1),e.Q6J("ngIf",s.ordenForm.valid),e.xp6(4),e.Q6J("disabled",s.loadingSave||!s.ordenForm.valid),e.xp6(3),e.Q6J("ngIf",s.loadingSave)}}function p(u,T){if(1&u&&(e.TgZ(0,"div",26)(1,"mat-icon"),e._uU(2,"chevron_right"),e.qZA(),e._uU(3),e.qZA()),2&u){const s=T.$implicit;e.xp6(3),e.AsE("",s.estado," - ",s.fechaEnvio," ")}}function A(u,T){if(1&u&&(e.TgZ(0,"div",23)(1,"p")(2,"mat-icon"),e._uU(3,"credit_card"),e.qZA(),e._uU(4,"Precio de env\xedo: "),e.TgZ(5,"b"),e._uU(6),e.ALo(7,"currency"),e.qZA()(),e.TgZ(8,"p")(9,"mat-icon"),e._uU(10,"place"),e.qZA(),e._uU(11,"Origen: "),e.TgZ(12,"b"),e._uU(13),e.qZA()(),e.TgZ(14,"p")(15,"mat-icon"),e._uU(16,"place"),e.qZA(),e._uU(17,"Destino: "),e.TgZ(18,"b"),e._uU(19),e.qZA()(),e.TgZ(20,"div")(21,"h3")(22,"mat-icon"),e._uU(23,"route"),e.qZA(),e._uU(24,"Estados del env\xedo:"),e.qZA(),e.TgZ(25,"div",24),e.YNc(26,p,4,2,"div",25),e.qZA()()()),2&u){const s=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,4,s.yaTieneEnvio.precioEnvio)),e.xp6(7),e.Oqu(s.yaTieneEnvio.nombreUserOrigen),e.xp6(6),e.Oqu(s.yaTieneEnvio.nombreUserDestino),e.xp6(7),e.Q6J("ngForOf",s.yaTieneEnvio.listaFechaEnvios)}}let c=(()=>{class u{constructor(s,P,f,I,y,d,x){this.fb=s,this.dialogRef=P,this.data=f,this.logisticaService=I,this.compraService=y,this.usuarioService=d,this.auth=x,this.loading=!1,this.loadingSave=!1,this.sendDonaciones=!1,this.userOrders=[],console.log(f),this.ordenForm=s.group({peso:["",t.kI.required],disponibilidad:["",t.kI.required]}),f.cards&&(this.sendDonaciones=!0),this.getUserOrders()}getUserOrders(){let s="publicaciones";this.sendDonaciones&&(s="donaciones"),this.logisticaService.obtenerMisOrdenes(s).subscribe({next:P=>{if(P.length>0&&(this.userOrders=P),console.log(this.userOrders),this.sendDonaciones){const f=[...new Set(this.data.cards.map(y=>y.idDonacion||y.id))];console.log(f);const I=this.userOrders.find(y=>y.productosADonarDeOrdenList.some(d=>f.includes(d.idDonacion)));I&&(this.yaTieneEnvio=I)}else this.yaTieneEnvio=this.userOrders.find(f=>f.publicacionId==this.data.card.id);this.yaTieneEnvio||this.usuarioService.getUserByID(this.auth.getUserID()).subscribe({next:f=>{this.user=f,console.log(this.user)}})}})}calcularEnvio(){this.logisticaService.getCostoEnvio(this.ordenForm.value.peso).subscribe({next:s=>{this.costoEnvio=s.precio}})}crearOrden(){console.log(this.data),b().fire({title:"Confirmar env\xedo",text:"Los datos que ingresaste se guardar\xe1n y se crear\xe1 una orden de env\xedo. No podr\xe1s hacer cambios luego. \xbfDese\xe1s continuar?",icon:"question",showCancelButton:!0,cancelButtonText:"CANCELAR",confirmButtonText:"CONFIRMAR"}).then(({isConfirmed:s})=>{s&&this.confirmarOrden()})}confirmarOrden(){if(this.sendDonaciones){const s=this.data.cards;console.log(s);const P=[],f=[];for(const I of s)P.push({productoId:I.producto.idProducto,donacionId:I.idDonacion,cantidad:I.cantidadDonacion}),f.includes(I.producto.descripcion)||f.push(I.producto.descripcion);this.logisticaService.getCostoEnvio(this.ordenForm.value.peso).subscribe({next:I=>{const y={titulo:f.join(", "),userIdDestino:s[0].producto.colectaDTO.fundacionDTO.usuarioDTO.idUsuario,userIdOrigen:s[0].particularDTO.usuarioDTO.idUsuario,idColecta:s[0].producto.colectaDTO.idColecta,listProductos:P,costoEnvio:I.precio};this.enviarOrden(y)}})}else this.compraService.getMyCompras().subscribe({next:s=>{const f=s.find(I=>I.idCompra==this.data.card.idAuxiliar);f&&this.logisticaService.getCostoEnvio(this.ordenForm.value.peso).subscribe({next:I=>{this.enviarOrden({titulo:this.data.card.titulo,userIdDestino:f.particularCompradorDTO.usuarioDTO.idUsuario,userIdOrigen:f.publicacionDTO.particularDTO.usuarioDTO.idUsuario,idPublicacion:f.publicacionDTO.idPublicacion,costoEnvio:I.precio})}})}})}enviarOrden(s){this.logisticaService.crearOrden(s).subscribe({next:P=>{b().fire("\xa1Excelente!","Tu orden se cre\xf3 con \xe9xito","success"),console.log(P),this.dialogRef.close(!0)}})}}return u.\u0275fac=function(s){return new(s||u)(e.Y36(t.qu),e.Y36(n.so),e.Y36(n.WI),e.Y36(M.C),e.Y36(o.K),e.Y36(O.i),e.Y36(r.e))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-envio-modal"]],decls:8,vars:4,consts:[["id","main-envios"],[2,"margin","20px"],[2,"display","flex","justify-content","center"],["diameter","20",4,"ngIf"],[4,"ngIf"],["class","main-data",4,"ngIf"],["diameter","20"],["id","envio-form",3,"formGroup"],["matInput","","formControlName","peso","type","number",1,"number-input"],["matSuffix","",2,"margin","20px"],["formControlName","disponibilidad"],["value","9-12"],["value","13-16"],["value","17-20"],["class","direccion",4,"ngIf"],["class","costo-envio",4,"ngIf"],[1,"buttons"],["mat-fab","","extended","","color","light",3,"click"],["mat-fab","","extended","",1,"confirm",3,"disabled","click"],[1,"direccion"],[1,"costo-envio"],[2,"font-size","14px"],["mat-fab","","extended","",1,"confirm",3,"click"],[1,"main-data"],[2,"display","flex","flex-direction","column","gap","10px","margin-left","25px"],["class","item",4,"ngFor","ngForOf"],[1,"item"]],template:function(s,P){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3),e.qZA()()(),e.TgZ(4,"div",2),e.YNc(5,J,1,0,"mat-spinner",3),e.qZA(),e.YNc(6,z,29,7,"div",4),e.YNc(7,A,27,6,"div",5)),2&s&&(e.xp6(3),e.Oqu(P.yaTieneEnvio?"Datos de tu env\xedo para: "+P.yaTieneEnvio.titulo:"Configur\xe1 los datos de tu producto para el Env\xedo"),e.xp6(2),e.Q6J("ngIf",P.loading),e.xp6(1),e.Q6J("ngIf",!P.loading&&!P.yaTieneEnvio),e.xp6(1),e.Q6J("ngIf",!P.loading&&P.yaTieneEnvio))},dependencies:[h.KE,h.hX,h.TO,h.R9,l.Hw,C.Nt,E.Ou,U.cs,q.gD,F.ey,t._Y,t.Fj,t.wV,t.JJ,t.JL,t.sg,t.u,R.sg,R.O5,R.H9],styles:["#main-envios[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}#main-envios[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-bottom:0;height:30px;color:var(--dark-grey);cursor:pointer}#envio-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#envio-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:70%}#envio-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, #envio-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}#envio-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-webkit-appearance:textfield;appearance:textfield}.buttons[_ngcontent-%COMP%], .costo-envio[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center;align-items:center;margin:20px}.buttons[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%], .costo-envio[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]{background-color:var(--info);color:#000}.buttons[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]:disabled, .costo-envio[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]:disabled{background-color:var(--light-grey)}.direccion[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;text-align:center}.main-data[_ngcontent-%COMP%]{padding:0 20px 20px}.main-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .main-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .main-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}@media (min-width: 0px) and (max-width: 576px){.buttons[_ngcontent-%COMP%]{flex-direction:column-reverse;margin-bottom:20px}}"]}),u})()},9515:(w,D,i)=>{i.d(D,{A:()=>M});var t=i(2223),n=i(4755),m=i(3148);function b(o,O){if(1&o&&t._UZ(0,"i",5),2&o){const r=t.oxw().fill;t.Udp("width",r,"%")}}function e(o,O){if(1&o&&(t.TgZ(0,"i",3),t.YNc(1,b,1,2,"i",4),t.qZA()),2&o){const r=O.fill,h=t.oxw();t.Udp("font-size",h.remSize,"rem")("color",h.color),t.xp6(1),t.Q6J("ngIf",r>0)}}let M=(()=>{class o{constructor(){this.puntuacion=3.6,this.remSize=1,this.color="var(--opiniones)"}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rating"]],inputs:{puntuacion:"puntuacion",remSize:"remSize",color:"color"},decls:4,vars:4,consts:[[1,"puntuacion"],["t",""],[3,"rate","starTemplate","readonly","max","rateChange"],[1,"bi-star"],["class","bi-star-fill filled",3,"width",4,"ngIf"],[1,"bi-star-fill","filled"]],template:function(r,h){if(1&r&&(t.TgZ(0,"div",0),t.YNc(1,e,2,5,"ng-template",null,1,t.W1O),t.TgZ(3,"ngb-rating",2),t.NdJ("rateChange",function(C){return h.puntuacion=C}),t.qZA()()),2&r){const l=t.MAs(2);t.xp6(3),t.Q6J("rate",h.puntuacion)("starTemplate",l)("readonly",!0)("max",5)}},dependencies:[n.O5,m.OC],styles:[".puntuacion[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;display:inline-block;padding-right:.1rem}.puntuacion[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{overflow:hidden;position:absolute;top:0;left:0}"]}),o})()}}]);