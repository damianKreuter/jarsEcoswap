"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[368],{9499:(w,C,i)=>{i.d(C,{O:()=>d});var p=i(4755),h=i(7870),x=i(9401),s=i(3148),f=i(4466),T=i(2223);let d=(()=>{class u{}return u.\u0275fac=function(Z){return new(Z||u)},u.\u0275mod=T.oAB({type:u}),u.\u0275inj=T.cJS({imports:[p.ez,h.q,s.IJ,x.u5,x.UX,f.m]}),u})()},2368:(w,C,i)=>{i.r(C),i.d(C,{RegistroModule:()=>Uo});var p=i(4755),h=i(1531),x=i(5861),s=i(9401),f=i(1217),T=i(5226),d=i.n(T),u=i(6266),o=i(2223),Z=i(5763),U=i(4377),q=i(2342),P=i(8954),y=i(4212),v=i(9114),R=i(430),O=i(9609),N=i(8467),M=i(1728),D=i(787),A=i(8280),F=i(8995),_=i(6012),E=i(7876);function J(r,n){1&r&&(o.TgZ(0,"div",4),o._UZ(1,"mat-spinner",5),o.qZA())}function S(r,n){if(1&r&&(o.TgZ(0,"div")(1,"mat-card-title"),o._uU(2,"Registrate!"),o.qZA(),o.TgZ(3,"mat-card-subtitle"),o._uU(4),o.qZA()()),2&r){const t=o.oxw(2);o.xp6(4),o.hij("Complet\xe1 ",t.isSwapper?"tus datos":"los datos de la fundaci\xf3n"," para crear tu cuenta")}}function Q(r,n){if(1&r&&(o.TgZ(0,"div")(1,"mat-card-title"),o._uU(2,"Actualizar contrase\xf1a"),o.qZA(),o.TgZ(3,"mat-card-subtitle"),o._uU(4),o.qZA()()),2&r){const t=o.oxw(2);o.xp6(4),o.hij("Complet\xe1 ",t.isSwapper?"tus datos":"los datos de la fundaci\xf3n"," para actualizar tu contrase\xf1a")}}function Y(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function B(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Email inv\xe1lido "),o.qZA())}function V(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function K(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," El formato debe ser 11 1234-5678 "),o.qZA())}function G(r,n){if(1&r){const t=o.EpF();o.TgZ(0,"mat-form-field")(1,"mat-label"),o._uU(2,"Tel\xe9fono"),o.qZA(),o.TgZ(3,"input",22),o.NdJ("keyup",function(){o.CHM(t);const a=o.oxw(2);return o.KtG(a.formatearTelefono())}),o.qZA(),o.TgZ(4,"mat-hint"),o._uU(5,"Formato: 11 1234-5678"),o.qZA(),o.YNc(6,V,2,0,"mat-error",12),o.YNc(7,K,2,0,"mat-error",12),o.qZA()}if(2&r){const t=o.oxw(2);o.xp6(3),o.Q6J("ngModel",t.mainForm.get("telefono").value),o.xp6(3),o.Q6J("ngIf",t.mainForm.get("telefono").hasError("required")),o.xp6(1),o.Q6J("ngIf",t.mainForm.get("telefono").hasError("formatoInvalido"))}}function k(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function L(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Las contrase\xf1as no coinciden "),o.qZA())}function j(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Debe tener de 8 a 32 caracteres y al menos 1 min\xfascula, 1 may\xfascula, 1 n\xfamero y 1 caracter especial. "),o.qZA())}function z(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function $(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Las contrase\xf1as no coinciden "),o.qZA())}function H(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function W(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function X(r,n){if(1&r&&(o.TgZ(0,"mat-option",33),o._uU(1),o.qZA()),2&r){const t=n.$implicit;o.Q6J("value",t.nombre),o.xp6(1),o.hij(" ",t.descripcion," ")}}function oo(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function to(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function eo(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Formato inv\xe1lido "),o.qZA())}function ro(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function ao(r,n){if(1&r){const t=o.EpF();o.TgZ(0,"form",9)(1,"div",23)(2,"mat-form-field")(3,"mat-label"),o._uU(4,"Nombre"),o.qZA(),o._UZ(5,"input",24),o.YNc(6,H,2,0,"mat-error",12),o.qZA()(),o.TgZ(7,"div",23)(8,"mat-form-field")(9,"mat-label"),o._uU(10,"Apellido"),o.qZA(),o._UZ(11,"input",25),o.YNc(12,W,2,0,"mat-error",12),o.qZA()(),o.TgZ(13,"div",10)(14,"mat-form-field")(15,"mat-label"),o._uU(16,"Tipo Documento"),o.qZA(),o.TgZ(17,"mat-select",26),o.NdJ("selectionChange",function(a){o.CHM(t);const l=o.oxw(2);return o.KtG(l.formatDocument(a))}),o.YNc(18,X,2,2,"mat-option",27),o.qZA(),o.YNc(19,oo,2,0,"mat-error",12),o.qZA()(),o.TgZ(20,"div",10)(21,"mat-form-field")(22,"mat-label"),o._uU(23,"N\xfamero de Documento"),o.qZA(),o._UZ(24,"input",28),o.YNc(25,to,2,0,"mat-error",12),o.YNc(26,eo,2,0,"mat-error",12),o.qZA()(),o.TgZ(27,"div",10)(28,"mat-form-field",29)(29,"mat-label"),o._uU(30,"Fecha de Nacimiento"),o.qZA(),o._UZ(31,"input",30),o.TgZ(32,"mat-hint"),o._uU(33,"DD/MM/YYYY"),o.qZA(),o._UZ(34,"mat-datepicker-toggle",31)(35,"mat-datepicker",null,32),o.YNc(37,ro,2,0,"mat-error",12),o.qZA()()()}if(2&r){const t=o.MAs(36),e=o.oxw(2);o.Q6J("formGroup",e.particularForm),o.xp6(6),o.Q6J("ngIf",e.particularForm.get("nombre").hasError("required")),o.xp6(6),o.Q6J("ngIf",e.particularForm.get("apellido").hasError("required")),o.xp6(6),o.Q6J("ngForOf",e.tiposDocumento),o.xp6(1),o.Q6J("ngIf",e.particularForm.get("tipoDocumento").hasError("required")),o.xp6(6),o.Q6J("ngIf",e.particularForm.get("nroDocumento").hasError("required")),o.xp6(1),o.Q6J("ngIf",e.particularForm.get("nroDocumento").hasError("pattern")),o.xp6(5),o.Q6J("matDatepicker",t),o.xp6(3),o.Q6J("for",t),o.xp6(3),o.Q6J("ngIf",e.particularForm.get("fechaNacimiento").hasError("required"))}}function no(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function io(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function so(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," CUIT inv\xe1lido "),o.qZA())}function lo(r,n){if(1&r){const t=o.EpF();o.TgZ(0,"form",9)(1,"div",23)(2,"mat-form-field")(3,"mat-label"),o._uU(4,"Nombre / Raz\xf3n Social"),o.qZA(),o._UZ(5,"input",24),o.YNc(6,no,2,0,"mat-error",12),o.qZA()(),o.TgZ(7,"div",10)(8,"mat-form-field")(9,"mat-label"),o._uU(10,"CUIT"),o.qZA(),o.TgZ(11,"input",34),o.NdJ("keyup",function(){o.CHM(t);const a=o.oxw(2);return o.KtG(a.formatearCUIT())}),o.qZA(),o.TgZ(12,"mat-hint"),o._uU(13,"Formato: 20-12345678-9"),o.qZA(),o.YNc(14,io,2,0,"mat-error",12),o.YNc(15,so,2,0,"mat-error",12),o.qZA()()()}if(2&r){const t=o.oxw(2);o.Q6J("formGroup",t.fundacionForm),o.xp6(6),o.Q6J("ngIf",t.fundacionForm.get("nombre").hasError("required")),o.xp6(8),o.Q6J("ngIf",t.fundacionForm.get("cuit").hasError("required")),o.xp6(1),o.Q6J("ngIf",t.fundacionForm.get("cuit").hasError("invalidCUIT"))}}function co(r,n){if(1&r&&(o.TgZ(0,"mat-option",33),o._uU(1),o.qZA()),2&r){const t=n.$implicit;o.Q6J("value",t),o.xp6(1),o.hij(" ",t.nombre," ")}}function mo(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function uo(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Localidad inv\xe1lida "),o.qZA())}function po(r,n){if(1&r&&(o.TgZ(0,"mat-option",33),o._uU(1),o.qZA()),2&r){const t=n.$implicit;o.Q6J("value",t),o.xp6(1),o.hij(" ",t.nombre," ")}}function fo(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function _o(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Localidad inv\xe1lida "),o.qZA())}function go(r,n){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function ho(r,n){if(1&r){const t=o.EpF();o.TgZ(0,"form",9)(1,"div",23)(2,"mat-form-field",35)(3,"mat-label"),o._uU(4,"Localidad"),o.qZA(),o.TgZ(5,"input",36),o.NdJ("input",function(){o.CHM(t);const a=o.oxw(2);return o.KtG(a.getLocalidades())}),o.qZA(),o.TgZ(6,"mat-autocomplete",37,38),o.NdJ("optionSelected",function(a){o.CHM(t);const l=o.oxw(2);return o.KtG(l.onLocSelected(a.option.value))}),o.YNc(8,co,2,2,"mat-option",27),o.qZA(),o.YNc(9,mo,2,0,"mat-error",12),o.YNc(10,uo,2,0,"mat-error",12),o.qZA()(),o.TgZ(11,"div",23)(12,"mat-form-field",35)(13,"mat-label"),o._uU(14,"Calle"),o.qZA(),o.TgZ(15,"input",39),o.NdJ("input",function(){o.CHM(t);const a=o.oxw(2);return o.KtG(a.getCalles())}),o.qZA(),o.TgZ(16,"mat-autocomplete",37,40),o.NdJ("optionSelected",function(a){o.CHM(t);const l=o.oxw(2);return o.KtG(l.onCalleSelected(a.option.value))}),o.YNc(18,po,2,2,"mat-option",27),o.qZA(),o.YNc(19,fo,2,0,"mat-error",12),o.YNc(20,_o,2,0,"mat-error",12),o.qZA()(),o.TgZ(21,"div",10)(22,"mat-form-field")(23,"mat-label"),o._uU(24,"Altura"),o.qZA(),o._UZ(25,"input",41),o.YNc(26,go,2,0,"mat-error",12),o.qZA()(),o.TgZ(27,"div",10)(28,"mat-form-field")(29,"mat-label"),o._uU(30,"Piso"),o.qZA(),o._UZ(31,"input",42),o.qZA()(),o.TgZ(32,"div",23)(33,"mat-form-field")(34,"mat-label"),o._uU(35,"Departamento"),o.qZA(),o._UZ(36,"input",43),o.qZA()()()}if(2&r){const t=o.MAs(7),e=o.MAs(17),a=o.oxw(2);o.Q6J("formGroup",a.direccionForm),o.xp6(5),o.Q6J("matAutocomplete",t),o.xp6(1),o.Q6J("displayWith",a.displayItem),o.xp6(2),o.Q6J("ngForOf",a.localidades),o.xp6(1),o.Q6J("ngIf",a.direccionForm.get("localidad").hasError("required")),o.xp6(1),o.Q6J("ngIf",a.direccionForm.get("localidad").hasError("invalidSelection")),o.xp6(5),o.Q6J("matAutocomplete",e),o.xp6(1),o.Q6J("displayWith",a.displayItem),o.xp6(2),o.Q6J("ngForOf",a.calles),o.xp6(1),o.Q6J("ngIf",a.direccionForm.get("calle").hasError("required")),o.xp6(1),o.Q6J("ngIf",a.direccionForm.get("calle").hasError("invalidSelection")),o.xp6(6),o.Q6J("ngIf",a.direccionForm.get("altura").hasError("required"))}}function vo(r,n){1&r&&o._UZ(0,"mat-spinner",44)}function Co(r,n){if(1&r){const t=o.EpF();o.TgZ(0,"mat-card",6)(1,"mat-card-header"),o.YNc(2,S,5,1,"div",7),o.YNc(3,Q,5,1,"ng-template",null,8,o.W1O),o.qZA(),o.TgZ(5,"mat-card-content")(6,"form",9)(7,"div",10)(8,"mat-form-field")(9,"mat-label"),o._uU(10,"Email"),o.qZA(),o._UZ(11,"input",11),o.YNc(12,Y,2,0,"mat-error",12),o.YNc(13,B,2,0,"mat-error",12),o.qZA()(),o.TgZ(14,"div",13),o.YNc(15,G,8,3,"mat-form-field",12),o.qZA(),o.TgZ(16,"div",13)(17,"mat-form-field")(18,"mat-label"),o._uU(19,"Contrase\xf1a"),o.qZA(),o.TgZ(20,"input",14),o.NdJ("change",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.refreshValidity())}),o.qZA(),o.TgZ(21,"mat-icon",15),o.NdJ("click",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.togglePassword())}),o._uU(22),o.qZA(),o.YNc(23,k,2,0,"mat-error",12),o.YNc(24,L,2,0,"mat-error",12),o.YNc(25,j,2,0,"mat-error",12),o.qZA()(),o.TgZ(26,"div",10)(27,"mat-form-field")(28,"mat-label"),o._uU(29,"Confirm Password"),o.qZA(),o.TgZ(30,"input",16),o.NdJ("focus",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.refreshValidity())}),o.qZA(),o.TgZ(31,"mat-icon",15),o.NdJ("click",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.togglePassword())}),o._uU(32),o.qZA(),o.YNc(33,z,2,0,"mat-error",12),o.YNc(34,$,2,0,"mat-error",12),o.qZA()()(),o.YNc(35,ao,38,10,"form",17),o.YNc(36,lo,16,4,"form",17),o.TgZ(37,"div",18),o._uU(38,"Direcci\xf3n"),o.qZA(),o.YNc(39,ho,37,12,"form",17),o.qZA(),o.TgZ(40,"mat-card-actions",19)(41,"button",20),o.NdJ("click",function(){o.CHM(t);const a=o.oxw();return a.submit(),a.mainForm.markAllAsTouched(),o.KtG(a.direccionForm.valid)}),o._uU(42),o.YNc(43,vo,1,0,"mat-spinner",21),o.qZA()()()}if(2&r){const t=o.MAs(4),e=o.oxw();o.xp6(2),o.Q6J("ngIf","resetPassword"!=e.origin)("ngIfElse",t),o.xp6(4),o.Q6J("formGroup",e.mainForm),o.xp6(6),o.Q6J("ngIf",e.mainForm.get("email").hasError("required")),o.xp6(1),o.Q6J("ngIf",e.mainForm.get("email").hasError("pattern")),o.xp6(1),o.Q6J("ngClass",e.mainForm.get("telefono").hasError("formatoInvalido")?"form-input-medium-error":""),o.xp6(1),o.Q6J("ngIf","resetPassword"!=e.origin),o.xp6(1),o.Q6J("ngClass",e.mainForm.get("password").hasError("pattern")?"form-input-long-error":""),o.xp6(4),o.Q6J("type",e.passwordType),o.xp6(2),o.Oqu(e.passwordIcon),o.xp6(1),o.Q6J("ngIf",e.mainForm.get("password").hasError("required")),o.xp6(1),o.Q6J("ngIf",e.mainForm.get("password").hasError("differentPassword")&&!e.mainForm.get("password").hasError("pattern")),o.xp6(1),o.Q6J("ngIf",e.mainForm.get("password").hasError("pattern")),o.xp6(5),o.Q6J("type",e.passwordType),o.xp6(2),o.Oqu(e.passwordIcon),o.xp6(1),o.Q6J("ngIf",e.mainForm.get("confirmPassword").hasError("required")),o.xp6(1),o.Q6J("ngIf",e.mainForm.get("confirmPassword").hasError("differentPassword")),o.xp6(1),o.Q6J("ngIf",e.isSwapper&&"resetPassword"!=e.origin),o.xp6(1),o.Q6J("ngIf",!e.isSwapper&&"resetPassword"!=e.origin),o.xp6(3),o.Q6J("ngIf","resetPassword"!=e.origin),o.xp6(2),o.Q6J("disabled",!e.mainForm.valid||e.isSwapper&&!e.particularForm.valid||!e.isSwapper&&!e.fundacionForm.valid||!e.direccionForm.valid),o.xp6(1),o.hij(" ","resetPassword"==e.origin?"ACTUALIZAR CONTRASE\xd1A":"createAccount"==e.origin?"CREAR CUENTA":"GUARDAR CAMBIOS"," "),o.xp6(1),o.Q6J("ngIf",e.loadingSave)}}function To(r){const n=r.value;if(!n)return null;if(!/^\d{2}-\d{8,9}-\d{1,2}$/.test(n))return{invalidCUIT:!0};const e=n.replace(/-/g,""),a=parseInt(e.charAt(e.length-1)),l=[5,4,3,2,7,6,5,4,3,2];let m=0;for(let g=0;g<10;g++)m+=parseInt(e.charAt(g))*l[g];const c=m%11;return(0===c?0:11-c)!==a?{invalidCUIT:!0}:null}const Ao=[{path:"",component:(()=>{class r{constructor(t,e,a,l,m,c,I,g,qo,Po){this.fb=t,this.dateAdapter=e,this.usuarioService=a,this.location=l,this.auth=m,this.router=c,this.snackbar=I,this.cdr=g,this.phoneNumberPipe=qo,this.cuitPipe=Po,this.isSwapper=!0,this.loading=!0,this.origin="createAccount",this.passwordIcon="visibility_off",this.passwordType="password",this.tiposDocumento=[],this.loadingSave=!1,this.localidades=[],this.calles=[],this.closeSwal=!0,this.mainForm=t.group({email:["",[s.kI.required,s.kI.pattern(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)]],telefono:["",[s.kI.required,this.telefonoValidator()]],password:["",[s.kI.required,s.kI.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@#$%^&+=!*\-_.,])[a-zA-Z\d@#$%^&+=!*\-_.,]{8,32}$/),this.validarConfirmPassword()]],confirmPassword:["",[s.kI.required,this.validarConfirmPassword()]]}),this.particularForm=t.group({nombre:["",s.kI.required],apellido:["",s.kI.required],tipoDocumento:["",s.kI.required],nroDocumento:[{value:"",disabled:!0},s.kI.required],fechaNacimiento:["",s.kI.required]}),this.fundacionForm=t.group({nombre:["",s.kI.required],cuit:["",[s.kI.required,To]]}),this.direccionForm=t.group({localidad:["",[s.kI.required,this.validateItem.bind(this)]],calle:[{value:"",disabled:!0},[s.kI.required,this.validateItem.bind(this)]],altura:[{value:"",disabled:!0},s.kI.required],piso:[{value:"",disabled:!0}],departamento:[{value:"",disabled:!0}]}),this.screenWidth=window.innerWidth>0?window.innerWidth:screen.width,this.dateAdapter.setLocale("es-AR");const b=l.path();"/reset-password"==b?this.origin="resetPassword":"/edit-perfil"==b?(this.origin="editAccount",this.mainForm.controls.password.disable(),this.mainForm.controls.confirmPassword.disable(),this.mainForm.controls.email.disable()):this.mainForm.controls.telefono.addValidators(s.kI.required)}ngOnInit(){"createAccount"==this.origin?this.selectTipoPerfil():"editAccount"==this.origin?(this.loadUserInfo(),this.loading=!1):this.loading=!1,this.getTiposDocumentos()}ngOnDestroy(){this.closeSwal&&d().close(),this.closeSwal=!0}loadUserInfo(){this.auth.getUserID()?this.usuarioService.getUserByID(this.auth.getUserID()).subscribe({next:e=>{console.log(e),this.mainForm.patchValue({email:e.email,telefono:e.telefono,password:e.password,confirmPassword:e.password}),e.particularDTO?this.particularForm.patchValue({nombre:e.particularDTO.nombre,apellido:e.particularDTO.apellido,tipoDocumento:e.particularDTO.tipoDocumento,nroDocumento:e.particularDTO.dni,fechaNacimiento:e.particularDTO.fechaNacimiento}):this.fundacionForm.patchValue({nombre:e.fundacionDTO.nombre,cuit:e.fundacionDTO.cuil});const a=e.particularDTO?e.particularDTO.direcciones[0]:e.fundacionDTO.direcciones[0];a.localidad&&this.setAddress(a)},error:e=>{console.log("error",e)}}):d().fire("Error!","Ocurri\xf3 un error al traer tu informaci\xf3n. Intentalo devuelta m\xe1s tarde","error")}setAddress(t){fetch("https://apis.datos.gob.ar/georef/api/localidades?orden=id&provincia=02&exacto=true&nombre="+t.localidad).then(a=>a.json()).then(a=>{1==a.cantidad&&(this.direccionForm.controls.localidad.setValue(a.localidades[0]),this.localidades=a.localidades,fetch("https://apis.datos.gob.ar/georef/api/calles?orden=id&provincia=02&exacto=true&departamento="+this.direccionForm.controls.localidad.value.departamento.id+"&nombre="+t.calle).then(c=>c.json()).then(c=>{1==c.cantidad&&this.direccionForm.controls.calle.setValue(c.calles[0]),this.calles=c.calles,this.direccionForm.patchValue({altura:t.altura,piso:t.piso,departamento:t.departamento}),this.direccionForm.enable()}).catch(c=>console.error(c)))}).catch(a=>console.error(a))}selectTipoPerfil(){d().fire({title:"\xa1Te damos la bienvenida!",text:"Nos alegra que te sumes a nuestra comunidad, antes de seguir, \n\t\t\tnecesitamos saber si te quer\xe9s registrar como fundaci\xf3n o como Particular",confirmButtonText:"Represento a una fundaci\xf3n",confirmButtonColor:"#87db59",cancelButtonText:"No soy de una fundaci\xf3n",showCancelButton:!0,cancelButtonColor:"#ae59db",icon:"question",allowOutsideClick:!1,allowEscapeKey:!1}).then(t=>{t.isConfirmed?(this.isSwapper=!1,this.particularForm=this.fb.group({})):this.fundacionForm=this.fb.group({}),this.loading=!1})}getTiposDocumentos(){this.usuarioService.getTiposDocumentos().subscribe({next:t=>{this.tiposDocumento=t},error:t=>{console.log("ERROR TIPOS DOC:",t)}})}submit(){var t=this;return(0,x.Z)(function*(){if(t.loadingSave=!0,t.mainForm.valid)if("resetPassword"==t.origin)t.auth.resetPassword({username:t.mainForm.controls.email.value,nuevoPassword:t.mainForm.controls.password.value,confirmarPassword:t.mainForm.controls.confirmPassword.value}).subscribe({next:a=>{t.loadingSave=!1},error:a=>{console.log("error:",a),t.loadingSave=!1}});else if(t.direccionForm.valid){let e={username:t.mainForm.controls.email.value,email:t.mainForm.controls.email.value,password:t.mainForm.controls.password.value,telefono:t.mainForm.controls.telefono.value,confirmPassword:t.mainForm.controls.confirmPassword.value,direccion:{localidad:t.direccionForm.controls.localidad.value.nombre,calle:t.direccionForm.controls.calle.value.nombre,altura:t.direccionForm.controls.altura.value,piso:t.direccionForm.controls.piso.value,departamento:t.direccionForm.controls.departamento.value}};const a=`https://apis.datos.gob.ar/georef/api/direcciones?provincia=02&localidad=${t.direccionForm.controls.localidad.value.nombre}&direccion=${encodeURIComponent(t.direccionForm.controls.calle.value.nombre+t.direccionForm.controls.altura.value)}`.replace(" ","");if(!(yield fetch(a).then(c=>c.json())).cantidad)return console.log("not valid address"),d().fire("Direcci\xf3n inv\xe1lida","La direcci\xf3n que ingresaste no es v\xe1lida, por favor revisala y volv\xe9 a intentar.","error"),void(t.loadingSave=!1);let m=!1;t.isSwapper?t.particularForm.valid?(e.particular={fechaNacimiento:new Date(t.particularForm.controls.fechaNacimiento.value),dni:t.particularForm.controls.nroDocumento.value,cuil:t.particularForm.controls.nroDocumento.value,nombre:t.particularForm.controls.nombre.value,apellido:t.particularForm.controls.apellido.value,tipoDocumento:t.particularForm.controls.tipoDocumento.value},m=!0):(t.showMessage("\xa1Campos incorrectos!","Por favor, revis\xe1 los campos y volv\xe9 a intentar","OK","","error"),t.loadingSave=!1):t.fundacionForm.valid?(e.fundacion={nombre:t.fundacionForm.controls.nombre.value,cuil:t.fundacionForm.controls.cuit.value},m=!0):(t.showMessage("\xa1Campos incorrectos!","Por favor, revis\xe1 los campos y volv\xe9 a intentar","OK","","error"),t.loadingSave=!1),m&&("createAccount"==t.origin?t.usuarioService.createUser(e).subscribe({next:c=>{t.id_user=c,t.messageWithTimer(),t.loadingSave=!1},error:c=>{console.error("error",c),t.loadingSave=!1}}):t.usuarioService.editUser(e).subscribe({next:c=>{t.showMessage("\xa1\xc9xito!","Tus datos se editaron exitosamente.","Genial!","edit","success"),t.loadingSave=!1},error:c=>{console.error("error",c),t.loadingSave=!1}}))}else t.showMessage("\xa1Campos incorrectos!","Por favor, revis\xe1 los campos y volv\xe9 a intentar","OK","","error"),t.loadingSave=!1;else t.showMessage("\xa1Campos incorrectos!","Por favor, revis\xe1 los campos y volv\xe9 a intentar","OK","","error"),t.loadingSave=!1})()}showMessage(t,e,a,l,m){d().fire({title:t,text:e,confirmButtonText:a,icon:m,allowOutsideClick:"success"!=m}).then(({isConfirmed:c})=>{c&&"error"!=m&&("ir_a_home"==l?this.router.navigate(["home"]):"edit"==l&&this.router.navigate(["mi-perfil"]))})}validarConfirmPassword(){return t=>{if(t.value){const e=this.mainForm.controls.password.value,a=this.mainForm.controls.confirmPassword.value;if(e&&a&&e!=a)return{differentPassword:!0};this.mainForm.controls.password.setErrors(null),this.mainForm.controls.confirmPassword.setErrors(null)}return null}}formatearTelefono(){this.mainForm.get("telefono")?.setValue(this.phoneNumberPipe.transform(this.mainForm.get("telefono")?.value)),this.cdr.detectChanges()}telefonoValidator(){const t=/^11\s\d{4}-\d{4}$/;return e=>e.value?t.test(e.value)?null:{formatoInvalido:!0}:null}togglePassword(){this.passwordType="text"===this.passwordType?"password":"text",this.passwordIcon="visibility"===this.passwordIcon?"visibility_off":"visibility"}refreshValidity(){this.mainForm.updateValueAndValidity()}formatDocument(t){this.particularForm.controls.nroDocumento.enable(),this.particularForm.controls.nroDocumento.addValidators(s.kI.pattern(/^(?!0+$)[1-9]\d{6,7}$/))}formatearCUIT(){this.fundacionForm.get("cuit")?.setValue(this.cuitPipe.transform(this.fundacionForm.get("cuit")?.value)),this.cdr.detectChanges()}messageWithTimer(){let t=60;d().fire({title:"\xa1Gracias por registrarte!",text:"Te enviamos un email a la cuenta que ingresaste, con un c\xf3digo para verificar tu cuenta. Por favor ingresalo a continuaci\xf3n. Si no verific\xe1s la cuenta ahora, podr\xe1s hacerlo la pr\xf3xima vez que inicies sesi\xf3n.",icon:"success",showDenyButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,denyButtonText:"Reenviar email en 60 segundos",denyButtonColor:"#ae59db",confirmButtonColor:"#87db59",confirmButtonText:"Confirmar",input:"text",didOpen:()=>{const e=document.querySelector(".swal2-deny"),a=setInterval(()=>{t--,e&&(e.setAttribute("style","background-color: #a3a3a3;"),e.textContent=`Reenviar email en ${t} segundos`),t<=0&&e&&(e.disabled=!1,e.setAttribute("style","background-color: #9c30d4;"),e.textContent="Reenviar email",clearInterval(a))},1e3)},preDeny:()=>(console.log("pre deny",t),this.id_user&&0==t&&this.auth.sendEmailAgain(this.id_user).subscribe({next:e=>{console.log(e),this.snackbar.open("Se envi\xf3 el nuevo mail!","",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})}}),!1),reverseButtons:!0}).then(({isConfirmed:e,value:a})=>{e&&this.id_user&&this.usuarioService.confirmarCuenta(this.id_user,a).subscribe({next:l=>{d().fire("Excelente!","Tu cuenta fue verificada, ya podes usar Ecoswap!","success"),this.closeSwal=!1,this.router.navigate(["/"])},error:l=>{console.log(l),this.router.navigate(["/login"])}})})}displayItem(t){return t?function Zo(r){return r&&r.toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}(t.nombre):""}validateItem(t){const e=t.value,a=t.parent;if(!a)return{invalidSelection:!0};const l=Object.keys(a.controls).find(m=>t===a.get(m));return e&&this.localidades?("localidad"==l?this.localidades:this.calles).some(c=>c.nombre.toUpperCase()==(e.nombre||e).toUpperCase())?null:{invalidSelection:!0}:null}getLocalidades(){const t=this.direccionForm.controls.localidad.value;0==t.length?(this.direccionForm.controls.calle.disable(),this.direccionForm.controls.altura.disable(),this.direccionForm.controls.piso.disable(),this.direccionForm.controls.departamento.disable()):t.length>=3&&fetch("https://apis.datos.gob.ar/georef/api/localidades?orden=id&provincia=02&nombre="+t).then(a=>a.json()).then(a=>{this.localidades=a.localidades}).catch(a=>console.error(a))}getCalles(){const t=this.direccionForm.controls.calle.value,e=this.direccionForm.controls.localidad.value.departamento.id;0==t.length&&(this.direccionForm.controls.altura.disable(),this.direccionForm.controls.piso.disable(),this.direccionForm.controls.departamento.disable()),t.length>=3&&fetch("https://apis.datos.gob.ar/georef/api/calles?orden=id&provincia=02&departamento="+e+"&nombre="+t).then(l=>l.json()).then(l=>{this.calles=l.calles}).catch(l=>console.error(l))}onLocSelected(t){t&&this.direccionForm.controls.calle.enable()}onCalleSelected(t){t&&(this.direccionForm.controls.altura.enable(),this.direccionForm.controls.piso.enable(),this.direccionForm.controls.departamento.enable())}}return r.\u0275fac=function(t){return new(t||r)(o.Y36(s.qu),o.Y36(f._A),o.Y36(Z.i),o.Y36(p.Ye),o.Y36(U.e),o.Y36(h.F0),o.Y36(q.ux),o.Y36(o.sBO),o.Y36(P.X),o.Y36(y.K))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-registro"]],features:[o._Bn([{provide:f.Ad,useValue:"en-GB"},{provide:f._A,useClass:u.e}])],decls:4,vars:2,consts:[["url","registro"],["id","main-container",1,"app-main-div"],["style","height: 65vh; display: flex; justify-content: center;",4,"ngIf"],["id","main-card",4,"ngIf"],[2,"height","65vh","display","flex","justify-content","center"],["diameter","20"],["id","main-card"],[4,"ngIf","ngIfElse"],["resetHeader",""],[1,"form",3,"formGroup"],[1,"form-input"],["matInput","","formControlName","email","type","email"],[4,"ngIf"],[1,"form-input",3,"ngClass"],["matInput","","formControlName","password",3,"type","change"],["matSuffix","",1,"eye",3,"click"],["matInput","","formControlName","confirmPassword",3,"type","focus"],["class","form",3,"formGroup",4,"ngIf"],[2,"margin","20px 5% 0px","font-weight","bold"],[1,"buttons"],["mat-fab","","extended","","color","primary",3,"disabled","click"],["diameter","20","style","margin-left: 10px;",4,"ngIf"],["matInput","","formControlName","telefono",3,"ngModel","keyup"],[1,"form-input","capitalize-input"],["matInput","","formControlName","nombre"],["matInput","","formControlName","apellido"],["formControlName","tipoDocumento","name","tipoDocumento",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","nroDocumento","type","number"],["floatLabel","always"],["matInput","","formControlName","fechaNacimiento","readonly","",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[3,"value"],["matInput","","formControlName","cuit",3,"keyup"],[1,"example-full-width"],["type","text","matInput","","formControlName","localidad",3,"matAutocomplete","input"],["requireSelection","",3,"displayWith","optionSelected"],["autoLoc","matAutocomplete"],["type","text","matInput","","formControlName","calle",3,"matAutocomplete","input"],["autoCalle","matAutocomplete"],["matInput","","formControlName","altura","type","number"],["matInput","","formControlName","piso","type","number"],["matInput","","formControlName","departamento"],["diameter","20",2,"margin-left","10px"]],template:function(t,e){1&t&&(o._UZ(0,"app-header",0),o.TgZ(1,"div",1),o.YNc(2,J,2,0,"div",2),o.YNc(3,Co,44,23,"mat-card",3),o.qZA()),2&t&&(o.xp6(2),o.Q6J("ngIf",e.loading),o.xp6(1),o.Q6J("ngIf",!e.loading))},dependencies:[p.mk,p.sg,p.O5,v.KE,v.hX,v.bx,v.TO,v.R9,R.Hw,O.Nt,N.Ou,M.cs,D.gD,f.ey,A.Mq,A.hl,A.nW,F.XC,F.ZL,_.a8,_.hq,_.dn,_.dk,_.$j,_.n5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,E.G],styles:["#main-container[_ngcontent-%COMP%]{padding:2%}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]{width:80%;margin:2% auto}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:grid;align-items:center;margin-top:20px;grid-template-columns:1fr 1fr;row-gap:10px;column-gap:5px;justify-items:center}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{display:flex;justify-content:center;width:80%}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-input.capitalize-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-transform:capitalize}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]   .eye[_ngcontent-%COMP%]:hover{cursor:pointer}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (min-width: 0px) and (max-width: 768px){.form[_ngcontent-%COMP%]{grid-template-columns:1fr!important;row-gap:10px!important;column-gap:5px!important}}"]}),r})()}];let Fo=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[h.Bz.forChild(Ao),h.Bz]}),r})();var Io=i(7870),bo=i(3148),wo=i(9499);let Uo=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[p.ez,Fo,Io.q,bo.IJ,wo.O]}),r})()}}]);