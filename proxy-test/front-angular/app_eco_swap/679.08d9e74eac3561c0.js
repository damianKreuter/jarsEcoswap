"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[679],{9499:(x,d,a)=>{a.d(d,{O:()=>C});var s=a(4755),g=a(7468),i=a(9401),_=a(3148),f=a(4466),o=a(2223);let C=(()=>{class l{}return l.\u0275fac=function(h){return new(h||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[s.ez,g.q,_.IJ,i.u5,i.UX,f.m]}),l})()},8679:(x,d,a)=>{a.r(d),a.d(d,{FormPublicacionModule:()=>W});var s=a(4755),g=a(1531),i=a(9401),_=a(5226),f=a.n(_),o=a(2223),C=a(2777),l=a(9114),b=a(430),h=a(9609),M=a(8657),v=a(8467),P=a(1728),p=a(6012),Z=a(1292),F=a(3649),O=a(7876),T=a(4984);function A(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function U(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function y(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function E(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," Debe ser menor al valor m\xe1ximo ingresado. "),o.qZA())}function q(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," Debe ser mayor a cero. "),o.qZA())}function I(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function J(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," Debe ser mayor al valor m\xednimo ingresado y mayor a cero. "),o.qZA())}function N(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function D(n,r){if(1&n&&(o.TgZ(0,"mat-form-field",10)(1,"mat-label"),o._uU(2,"Precio de Venta"),o.qZA(),o._UZ(3,"input",34),o.TgZ(4,"span",12),o._uU(5,"$\xa0"),o.qZA(),o.YNc(6,N,2,0,"mat-error",8),o.qZA()),2&n){const t=o.oxw(2);o.xp6(6),o.Q6J("ngIf",t.publicacionForm.get("precioVenta").hasError("required"))}}function Q(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," El campo no puede contener "),o.TgZ(2,"b"),o._uU(3,";"),o.qZA()())}function w(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," Campo obligatorio "),o.qZA())}function V(n,r){if(1&n){const t=o.EpF();o.TgZ(0,"div",35)(1,"mat-form-field"),o._UZ(2,"textarea",36,37),o.YNc(4,Q,4,0,"mat-error",8),o.YNc(5,w,2,0,"mat-error",8),o.qZA(),o.TgZ(6,"button",38),o.NdJ("click",function(){const m=o.CHM(t).index,u=o.oxw(2);return o.KtG(u.removeCaracteristica(m))}),o.TgZ(7,"mat-icon"),o._uU(8,"delete"),o.qZA()()()}if(2&n){const t=r.$implicit;o.Q6J("formGroupName",r.index),o.xp6(4),o.Q6J("ngIf",t.get("s_descripcion").hasError("pattern")),o.xp6(1),o.Q6J("ngIf",t.get("s_descripcion").hasError("required"))}}function Y(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," La publicaci\xf3n debe tener al menos 1 caracter\xedstica "),o.qZA())}function L(n,r){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," La publicaci\xf3n debe tener al menos 1 imagen "),o.qZA())}function R(n,r){if(1&n){const t=o.EpF();o.TgZ(0,"div",39),o.NdJ("click",function(){const m=o.CHM(t).index,u=o.oxw(2);return o.KtG(u.removeImagen(m))}),o.TgZ(1,"div",40),o._UZ(2,"div",41),o.TgZ(3,"mat-icon",42),o._uU(4,"delete"),o.qZA(),o._UZ(5,"img",43),o.qZA()()}if(2&n){const t=r.$implicit;o.xp6(5),o.Q6J("src",t,o.LSH)}}function K(n,r){1&n&&o._UZ(0,"mat-spinner",44)}function k(n,r){if(1&n){const t=o.EpF();o.TgZ(0,"mat-card",3)(1,"mat-card-header",4)(2,"mat-card-title"),o._uU(3,"Complet\xe1 los datos de tu publicaci\xf3n!"),o.qZA()(),o.TgZ(4,"mat-card-content")(5,"form",5)(6,"div",6)(7,"mat-form-field")(8,"mat-label"),o._uU(9,"T\xedtulo"),o.qZA(),o._UZ(10,"input",7),o.YNc(11,A,2,0,"mat-error",8),o.qZA()(),o.TgZ(12,"div",6)(13,"mat-form-field")(14,"mat-label"),o._uU(15,"Descripci\xf3n"),o.qZA(),o._UZ(16,"input",9),o.YNc(17,U,2,0,"mat-error",8),o.qZA()(),o.TgZ(18,"div",6)(19,"mat-form-field",10)(20,"mat-label"),o._uU(21,"Valor "),o.TgZ(22,"b"),o._uU(23,"m\xednimo"),o.qZA(),o._uU(24," de trueque"),o.qZA(),o._UZ(25,"input",11),o.TgZ(26,"span",12),o._uU(27,"$\xa0"),o.qZA(),o.YNc(28,y,2,0,"mat-error",8),o.YNc(29,E,2,0,"mat-error",8),o.YNc(30,q,2,0,"mat-error",8),o.qZA()(),o.TgZ(31,"div",13)(32,"mat-form-field",10)(33,"mat-label"),o._uU(34,"Valor "),o.TgZ(35,"b"),o._uU(36,"m\xe1ximo"),o.qZA(),o._uU(37," de trueque"),o.qZA(),o._UZ(38,"input",14),o.TgZ(39,"span",12),o._uU(40,"$\xa0"),o.qZA(),o.YNc(41,I,2,0,"mat-error",8),o.YNc(42,J,2,0,"mat-error",8),o.qZA()(),o.TgZ(43,"div",6)(44,"mat-checkbox",15),o.NdJ("change",function(c){o.CHM(t);const m=o.oxw();return o.KtG(m.allowVenta(c))}),o.TgZ(45,"label",16),o._uU(46," Acepta Venta "),o.TgZ(47,"mat-icon",17),o._uU(48," info "),o.qZA()()(),o.TgZ(49,"mat-form-field",18),o._UZ(50,"input",19),o.qZA()(),o.TgZ(51,"div",6),o.YNc(52,D,7,1,"mat-form-field",20),o.qZA(),o.TgZ(53,"section",21)(54,"div")(55,"label",16),o._uU(56," Caracter\xedsticas "),o.TgZ(57,"mat-icon",22),o._uU(58," info "),o.qZA()()(),o.TgZ(59,"div"),o.YNc(60,V,9,3,"div",23),o.TgZ(61,"button",24),o.NdJ("click",function(){o.CHM(t);const c=o.oxw();return o.KtG(c.agregarCaracteristica())}),o.TgZ(62,"mat-icon"),o._uU(63,"add"),o.qZA(),o.TgZ(64,"label"),o._uU(65,"Agregar Caracter\xedstica"),o.qZA()(),o.YNc(66,Y,2,0,"mat-error",8),o.qZA(),o._UZ(67,"div"),o.qZA(),o.TgZ(68,"section",6)(69,"div")(70,"label",25),o._uU(71,"Im\xe1genes"),o.qZA()(),o.TgZ(72,"button",26),o.NdJ("click",function(){o.CHM(t);const c=o.MAs(77);return o.KtG(c.click())}),o.TgZ(73,"mat-icon"),o._uU(74,"add"),o.qZA(),o._uU(75," Agregar Imagen "),o.qZA(),o.TgZ(76,"input",27,28),o.NdJ("change",function(c){o.CHM(t);const m=o.oxw();return o.KtG(m.onFileChange(c))}),o.qZA(),o.YNc(78,L,2,0,"mat-error",8),o.TgZ(79,"div",29),o.YNc(80,R,6,1,"div",30),o.qZA()()()(),o.TgZ(81,"mat-card-actions",31)(82,"button",32),o.NdJ("click",function(){o.CHM(t);const c=o.oxw();return c.publicar(),c.publicacionForm.markAllAsTouched(),o.KtG(c.publicacionForm.valid)}),o._uU(83," CREAR PUBLICACI\xd3N "),o.qZA(),o.YNc(84,K,1,0,"mat-spinner",33),o.qZA()()}if(2&n){const t=o.oxw();let e;o.xp6(5),o.Q6J("formGroup",t.publicacionForm),o.xp6(6),o.Q6J("ngIf",t.publicacionForm.get("titulo").hasError("required")),o.xp6(6),o.Q6J("ngIf",t.publicacionForm.get("descripcion").hasError("required")),o.xp6(8),o.Q6J("min",0)("max",t.publicacionForm.get("valorMaximo").value||null),o.xp6(3),o.Q6J("ngIf",t.publicacionForm.get("valorMinimo").hasError("required")),o.xp6(1),o.Q6J("ngIf",t.publicacionForm.get("valorMinimo").hasError("max")),o.xp6(1),o.Q6J("ngIf",t.publicacionForm.get("valorMinimo").hasError("min")),o.xp6(1),o.Q6J("ngClass",t.publicacionForm.get("valorMaximo").hasError("min")?"form-input-long-error":""),o.xp6(7),o.Q6J("min",t.publicacionForm.get("valorMinimo").value||0),o.xp6(3),o.Q6J("ngIf",t.publicacionForm.get("valorMaximo").hasError("required")),o.xp6(1),o.Q6J("ngIf",t.publicacionForm.get("valorMaximo").hasError("min")),o.xp6(10),o.Q6J("ngIf",null==(e=t.publicacionForm.get("finalidadVenta"))?null:e.value),o.xp6(8),o.Q6J("ngForOf",t.getCaracteristicasArray.controls),o.xp6(6),o.Q6J("ngIf",0==t.getCaracteristicasArray.length&&t.showErrors),o.xp6(12),o.Q6J("ngIf",t.publicacionForm.get("file").hasError("required")&&t.showErrors),o.xp6(2),o.Q6J("ngForOf",t.images),o.xp6(2),o.Q6J("disabled",t.loadingSave),o.xp6(2),o.Q6J("ngIf",t.loadingSave)}}const G=[{path:"",component:(()=>{class n{constructor(t,e,c){this.fb=t,this.truequeService=e,this.router=c,this.images=[],this.loading=!1,this.showErrors=!1,this.loadingSave=!1,this.publicacionForm=t.group({titulo:["",i.kI.required],descripcion:["",i.kI.required],valorMinimo:["",i.kI.required],valorMaximo:["",i.kI.required],finalidadVenta:[!1],precioVenta:[""],caracteristicas:this.fb.array([]),file:["",i.kI.required],file_source:[""],tipoProducto:[""],idParticular:[""]})}get getCaracteristicasArray(){return this.publicacionForm.get("caracteristicas")}agregarCaracteristica(t){const e=this.fb.group({s_descripcion:["",[i.kI.pattern(/[^;]/g),i.kI.required]]});this.getCaracteristicasArray.push(e)}removeCaracteristica(t){this.getCaracteristicasArray.removeAt(t)}onFileChange(t){if(t.target.files&&t.target.files[0]){var e=t.target.files.length;for(let m=0;m<e;m++){var c=new FileReader;c.onload=u=>{this.images.push(u.target.result),this.publicacionForm.patchValue({file_source:this.images})},c.readAsDataURL(t.target.files[m]),console.log(this.images,this.publicacionForm.controls.file_source)}}}removeImagen(t){this.images.splice(t,1),this.publicacionForm.patchValue({file_source:this.images})}publicar(){if(this.showErrors=!0,this.publicacionForm.valid){this.loadingSave=!0;let e=[];(this.getCaracteristicasArray.value||[]).forEach(m=>{e.push(m.s_descripcion)}),console.log("PUBLICAR: ",this.publicacionForm.value);const c={titulo:this.publicacionForm.controls.titulo.value,descripcion:this.publicacionForm.controls.descripcion.value,imagen:this.publicacionForm.controls.file_source.value,tipoProducto:"OTROS",caracteristicasProducto:e,fechaPublicacion:new Date,esVenta:this.publicacionForm.controls.finalidadVenta.value,precioVenta:this.publicacionForm.controls.precioVenta.value,valorTruequeMin:this.publicacionForm.controls.valorMinimo.value,valorTruequeMax:this.publicacionForm.controls.valorMaximo.value};console.log("body",c),this.truequeService.crearPublicacion(c).subscribe({next:m=>{console.log("publicacion creada",m),f().fire({title:"\xa1Creada!",text:"La publicaci\xf3n se cre\xf3 correctamente, ya podes hacer un intercambio!",icon:"success"}).then(({})=>{this.router.navigate(["mis-publicaciones"])}),this.loadingSave=!1},error:m=>{console.log("error creando publicacion",m),this.loadingSave=!1}})}}allowVenta(t){t.checked?this.publicacionForm.controls.precioVenta.addValidators(i.kI.required):this.publicacionForm.controls.precioVenta.removeValidators(i.kI.required)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(i.qu),o.Y36(C.x),o.Y36(g.F0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-form-publicacion"]],decls:4,vars:2,consts:[["id","main-publicacion",1,"app-main-div"],[3,"loading"],["id","main-card",4,"ngIf"],["id","main-card"],[2,"margin-bottom","20px"],[1,"form",3,"formGroup"],[1,"form-col"],["matInput","","formControlName","titulo","type","text"],[4,"ngIf"],["matInput","","formControlName","descripcion","type","text"],["floatLabel","always"],["matInput","","formControlName","valorMinimo","type","number",3,"min","max"],["matTextPrefix",""],[1,"form-col",3,"ngClass"],["matInput","","formControlName","valorMaximo","type","number",3,"min"],["formControlName","finalidadVenta",3,"change"],[1,"caract-label"],["matTooltip","Si cheque\xe1s este campo, adem\xe1s de propuestas de intercambio, te pueden llegar propuestas de compra de tu producto.",1,"material-icons-outlined",2,"color","var(--grey-text)","margin","5px"],["hidden",""],["matInput","","type","text"],["floatLabel","always",4,"ngIf"],["formArrayName","caracteristicas",1,"form-col"],["matTooltip","Por favor incluir medidas, estado del producto,  material del producto y cualquier caracter\xedstica que identifique a tu producto",1,"material-icons-outlined"],["class","caracteristica",3,"formGroupName",4,"ngFor","ngForOf"],["type","button","mat-fab","","extended","","color","light",2,"width","100%",3,"click"],[2,"font-weight","500","font-size","large","margin","7px 0"],["type","button","mat-fab","","extended","","color","light",3,"click"],["formControlName","file","id","file","type","file","multiple","",1,"form-control","hidden",3,"change"],["file",""],[1,"form-col","form-imgs"],["class","show-image",3,"click",4,"ngFor","ngForOf"],[1,"buttons"],["mat-fab","","extended","","color","primary",3,"disabled","click"],["diameter","20","style","margin-left: 10px;",4,"ngIf"],["matInput","","formControlName","precioVenta","type","text"],[1,"caracteristica",3,"formGroupName"],["matInput","","placeholder","Descripci\xf3n*","formControlName","s_descripcion","cdkTextareaAutosize",""],["autosize","cdkTextareaAutosize"],["type","button","mat-icon-button","","color","light",2,"height","60px","margin-left","5px",3,"click"],[1,"show-image",3,"click"],[1,"image"],[1,"overlay"],["color","primary",1,"update"],[1,"img-producto",3,"src"],["diameter","20",2,"margin-left","10px"]],template:function(t,e){1&t&&(o._UZ(0,"app-header"),o.TgZ(1,"div",0),o._UZ(2,"app-spinner",1),o.YNc(3,k,85,19,"mat-card",2),o.qZA()),2&t&&(o.xp6(2),o.Q6J("loading",e.loading),o.xp6(1),o.Q6J("ngIf",!e.loading))},dependencies:[s.mk,s.sg,s.O5,l.KE,l.hX,l.TO,l.qo,b.Hw,h.Nt,M.IC,v.Ou,P.RK,P.cs,p.a8,p.hq,p.dn,p.dk,p.n5,Z.oG,F.gM,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.qQ,i.Fd,i.sg,i.u,i.x0,i.CE,O.G,T.O],styles:["#main-publicacion[_ngcontent-%COMP%]{padding:2%}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;row-gap:10px}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col[_ngcontent-%COMP%]{padding:5px;display:flex;flex-direction:column;justify-content:center}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;padding:0}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;cursor:pointer;padding-top:5px}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;display:flex;align-items:center;justify-content:center}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]:hover > .overlay[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;background-color:#000;opacity:.5;transition:all 1s}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .img-producto[_ngcontent-%COMP%]{width:100px;margin:3px}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .img-producto[_ngcontent-%COMP%]:hover{cursor:pointer}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:block}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;display:none}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col[_ngcontent-%COMP%]   .caracteristica[_ngcontent-%COMP%]{display:grid;grid-template-columns:5fr 1fr;align-items:center}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .caract-label[_ngcontent-%COMP%]{font-weight:500;font-size:large;display:flex;align-items:center}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .caract-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--grey-text);margin:5px}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .caract-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer;color:var(--dark-grey)}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}#main-publicacion[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (min-width: 0px) and (max-width: 576px){.form[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}"]}),n})()}];let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[g.Bz.forChild(G),g.Bz]}),n})();var B=a(7468),H=a(3148),z=a(9499),j=a(4466);let W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[s.ez,S,B.q,H.IJ,z.O,j.m]}),n})()}}]);