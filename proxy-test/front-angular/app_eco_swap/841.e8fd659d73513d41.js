"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[841],{9499:(v,m,n)=>{n.d(m,{O:()=>f});var l=n(4755),u=n(4766),p=n(9401),d=n(3148),g=n(4466),o=n(2223);let f=(()=>{class a{}return a.\u0275fac=function(P){return new(P||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[l.ez,u.q,d.IJ,p.u5,p.UX,g.m]}),a})()},8841:(v,m,n)=>{n.r(m),n.d(m,{PublicacionesModule:()=>G});var l=n(4755),u=n(1531),p=n(3276),d=n(5226),g=n.n(d),o=n(2223),f=n(4377),a=n(9401),h=n(4893),P=n(3073),C=n(2777),T=n(5500);let x=(()=>{class t{constructor(i){this.backendService=i}getMyCompras(){return this.backendService.get("URImsUsuarios","api/misCompras")}}return t.\u0275fac=function(i){return new(i||t)(o.LFG(T.k))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=n(9114),S=n(430),O=n(9609),I=n(1728),Z=n(787),y=n(1217),F=n(3649),A=n(7876),E=n(4984),J=n(8719);function U(t,c){if(1&t&&(o.TgZ(0,"mat-option",16),o._uU(1),o.qZA()),2&t){const i=c.$implicit;o.Q6J("value",i.nombre),o.xp6(1),o.hij(" ",i.descripcion," ")}}function B(t,c){if(1&t){const i=o.EpF();o.TgZ(0,"form",8)(1,"mat-form-field",9)(2,"mat-label"),o._uU(3,"C\xf3digo Postal"),o.qZA(),o._UZ(4,"input",10),o.qZA(),o.TgZ(5,"mat-form-field",9)(6,"mat-label"),o._uU(7,"Tipo del Producto"),o.qZA(),o.TgZ(8,"mat-select",11),o.YNc(9,U,2,2,"mat-option",12),o.qZA()(),o.TgZ(10,"div",13)(11,"button",14),o.NdJ("click",function(){o.CHM(i);const s=o.oxw();return o.KtG(s.filtrarPublicaciones())}),o._uU(12,"FILTRAR"),o.qZA(),o.TgZ(13,"button",15),o.NdJ("click",function(){o.CHM(i);const s=o.oxw();return o.KtG(s.limpiarFiltros())}),o._uU(14,"LIMPIAR"),o.qZA()()()}if(2&t){const i=o.oxw();o.Q6J("formGroup",i.formFiltros),o.xp6(9),o.Q6J("ngForOf",i.tipos_productos)}}function N(t,c){1&t&&(o.TgZ(0,"div",13),o._uU(1,"No hay publicaciones para mostrar"),o.qZA())}const w=function(){return[5,10,25]};function z(t,c){if(1&t){const i=o.EpF();o.TgZ(0,"div",2),o.YNc(1,N,2,0,"div",17),o.TgZ(2,"div"),o._UZ(3,"app-deck-publicaciones",18),o.TgZ(4,"mat-paginator",19,20),o.NdJ("page",function(s){o.CHM(i);const r=o.oxw();return o.KtG(r.changePage(s))}),o.qZA()()()}if(2&t){const i=o.oxw();o.xp6(1),o.Q6J("ngIf",0==i.publicacionesToShow.length),o.xp6(2),o.Q6J("publicacionesToShow",i.paginatedPublicaciones),o.xp6(1),o.Q6J("pageSizeOptions",o.DdM(6,w))("pageSize",i.pageSize)("showFirstLastButtons",!0)("length",i.publicacionesToShow.length)}}const R=[{path:"",component:(()=>{class t{constructor(i,e,s,r,K,H,W){this.router=i,this.auth=e,this.fb=s,this.productosService=r,this.showErrorService=K,this.truequesService=H,this.comprasService=W,this.origin="all",this.tipos_productos=[],this.loading=!1,this.publicacionesToShow=[],this.paginatedPublicaciones=[],this.pageSize=5,this.formFiltros=s.group({fundacion:[""],codigoPostal:[""],tipoProducto:[""]}),"/mis-publicaciones"==i.url&&(this.origin="myPublicaciones"),"/mis-compras"==i.url&&(this.origin="myCompras"),this.getTiposProductos(),this.filtrarPublicaciones()}addPublicacion(){this.auth.isUserLoggedIn?this.router.navigate(["form-publicacion"]):g().fire({title:"\xa1Necesit\xe1s una cuenta!",text:"Para poder crear una publicaci\xf3n, ten\xe9s que usar tu cuenta.",icon:"warning",confirmButtonText:"Iniciar sesi\xf3n",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(({isConfirmed:i})=>{i&&this.router.navigate(["login"])})}getTiposProductos(){this.productosService.getTiposProductos().subscribe({next:i=>{this.tipos_productos=i},error:i=>{console.error("error",i)}})}filtrarPublicaciones(){if("all"==this.origin){this.filtros={};const i=this.formFiltros.controls.codigoPostal.value,e=this.formFiltros.controls.tipoProducto.value;i&&(this.filtros.codigoPostal=i),e&&(this.filtros.tipoProducto=e),this.truequesService.getPublicaciones(this.filtros).subscribe({next:s=>{console.log(s),this.publicacionesToShow=s,this.publicacionesToShow.map(r=>{r.parsedImagenes=r.imagenes.split("|")}),this.paginatedPublicaciones=this.publicacionesToShow.slice(0,this.pageSize)}})}else"myPublicaciones"==this.origin?this.truequesService.getMisPublicaciones().subscribe({next:i=>{console.log(i),this.publicacionesToShow=i,this.publicacionesToShow.map(e=>{e.parsedImagenes=e.imagenes.split("|")}),this.paginatedPublicaciones=this.publicacionesToShow.slice(0,this.pageSize)}}):this.comprasService.getMyCompras().subscribe({next:i=>{console.log(i),this.publicacionesToShow=i,this.publicacionesToShow.map(e=>{e.parsedImagenes=e.imagenes.split("|")})}})}limpiarFiltros(){this.formFiltros.reset(),this.filtrarPublicaciones()}changePage(i){const e=i.pageIndex*i.pageSize;this.paginatedPublicaciones=this.publicacionesToShow.slice(e,e+i.pageSize)}}return t.\u0275fac=function(i){return new(i||t)(o.Y36(u.F0),o.Y36(f.e),o.Y36(a.qu),o.Y36(h.k),o.Y36(P.x),o.Y36(C.x),o.Y36(x))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-trueque"]],viewQuery:function(i,e){if(1&i&&o.Gf(p.NW,5),2&i){let s;o.iGM(s=o.CRH())&&(e.paginator=s.first)}},decls:10,vars:4,consts:[[3,"title"],["id","main-publicaciones",1,"app-main-div"],[1,"row"],["id","form-filtros",3,"formGroup",4,"ngIf"],[3,"loading"],["class","row",4,"ngIf"],[1,"floating-button-container"],["mat-fab","","color","primary","aria-label","Agregar Publicaci\xf3n","matTooltip","Agregar Publicaci\xf3n","matTooltipPosition","before",3,"click"],["id","form-filtros",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","codigoPostal","type","number"],["formControlName","tipoProducto","panelClass","example-panel"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center"],["mat-fab","","extended","","color","primary",3,"click"],["mat-fab","","extended","",2,"background-color","white",3,"click"],[3,"value"],["style","text-align: center;",4,"ngIf"],[3,"publicacionesToShow"],[2,"border-radius","15px",3,"pageSizeOptions","pageSize","showFirstLastButtons","length","page"],["paginator",""]],template:function(i,e){1&i&&(o._UZ(0,"app-header",0),o.TgZ(1,"div",1)(2,"div",2),o.YNc(3,B,15,2,"form",3),o.qZA(),o._UZ(4,"app-spinner",4),o.YNc(5,z,6,7,"div",5),o.TgZ(6,"div",6)(7,"button",7),o.NdJ("click",function(){return e.addPublicacion()}),o.TgZ(8,"mat-icon"),o._uU(9,"add"),o.qZA()()()()),2&i&&(o.Q6J("title","all"==e.origin?"Publicaciones":"myPublicaciones"==e.origin?"Mis Publicaciones":"Mis Compras"),o.xp6(3),o.Q6J("ngIf","all"==e.origin),o.xp6(1),o.Q6J("loading",e.loading),o.xp6(1),o.Q6J("ngIf",!e.loading))},dependencies:[l.sg,l.O5,b.KE,b.hX,S.Hw,O.Nt,I.cs,Z.gD,y.ey,p.NW,F.gM,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,A.G,E.O,J.G],styles:["#main-publicaciones[_ngcontent-%COMP%]{padding:2%}#main-publicaciones[_ngcontent-%COMP%]   #form-filtros[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 2fr;justify-items:center;align-items:baseline}#main-publicaciones[_ngcontent-%COMP%]   #form-filtros[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{max-width:100%;padding:5px}#main-publicaciones[_ngcontent-%COMP%]   #form-filtros[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:2px}#main-publicaciones[_ngcontent-%COMP%]   .floating-button-container[_ngcontent-%COMP%]{position:fixed;right:25px;bottom:40px}@media (min-width: 577px) and (max-width: 768px){#form-filtros[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr!important}}@media (min-width: 0px) and (max-width: 576px){#form-filtros[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}"]}),t})()}];let _=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[u.Bz.forChild(R),u.Bz]}),t})();var D=n(4766),L=n(3148),Y=n(9499),Q=n(4466);let G=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[l.ez,_,D.q,L.IJ,Y.O,Q.m]}),t})()}}]);