"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[706],{1706:(y,r,c)=>{c.r(r),c.d(r,{DonacionesModule:()=>Z});var l=c(4755),g=c(1531),u=c(8988),C=c(8088),h=c(5226),m=c.n(h),n=c(2223),f=c(5580),v=c(8628),x=c(4377),D=c(3073),M=c(430),O=c(1728),s=c(3148),A=c(7876),T=c(9229);function b(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"div",14)(1,"button",15),n.NdJ("click",function(){n.CHM(e);const a=n.oxw();return n.KtG(a.selectDonaciones())}),n._uU(2," SELECCIONAR DONACIONES PARA ENVIAR "),n.qZA(),n.TgZ(3,"button",16),n.NdJ("click",function(){n.CHM(e);const a=n.oxw();return n.KtG(a.cancelSelect())}),n._uU(4," CANCELAR "),n.qZA(),n.TgZ(5,"button",17),n.NdJ("click",function(){n.CHM(e);const a=n.oxw();return n.KtG(a.confirmSelectedCards())}),n._uU(6," CONFIRMAR SELECCI\xd3N "),n.qZA()()}if(2&t){const e=n.oxw();n.xp6(1),n.Q6J("disabled",e.selectingMode),n.xp6(2),n.Q6J("disabled",!e.selectingMode),n.xp6(2),n.Q6J("disabled",!e.selectingMode)}}function P(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"div")(1,"app-deck",18),n.NdJ("statusChanged",function(){n.CHM(e);const a=n.oxw();return n.KtG(a.getDonaciones())})("cardSelected",function(a){n.CHM(e);const d=n.oxw();return n.KtG(d.selectCard(a))})("cardUnselected",function(a){n.CHM(e);const d=n.oxw();return n.KtG(d.unselectCard(a))}),n.qZA()()}if(2&t){const e=n.oxw();n.xp6(1),n.Q6J("cardList",e.donacionesCardList)}}function S(t,i){1&t&&(n.TgZ(0,"div",19),n._uU(1," No hay ninguna donaci\xf3n para mostrar! "),n.qZA())}const _=[{path:"",component:(()=>{class t{constructor(e,o,a,d){this.dialog=e,this.donacionesService=o,this.auth=a,this.showErrorService=d,this.donaciones=[],this.donacionesCardList=[],this.loading=!1,this.selectingMode=!1,this.selectedCards=[],this.getDonaciones()}getDonaciones(){this.loading=!0,this.donaciones.splice(0),this.donacionesService.getMisDonaciones().subscribe({next:e=>{e?(this.donaciones=e,this.donaciones.map(o=>{o.idDonacion&&(o.last_status=o.estado),o.imagenes&&(o.parsedImagenes=o.imagenes.split("|"))})):this.showErrorService.show("Error!","No se encontr\xf3 la informaci\xf3n de tus donaciones. Intent\xe1 nuevamente m\xe1s tarde.")},error:e=>{console.log(e),this.loading=!1},complete:()=>this.generateCardList()})}generateCardList(){this.donacionesCardList.splice(0);const e=[];for(const o of this.donaciones){let a="";for(const[w,p]of o.caracteristicaDonacion.entries())0==w?a=p.caracteristica:a+=" - "+p.caracteristica;e.push({id:o.idDonacion,imagen:o.parsedImagenes?o.parsedImagenes[0]:"no_image",titulo:o.descripcion,valorPrincipal:`${o.cantidadDonacion} unidades de ${o.producto.descripcion}`,valorSecundario:a,fecha:o.fechaDonacion,usuario:{imagen:o.producto.colectaDTO.fundacionDTO.usuarioDTO.avatar,nombre:o.producto.colectaDTO.fundacionDTO.nombre,puntaje:o.producto.colectaDTO.fundacionDTO.puntaje,localidad:o.producto.colectaDTO.fundacionDTO.direcciones[0].localidad},action:"detail",buttons:[{name:"CANCELAR",icon:"close",color:"warn",status:"CANCELADA"}],estado:o.estadoDonacion,idAuxiliar:o.producto.colectaDTO.idColecta}),this.loading=!1}this.donacionesCardList=e}selectDonaciones(){m().fire({title:"Configur\xe1 tu env\xedo!",text:"Seleccion\xe1 las tarjetas de tus donaciones haciendo click en ellas, vas a ver que las que seleccionen se pintar\xe1n. Record\xe1 que solo pod\xe9s seleccionar donaciones a una misma fundaci\xf3n. Una vez que termines, clicke\xe1 el bot\xf3n CONFIRMAR SELECCI\xd3N.",icon:"info",confirmButtonText:"\xa1VAMOS!"});const e=this.donacionesCardList;e.map(o=>{o.action="select",o.codigo="Donaci\xf3n"}),this.donacionesCardList=e,this.selectingMode=!0}selectCard(e){this.donacionesCardList.map(o=>{o.id==e&&(o.isSelected=!0)}),this.selectedCards.push(e)}unselectCard(e){this.donacionesCardList.map(a=>{a.id==e&&(a.isSelected=!1)});const o=this.selectedCards.filter(a=>a==e);this.selectedCards=o}cancelSelect(){this.selectedCards=[],this.selectingMode=!1}confirmSelectedCards(){this.dialog.open(u.o,{maxWidth:"60vw",maxHeight:"60vh",width:"100%",panelClass:"full-screen-modal",data:{cards:this.selectedCards}})}zoomImage(e){m().fire({html:`<img src="${e}" style="width: 100%"/>`,showConfirmButton:!1,showCloseButton:!0})}openDialog(){this.dialog.open(C.G,{maxWidth:"70vw",maxHeight:"60vh",height:"100%",width:"100%",panelClass:"full-screen-modal"})}getImage(e){return this.donacionesService.getImagen(e)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(f.uw),n.Y36(v.M),n.Y36(x.e),n.Y36(D.x))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-donaciones"]],decls:18,vars:3,consts:[["title","Mis Donaciones"],["id","main-donaciones",1,"app-main-div"],[1,"dense-3"],["ngbAccordion",""],["accordion","ngbAccordion"],["ngbAccordionItem","first",3,"collapsed"],["first","ngbAccordionItem"],["ngbAccordionHeader",""],["ngbAccordionButton","",1,"bg-transparent","accordion-header-button"],[2,"margin-left","10px"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[4,"ngIf"],["style","margin: 10%; text-align: center;",4,"ngIf"],[1,"buttons"],["mat-fab","","extended","",2,"background-color","var(--info)","height","fit-content",3,"disabled","click"],["mat-fab","","extended","",2,"background-color","var(--light-grey)",3,"disabled","click"],["mat-fab","","extended","",2,"background-color","var(--info)",3,"disabled","click"],["app","donaciones",3,"cardList","statusChanged","cardSelected","cardUnselected"],[2,"margin","10%","text-align","center"]],template:function(e,o){1&e&&(n._UZ(0,"app-header",0),n.TgZ(1,"div",1)(2,"div",2)(3,"div",3,4)(5,"div",5,6)(7,"h2",7)(8,"button",8)(9,"mat-icon"),n._uU(10,"local_shipping"),n.qZA(),n.TgZ(11,"span",9),n._uU(12,"Env\xedo"),n.qZA()()(),n.TgZ(13,"div",10)(14,"div",11),n.YNc(15,b,7,3,"ng-template"),n.qZA()()()()(),n.YNc(16,P,2,1,"div",12),n.YNc(17,S,2,0,"div",13),n.qZA()),2&e&&(n.xp6(5),n.Q6J("collapsed",!1),n.xp6(11),n.Q6J("ngIf",o.donacionesCardList.length>0),n.xp6(1),n.Q6J("ngIf",0==o.donacionesCardList.length))},dependencies:[l.O5,M.Hw,O.cs,s.fD,s.QQ,s.VE,s.I,s.fA,s.ud,A.G,T.o],styles:["#main-donaciones[_ngcontent-%COMP%]{padding:2%;display:grid;grid-template-columns:1fr 5fr;gap:20px}#main-donaciones[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{min-width:210px;display:flex;flex-direction:column;align-items:center;gap:15px}.donacion-example-header-image[_ngcontent-%COMP%]{background-image:url(perfiles-24.8b8b387b71873795.jpg);background-size:cover}.donacion-card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1fr;gap:1rem;padding:16px}.donacion-card-content[_ngcontent-%COMP%]   .donacion-aceptada[_ngcontent-%COMP%]{font-weight:700;color:var(--success)}.donacion-card-content[_ngcontent-%COMP%]   .donacion-rechazada[_ngcontent-%COMP%]{font-weight:700;color:var(--warn)}.donacion-card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:65px;margin:5px}.donacion-card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer}.donacion-card-content[_ngcontent-%COMP%]   .donacion-status[_ngcontent-%COMP%]{display:flex;align-items:center}.donacion-card-content[_ngcontent-%COMP%]   .donacion-status[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:5px}@media (min-width: 0px) and (max-width: 768px){#main-donaciones[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}"]}),t})()}];let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[g.Bz.forChild(_),g.Bz]}),t})();var L=c(9433),N=c(9499),E=c(4466);let Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[l.ez,I,L.q,s.IJ,N.O,E.m]}),t})()}}]);