"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[926],{9499:(A,b,a)=>{a.d(b,{O:()=>c});var n=a(4755),t=a(9433),h=a(9401),T=a(3148),m=a(4466),f=a(2223);let c=(()=>{class u{}return u.\u0275fac=function(C){return new(C||u)},u.\u0275mod=f.oAB({type:u}),u.\u0275inj=f.cJS({imports:[n.ez,t.q,T.IJ,h.u5,h.UX,m.m]}),u})()},6262:(A,b,a)=>{a.d(b,{r:()=>J});var n=a(2223),t=a(5580),h=a(5226),T=a.n(h),m=a(2777),f=a(4755),c=a(1728),u=a(6012),o=a(3148),C=a(9515);function l(s,v){if(1&s&&(n.TgZ(0,"a",20),n._uU(1),n.qZA()),2&s){const i=n.oxw(2);n.Q6J("href","/perfil/"+i.publicacion.particularDTO.usuarioDTO.idUsuario,n.LSH),n.xp6(1),n.AsE(" ",i.publicacion.particularDTO.nombre," ",i.publicacion.particularDTO.apellido," ")}}function _(s,v){if(1&s&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&s){const i=n.oxw(2);n.xp6(1),n.AsE("",i.publicacion.particularDTO.nombre," ",i.publicacion.particularDTO.apellido,"")}}function P(s,v){if(1&s&&(n.TgZ(0,"div"),n._uU(1),n.qZA()),2&s){const i=n.oxw(2);n.xp6(1),n.hij(" ",i.publicacion.particularDTO.direcciones[0].localidad,"")}}function E(s,v){if(1&s&&(n.TgZ(0,"div",24),n._UZ(1,"img",25),n.qZA(),n._UZ(2,"div",26)),2&s){const i=n.oxw().$implicit,O=n.oxw(3);n.xp6(1),n.Q6J("src",O.getImage(i),n.LSH)}}function y(s,v){1&s&&n.YNc(0,E,3,1,"ng-template",23)}function k(s,v){if(1&s&&(n.TgZ(0,"ngb-carousel",21),n.YNc(1,y,1,0,null,22),n.qZA()),2&s){const i=n.oxw(2);n.Q6J("showNavigationArrows",i.publicacion.parsedImagenes.length>1)("showNavigationIndicators",i.publicacion.parsedImagenes.length>1),n.xp6(1),n.Q6J("ngForOf",i.publicacion.parsedImagenes)}}function L(s,v){if(1&s&&(n.TgZ(0,"div",27),n._uU(1),n.qZA()),2&s){const i=n.oxw(2);n.xp6(1),n.hij(" Precio de venta: $",i.publicacion.precioVenta," ")}}function U(s,v){if(1&s&&(n.TgZ(0,"div",30),n._uU(1),n.qZA()),2&s){const i=v.$implicit;n.xp6(1),n.hij(" ",i.caracteristica," ")}}function R(s,v){if(1&s&&(n.TgZ(0,"div",28)(1,"b"),n._uU(2,"Caracter\xedsticas:"),n.qZA(),n.YNc(3,U,2,1,"div",29),n.qZA()),2&s){const i=n.oxw(2);n.xp6(3),n.Q6J("ngForOf",i.publicacion.caracteristicaProducto)}}function B(s,v){if(1&s){const i=n.EpF();n.TgZ(0,"button",34),n.NdJ("click",function(){n.CHM(i);const w=n.oxw(3);return n.KtG(w.comprar())}),n._UZ(1,"img",35),n._uU(2," QUIERO COMPRAR "),n.qZA()}}function N(s,v){if(1&s){const i=n.EpF();n.TgZ(0,"mat-card-actions",31)(1,"button",32),n.NdJ("click",function(){n.CHM(i);const w=n.oxw(2);return n.KtG(w.intercambiar())}),n._uU(2,"QUIERO INTERCAMBIAR"),n.qZA(),n.YNc(3,B,3,0,"button",33),n.qZA()}if(2&s){const i=n.oxw(2);n.xp6(3),n.Q6J("ngIf","VENTA_Y_TRUEQUE"==i.publicacion.tipoPublicacion&&i.publicacion.particularDTO.accessToken&&i.publicacion.particularDTO.publicKey)}}function q(s,v){if(1&s&&(n.TgZ(0,"mat-card",1)(1,"mat-card-header",2)(2,"div",3)(3,"div",4),n._UZ(4,"div",5),n.TgZ(5,"div")(6,"mat-card-title",6),n.YNc(7,l,2,3,"a",7),n.YNc(8,_,2,2,"span",8),n.qZA(),n.TgZ(9,"mat-card-subtitle"),n._UZ(10,"app-rating",9),n.qZA()()(),n.TgZ(11,"div",10)(12,"div"),n._uU(13),n.ALo(14,"date"),n.qZA(),n.YNc(15,P,2,1,"div",8),n.qZA()()(),n.TgZ(16,"mat-card-content",11)(17,"div",12),n.YNc(18,k,2,3,"ngb-carousel",13),n.qZA(),n.TgZ(19,"div")(20,"h2",14),n._uU(21),n.qZA(),n.TgZ(22,"div",15),n._uU(23),n.qZA(),n.TgZ(24,"div",16),n._uU(25),n.qZA(),n.YNc(26,L,2,1,"div",17),n.YNc(27,R,4,1,"div",18),n.qZA()(),n.YNc(28,N,4,1,"mat-card-actions",19),n.qZA()),2&s){const i=n.oxw();n.xp6(7),n.Q6J("ngIf",i.userData.isLoggedIn),n.xp6(1),n.Q6J("ngIf",!i.userData.isLoggedIn),n.xp6(2),n.Q6J("puntuacion",i.publicacion.particularDTO.puntaje)("remSize",1.2),n.xp6(3),n.Oqu(n.xi3(14,14,i.publicacion.fechaPublicacion,"dd/MM/yyyy")),n.xp6(2),n.Q6J("ngIf",i.publicacion.particularDTO.direcciones.length>0),n.xp6(3),n.Q6J("ngIf",i.publicacion.parsedImagenes&&i.publicacion.parsedImagenes.length>0),n.xp6(3),n.Oqu(i.publicacion.titulo),n.xp6(2),n.hij(" ",i.publicacion.descripcion," "),n.xp6(2),n.AsE(" Valor de trueque: $",i.publicacion.valorTruequeMin," - $",i.publicacion.valorTruequeMax," "),n.xp6(1),n.Q6J("ngIf","VENTA_Y_TRUEQUE"==i.publicacion.tipoPublicacion),n.xp6(1),n.Q6J("ngIf",i.publicacion.caracteristicaProducto.length>0),n.xp6(1),n.Q6J("ngIf","publicacionOrigen"!=i.userType&&"ABIERTA"==i.publicacion.estadoPublicacion)}}let J=(()=>{class s{constructor(i,O){this.truequeService=i,this.data=O,this.userType="notLoggedIn",this.intercambiarEvent=new n.vpe,this.comprarEvent=new n.vpe,console.log(this.publicacion,O),O&&(this.publicacion=O.publicacion,this.userData=O.userData,this.userType=O.userType)}getImage(i){return this.truequeService.getImagen(i)}zoomImage(i){i&&T().fire({html:`<img src="${this.getImage(i)}" style="width: 100%"/>`,showConfirmButton:!1,showCloseButton:!0})}intercambiar(){this.intercambiarEvent.emit()}comprar(){this.comprarEvent.emit()}}return s.\u0275fac=function(i){return new(i||s)(n.Y36(m.x),n.Y36(t.WI,8))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-main-card-publicacion"]],inputs:{publicacion:"publicacion",userData:"userData",userType:"userType"},outputs:{intercambiarEvent:"intercambiarEvent",comprarEvent:"comprarEvent"},decls:1,vars:1,consts:[["class","main-card",4,"ngIf"],[1,"main-card"],[2,"border-bottom","solid 1px var(--light-grey)","padding-bottom","10px"],[1,"div-header"],[1,"header-info"],["mat-card-avatar","",1,"example-header-image"],[2,"display","flex","align-items","center"],[3,"href",4,"ngIf"],[4,"ngIf"],["color","var(--trueques-dark)",3,"puntuacion","remSize"],[1,"div-fecha-zona"],[1,"card-content"],[2,"width","60%","margin","0 auto"],[3,"showNavigationArrows","showNavigationIndicators",4,"ngIf"],[1,"card-title"],[1,"descripcion"],[1,"trueque"],["class","venta",4,"ngIf"],["class","caracteristicas",4,"ngIf"],["class","card-button",4,"ngIf"],[3,"href"],[3,"showNavigationArrows","showNavigationIndicators"],[4,"ngFor","ngForOf"],["ngbSlide",""],[1,"picsum-img-wrapper"],[2,"width","100%","height","100%","object-fit","contain",3,"src"],[1,"carousel-caption"],[1,"venta"],[1,"caracteristicas"],["class","producto",4,"ngFor","ngForOf"],[1,"producto"],[1,"card-button"],["mat-fab","","extended","","color","primary",3,"click"],["mat-fab","","extended","","style","background-color: #3fb6e9; color: white;",3,"click",4,"ngIf"],["mat-fab","","extended","",2,"background-color","#3fb6e9","color","white",3,"click"],["src","assets/redes/mercadopago.png",2,"width","40px"]],template:function(i,O){1&i&&n.YNc(0,q,29,17,"mat-card",0),2&i&&n.Q6J("ngIf",O.publicacion)},dependencies:[f.sg,f.O5,c.cs,u.a8,u.hq,u.kc,u.dn,u.dk,u.$j,u.n5,o.uo,o.xl,C.A,f.uU],styles:[".example-header-image[_ngcontent-%COMP%]{background-image:url(perfiles-17.f67e69cf999cd190.jpg);background-size:cover;margin:0 10px 0 0;width:60px;height:60px}mat-card[_ngcontent-%COMP%]{border-radius:15px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{margin:10px}mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:20px!important}mat-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{max-width:100%}.div-header[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;align-items:flex-end;flex-wrap:wrap}.div-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{display:flex;align-items:center}.div-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-wrap:balance}.card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;margin:5px;border-radius:5px;box-shadow:2px 2px 5px var(--dark-grey)}.card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer}.card-content[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]{font-weight:500;font-size:16px;margin-bottom:15px}.card-content[_ngcontent-%COMP%]   .trueque[_ngcontent-%COMP%], .card-content[_ngcontent-%COMP%]   .venta[_ngcontent-%COMP%]{font-size:16px}.card-content[_ngcontent-%COMP%]   .caracteristicas[_ngcontent-%COMP%]{margin-top:20px}.card-button[_ngcontent-%COMP%]{align-self:center}@media (min-width: 0px) and (max-width: 800px){.div-fecha-zona[_ngcontent-%COMP%]{display:flex;gap:10%;width:100%;justify-content:space-around}.header-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{max-width:80%}}@media (min-width: 801px){.div-fecha-zona[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center;align-items:flex-end}.header-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{max-width:420px}}"]}),s})()},8628:(A,b,a)=>{a.d(b,{M:()=>f});var n=a(2340),t=a(2223),h=a(5500);const T=n.N.apiUrl+"8080/",m="URImsUsuarios";let f=(()=>{class c{constructor(o){this.backendService=o}crearColecta(o){return this.backendService.post(m,"api/colecta",o)}getAllColectas(o){return this.backendService.get(m,"api/colectas",o)}getMisColectas(){return this.backendService.get(m,"api/misColectas")}getColecta(o){return this.backendService.get(m,"api/colecta/"+o)}getDonacionesColecta(o){return this.backendService.get(m,"api/colecta/"+o+"/donaciones")}getMisDonaciones(){return this.backendService.get(m,"api/particular/misDonaciones")}crearDonacion(o,C){return this.backendService.post(m,"api/colecta/"+o+"/crearDonacion",C)}getImagen(o){return`${T}api/getImage/${o}`}cambiarEstadoDonacion(o,C,l){return this.backendService.put(m,"api/colecta/"+o+"/donaciones/"+C,l)}}return c.\u0275fac=function(o){return new(o||c)(t.LFG(h.k))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},2777:(A,b,a)=>{a.d(b,{x:()=>T});var n=a(2223),t=a(5500);const h="URImsUsuarios";let T=(()=>{class m{constructor(c){this.backendService=c}crearPublicacion(c){return this.backendService.post(h,"api/publicacion",c)}getPublicaciones(c={}){return this.backendService.get(h,"api/publicaciones",c)}getMisPublicaciones(){return this.backendService.get(h,"api/misPublicaciones")}getPublicacion(c){return this.backendService.get(h,"api/publicacion/"+c)}getImagen(c){return this.backendService.getUrlByName(h)+"api/getImage/"+c}crearTrueque(c,u){return this.backendService.post(h,"api/trueque",{idPublicacionOrigen:c,idPublicacionPropuesta:u})}getTruequesFromPublicacion(c){return this.backendService.get(h,`api/publicacion/${c}/trueques`)}getPropuestasFromPublicacion(c){return this.backendService.get(h,`api/publicacion/${c}/propuestas`)}getMisPublicacionesForTrueque(c){return this.backendService.get(h,`api/${c}/publicaciones`)}cambiarEstadoTrueque(c,u){return this.backendService.put(h,`api/trueque/${c}`,{nuevoEstado:u})}getTruequesParticular(c){return this.backendService.get(h,`api/trueques/particular/${c}`)}}return m.\u0275fac=function(c){return new(c||m)(n.LFG(t.k))},m.\u0275prov=n.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},7833:(A,b,a)=>{a.d(b,{A:()=>W});var n=a(5861),t=a(2223),h=a(6262),T=a(5226),m=a.n(T),f=a(5580),c=a(2777),u=a(1531),o=a(430),C=a(1330),l=a(3276),_=a(4755);const P=function(r,x){return{"even-row":r,"odd-row":x}};function E(r,x){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-list-item",4),t.NdJ("mouseenter",function(){const g=t.CHM(e).$implicit,M=t.oxw(2);return t.KtG(M.hoveredItem=g)})("mouseleave",function(){t.CHM(e);const p=t.oxw(2);return t.KtG(p.hoveredItem=null)})("click",function(p){return p.stopPropagation()}),t._UZ(2,"img",5),t.TgZ(3,"div",6)(4,"div")(5,"h4"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA()(),t.TgZ(9,"div",7)(10,"span",8),t._uU(11),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"div")(14,"mat-icon",9),t.NdJ("click",function(){const g=t.CHM(e).$implicit,M=t.oxw(2);return t.KtG(M.access(g))}),t._uU(15,"open_in_new"),t.qZA()()()(),t.BQk()}if(2&r){const e=x.$implicit,d=x.even,p=x.odd,g=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(8,P,d,p)),t.xp6(1),t.Q6J("src",e.img,t.LSH),t.xp6(4),t.Oqu(e.title),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Udp("color",g.colorMap[e.estado]||"var(--warn)"),t.xp6(1),t.hij(" ",g.iconMap[e.estado]||"dangerous"," "),t.xp6(1),t.hij(" ",e.estado," ")}}function y(r,x){if(1&r&&(t.TgZ(0,"mat-nav-list"),t.YNc(1,E,16,11,"ng-container",3),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.paginatedList)}}function k(r,x){if(1&r){const e=t.EpF();t.TgZ(0,"mat-paginator",10,11),t.NdJ("page",function(p){t.CHM(e);const g=t.oxw();return t.KtG(g.changePage(p))}),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("hidePageSize",!0)("pageSize",e.pageSize)("showFirstLastButtons",!0)("length",e.list.length)}}function L(r,x){1&r&&(t.TgZ(0,"div",12),t._uU(1," Todav\xeda no propusiste esta publicaci\xf3n en ning\xfan trueque!\n"),t.qZA())}let U=(()=>{class r{constructor(e,d,p,g){this.dialogRef=e,this.data=d,this.truequesService=p,this.router=g,this.list=[],this.paginatedList=[],this.pageSize=10,this.iconMap={APROBADO:"verified",APROBADA:"verified",RECIBIDO:"add_task",RECIBIDA:"add_task",PENDIENTE:"pending",ABIERTA:"lock_open",CERRADA:"lock"},this.colorMap={APROBADO:"var(--success)",APROBADA:"var(--success)",RECIBIDO:"var(--success)",RECIBIDA:"var(--success)",PENDIENTE:"purple",ABIERTA:"var(--success)"}}ngOnInit(){console.log(this.data),this.data.action&&"list"==this.data.action&&this.getPropuestas(this.data.id),this.paginatedList=this.list.slice(0,this.pageSize)}changePage(e){const d=e.pageIndex*e.pageSize;this.paginatedList=this.list.slice(d,d+e.pageSize)}getPropuestas(e){this.truequesService.getPropuestasFromPublicacion(e).subscribe({next:d=>{console.log(d);const p=d||[];console.log(p);for(const g of p)this.list.push({id:g.publicacionDTOorigen.idPublicacion,title:g.publicacionDTOorigen.titulo,description:g.publicacionDTOorigen.descripcion,img:this.getImagen(g.publicacionDTOorigen.imagenes.split("|")[0]),estado:g.estadoTrueque});this.paginatedList=this.list.slice(0,this.pageSize)}})}access(e){console.log("access",e),this.dialogRef.close(),this.router.navigate(["publicacion/"+e.id])}getImagen(e){return this.truequesService.getImagen(e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.so),t.Y36(f.WI),t.Y36(c.x),t.Y36(u.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-list"]],inputs:{list:"list"},decls:3,vars:3,consts:[[4,"ngIf"],["style","border-radius: 15px;",3,"hidePageSize","pageSize","showFirstLastButtons","length","page",4,"ngIf"],["style","padding: 10%; text-align: center;",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass","mouseenter","mouseleave","click"],["matListItemIcon","",1,"item-img",3,"src"],[1,"item-content"],[2,"display","flex","gap","10px"],[1,"material-icons-outlined","result-icon"],[2,"cursor","pointer",3,"click"],[2,"border-radius","15px",3,"hidePageSize","pageSize","showFirstLastButtons","length","page"],["paginator",""],[2,"padding","10%","text-align","center"]],template:function(e,d){1&e&&(t.YNc(0,y,2,1,"mat-nav-list",0),t.YNc(1,k,2,4,"mat-paginator",1),t.YNc(2,L,2,0,"div",2)),2&e&&(t.Q6J("ngIf",d.list.length>0),t.xp6(1),t.Q6J("ngIf",d.list.length>0),t.xp6(1),t.Q6J("ngIf",0==d.list.length))},dependencies:[o.Hw,C.Hk,C.Tg,C.Yt,l.NW,_.mk,_.sg,_.O5],styles:[".even-row[_ngcontent-%COMP%]{background-color:#e2e1e1}.odd-row[_ngcontent-%COMP%]{background-color:transparent}mat-list-item[_ngcontent-%COMP%]{height:-moz-fit-content!important;height:fit-content!important;padding:5px;cursor:default}mat-list-item[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}mat-list-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:5px;box-shadow:2px 2px 5px var(--dark-grey)}mat-list-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:10px}mat-list-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}mat-list-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px!important}"]}),r})();var R=a(4377),B=a(8628),N=a(1728),q=a(6996),J=a(3649),s=a(9515);function v(r,x){if(1&r&&(t.TgZ(0,"span",19),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.Q6J("ngClass",e.colorMap[e.cardData.estado]||"red")("matTooltip",e.cardData.codigo?e.cardData.codigo+" "+e.cardData.estado:"donaciones"==e.app?"Donaci\xf3n "+e.cardData.estado:"Trueque "+e.cardData.estado),t.xp6(1),t.hij(" ",e.iconMap[e.cardData.estado]||"dangerous"," ")}}function i(r,x){if(1&r&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.cardData.valorSecundario," ")}}function O(r,x){if(1&r){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(p){const M=t.CHM(e).$implicit,D=t.oxw(3);return D.changeStatus(D.cardData,M.status),t.KtG(p.stopPropagation())}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA()()}if(2&r){const e=x.$implicit,d=t.oxw(3);t.Q6J("color",e.color)("disabled","RECIBIDO"!=e.status&&"RECIBIDA"!=e.status?"PENDIENTE"!=d.cardData.estado:"APROBADO"!=d.cardData.estado&&"APROBADA"!=d.cardData.estado)("matTooltip",e.name),t.xp6(2),t.Oqu(e.icon)}}function w(r,x){if(1&r&&(t.TgZ(0,"div",21),t.YNc(1,O,3,4,"button",22),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.cardData.buttons)}}function z(r,x){if(1&r&&(t.TgZ(0,"h6"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Oqu(t.xi3(2,1,e.cardData.fecha,"dd/MM/yyyy"))}}function Q(r,x){if(1&r&&(t.TgZ(0,"h6"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Oqu(e.cardData.fechaString)}}function F(r,x){if(1&r){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("click",function(){t.CHM(e);const p=t.oxw();return t.KtG(p.clicked(p.cardData))}),t.TgZ(1,"mat-chip",2),t.NdJ("click",function(p){t.CHM(e);const g=t.oxw();return g.chipClick(g.cardData),t.KtG(p.stopPropagation())}),t.TgZ(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"div",3),t.YNc(5,v,2,3,"span",4),t.qZA(),t.TgZ(6,"div",5),t._UZ(7,"img",6),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"h3",9),t._uU(11),t.qZA(),t.TgZ(12,"div",10)(13,"h2",11),t._uU(14),t.qZA()(),t.YNc(15,i,2,1,"div",12),t.qZA()(),t.YNc(16,w,2,1,"div",13),t.TgZ(17,"div",14),t._UZ(18,"img",15),t.TgZ(19,"h4"),t._uU(20),t.TgZ(21,"div",16),t._UZ(22,"app-rating",17),t.qZA()(),t.TgZ(23,"div"),t.YNc(24,z,3,4,"h6",18),t.YNc(25,Q,2,1,"h6",18),t.qZA()()()}if(2&r){const e=t.oxw();t.ekj("selected-card",e.cardData.isSelected),t.Q6J("ngClass","publicaciones"==e.app&&0==e.cardData.buttons.length?"small":"big"),t.xp6(1),t.Akn("list"==e.cardData.action?"cursor: pointer;":""),t.Q6J("ngClass","publicaciones"==e.app?"background-verde":"background-lila"),t.xp6(2),t.hij(" ","list"==e.cardData.action?"\xbfD\xf3nde lo propuse?":"trueque"==e.cardData.action?"Trueque aprobado":e.cardData.usuario.localidad," "),t.xp6(2),t.Q6J("ngIf",e.cardData.estado),t.xp6(2),t.Q6J("src",e.getImagen(e.cardData.imagen),t.LSH),t.xp6(4),t.Oqu(e.cardData.titulo),t.xp6(2),t.Q6J("ngClass","publicaciones"==e.app?"font-verde":"font-lila"),t.xp6(1),t.Oqu(e.cardData.valorPrincipal),t.xp6(1),t.Q6J("ngIf",e.cardData.valorSecundario),t.xp6(1),t.Q6J("ngIf",e.cardData.buttons.length>0),t.xp6(1),t.Q6J("ngClass","publicaciones"==e.app?"background-verde":"background-lila"),t.xp6(1),t.Q6J("src","assets/perfiles/perfiles-"+e.cardData.usuario.imagen+".jpg",t.LSH),t.xp6(2),t.hij(" ",e.cardData.usuario.nombre," "),t.xp6(2),t.Q6J("puntuacion",e.cardData.usuario.puntaje)("color","publicaciones"==e.app?"var(--trueques-dark)":"var(--donaciones-dark)"),t.xp6(2),t.Q6J("ngIf",e.cardData.fecha),t.xp6(1),t.Q6J("ngIf",e.cardData.fechaString)}}let W=(()=>{class r{constructor(e,d,p,g,M){this.truequesService=e,this.router=d,this.dialog=p,this.auth=g,this.donacionesService=M,this.app="colectas",this.statusChanged=new t.vpe,this.cardSelected=new t.vpe,this.iconMap={APROBADO:"verified",APROBADA:"verified",RECIBIDO:"add_task",RECIBIDA:"add_task",PENDIENTE:"pending",ABIERTA:"lock_open",CERRADA:"lock"},this.colorMap={APROBADO:"green",APROBADA:"green",RECIBIDO:"green",RECIBIDA:"green",PENDIENTE:"purple",ABIERTA:"green"}}clicked(e){switch(e.action){case"select":this.cardSelected.emit(e.id),this.cardData&&(this.cardData.isSelected=!0);break;case"detail":this.showDetail(e);break;case"trueque":this.router.navigate(["publicacion/"+e.idAuxiliar]);break;default:this.router.navigate([("colectas"==this.app?"colecta/":"publicaciones"==this.app?"publicacion/":"donacion/")+e.id])}}showDetail(e){var d=this;let p,g;var M;"publicaciones"==this.app&&(p=h.r,this.truequesService.getPublicacion(e.id).subscribe({next:(M=(0,n.Z)(function*(D){g={publicacion:yield D,userData:{isLoggedIn:d.auth.isUserLoggedIn},userType:"publicacionOrigen"},g.publicacion.parsedImagenes=g.publicacion.imagenes.split("|"),d.openDialog(p,g,"80vh")}),function(S){return M.apply(this,arguments)})}))}chipClick(e){"list"==e.action&&this.openDialog(U,e)}openDialog(e,d,p="60vh"){this.dialog.open(e,{maxWidth:"80vw",maxHeight:p,height:"fit-content",width:"100%",panelClass:"full-screen-modal",data:d})}changeStatus(e,d){let p="",g="",M="",D="",S="",Z="warning";const I="publicaciones"==this.app?"propuesta de trueque":"donaci\xf3n";switch(d){case"CANCELADO":p="Confirmar Cancelaci\xf3n",g="\xbfEst\xe1s seguro/a que quer\xe9s cancelar esta "+I+"? La acci\xf3n es irreversible, pero podr\xe1s crear otra luego.",S="S\xed, cancelar",D="No, mantener",Z="warning";break;case"ACEPTADO":p="Confirmar Aprobaci\xf3n",g="Confirm\xe1 que acept\xe1s la "+I+". Esta acci\xf3n es irreversible!",M="S\xed, aceptar",D="No, cancelar",Z="warning";break;case"RECHAZADO":p="Confirmar Rechazo",g="\xbfEst\xe1s seguro/a que quer\xe9s rechazar esta "+I+"? La acci\xf3n es irreversible.",S="S\xed, rechazar",D="No, cancelar",Z="warning";break;default:p="Confirmar Acci\xf3n",g="Cambiar el estado de la "+I+" es irreversible, \xbfEst\xe1s seguro/a que quer\xe9s continuar?",M="S\xed, continuar",D="No, cancelar",Z="warning"}m().fire({title:p,text:g,showConfirmButton:""!=M,confirmButtonText:M,showDenyButton:""!=S,denyButtonText:S,showCancelButton:""!=D,cancelButtonText:D,icon:Z,reverseButtons:!0}).then(({isConfirmed:Y,isDenied:K})=>{(Y||K)&&("publicaciones"==this.app&&e.idAuxiliar?this.truequesService.cambiarEstadoTrueque(e.idAuxiliar,d).subscribe({next:j=>{m().fire("Se cambi\xf3 el estado!","Se guard\xf3 el nuevo estado de la "+I,"success").then(()=>{this.statusChanged.emit()})}}):e.idAuxiliar&&this.donacionesService.cambiarEstadoDonacion(e.idAuxiliar,e.id,{nuevoEstado:d}).subscribe({next:j=>{m().fire("Se cambi\xf3 el estado!","Se guard\xf3 el nuevo estado de la "+I,"success").then(()=>{this.statusChanged.emit()})}}))})}getImagen(e){return this.truequesService.getImagen(e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.x),t.Y36(u.F0),t.Y36(f.uw),t.Y36(R.e),t.Y36(B.M))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-card"]],inputs:{app:"app",cardData:"cardData"},outputs:{statusChanged:"statusChanged",cardSelected:"cardSelected"},decls:1,vars:1,consts:[["class","card",3,"selected-card","ngClass","click",4,"ngIf"],[1,"card",3,"ngClass","click"],[1,"chip-localidad",3,"ngClass","click"],[2,"position","absolute","top","10px","left","10px"],["class","material-icons-outlined result-icon",3,"ngClass","matTooltip",4,"ngIf"],[1,"img-div",2,"display","flex","justify-content","center"],[1,"card-img",3,"src"],[1,"card-body"],[1,"body-data"],[1,"card-title"],[1,"valor-principal"],[3,"ngClass"],["class","valor-secundario",4,"ngIf"],["class","buttons",4,"ngIf"],[1,"user-data",3,"ngClass"],[1,"user-img",3,"src"],[2,"margin","0 10px","display","flex","align-items","center","justify-content","center"],[3,"puntuacion","color"],[4,"ngIf"],[1,"material-icons-outlined","result-icon",3,"ngClass","matTooltip"],[1,"valor-secundario"],[1,"buttons"],["mat-mini-fab","","matTooltipPosition","above",3,"color","disabled","matTooltip","click",4,"ngFor","ngForOf"],["mat-mini-fab","","matTooltipPosition","above",3,"color","disabled","matTooltip","click"]],template:function(e,d){1&e&&t.YNc(0,F,26,21,"div",0),2&e&&t.Q6J("ngIf",d.cardData)},dependencies:[o.Hw,N.nh,q.HS,J.gM,_.mk,_.sg,_.O5,s.A,_.uU],styles:[".card[_ngcontent-%COMP%]{margin:5px;display:flex;flex-direction:column;align-items:center}.card.big[_ngcontent-%COMP%]{height:440px}.card.big[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px!important}.card.small[_ngcontent-%COMP%]{height:380px}.card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]:hover{cursor:pointer}.card.selected-card[_ngcontent-%COMP%]{background-color:#bceba1}.card[_ngcontent-%COMP%]   .chip-localidad[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;padding:2px;font-weight:500}.card[_ngcontent-%COMP%]   .chip-localidad.background-verde[_ngcontent-%COMP%]{background-color:var(--trueques)}.card[_ngcontent-%COMP%]   .chip-localidad.background-lila[_ngcontent-%COMP%]{background-color:var(--donaciones)}.card[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px;align-items:center;height:200px}.card[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{max-height:160px;margin:20px;width:auto;max-width:100%;box-shadow:2px 2px 5px var(--dark-grey)}.card[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]   .card-img.big[_ngcontent-%COMP%]{max-height:160px}.card[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]   .card-img.small[_ngcontent-%COMP%]{max-height:110px}.card[_ngcontent-%COMP%]   .productos[_ngcontent-%COMP%]{display:flex;max-width:180px;gap:30px;flex-wrap:wrap;justify-content:center}.card[_ngcontent-%COMP%]   .estado-publicacion[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:space-around}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin:0}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .valor-principal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700!important;margin:0}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]{text-align:center;padding:10px;display:flex;justify-content:space-around;width:100%;align-items:center;border-radius:0 0 10px 10px}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:0}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{width:30px;border-radius:50%}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px}.card[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.card[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin:10px auto}.result-icon[_ngcontent-%COMP%]{font-size:40px}.result-icon.green[_ngcontent-%COMP%]{color:var(--success)}.result-icon.red[_ngcontent-%COMP%]{color:var(--warn)}.result-icon.purple[_ngcontent-%COMP%]{color:var(--secondary-color)}@media (min-width: 0px) and (max-width: 576px){.buttons[_ngcontent-%COMP%]{width:50%!important}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:uppercase;width:100%}}.background-verde[_ngcontent-%COMP%]{background-color:#bceba1}.background-lila[_ngcontent-%COMP%]{background-color:#dcb9ef}.font-verde[_ngcontent-%COMP%]{color:var(--trueques-dark)}.font-lila[_ngcontent-%COMP%]{color:var(--donaciones-dark)}"]}),r})()},9229:(A,b,a)=>{a.d(b,{o:()=>u});var n=a(2223),t=a(3276),h=a(4755),T=a(7833);function m(o,C){if(1&o){const l=n.EpF();n.TgZ(0,"div")(1,"app-card",4),n.NdJ("statusChanged",function(P){n.CHM(l);const E=n.oxw(2);return n.KtG(E.cardStatusChanged(P))})("cardSelected",function(P){n.CHM(l);const E=n.oxw(2);return n.KtG(E.cardWasSelected(P))}),n.qZA()()}if(2&o){const l=C.$implicit,_=n.oxw(2);n.Tol(_.fullScreenWidth?"col-xs-12 col-sm-6 col-md-4":_.smallWidth?"col-lg-12 col-xl-6 col-xl-4":"col-xs-12 col-sm-6 col-md-12 col-lg-6 col-xl-4"),n.xp6(1),n.Q6J("cardData",l)("app",_.app)}}function f(o,C){if(1&o){const l=n.EpF();n.TgZ(0,"mat-paginator",5,6),n.NdJ("page",function(P){n.CHM(l);const E=n.oxw(2);return n.KtG(E.changePage(P))}),n.qZA()}if(2&o){const l=n.oxw(2);n.Q6J("hidePageSize",!0)("pageSize",l.pageSize)("showFirstLastButtons",!0)("length",l.cardList.length)}}function c(o,C){if(1&o&&(n.TgZ(0,"div",1),n.YNc(1,m,2,4,"div",2),n.YNc(2,f,2,4,"mat-paginator",3),n.qZA()),2&o){const l=n.oxw();n.xp6(1),n.Q6J("ngForOf",l.paginatedCardList),n.xp6(1),n.Q6J("ngIf",l.cardList.length>0)}}let u=(()=>{class o{constructor(){this.cardList=[],this.app="colectas",this.fullScreenWidth=!1,this.smallWidth=!1,this.statusChanged=new n.vpe,this.cardSelected=new n.vpe,this.paginatedCardList=[],this.pageSize=12}ngOnChanges(l){this.fixedPageSize&&(this.pageSize=this.fixedPageSize),this.paginatedCardList=this.cardList.slice(0,this.pageSize)}changePage(l){const _=l.pageIndex*l.pageSize;this.paginatedCardList=this.cardList.slice(_,_+l.pageSize)}cardStatusChanged(l){this.statusChanged.emit(l)}cardWasSelected(l){this.cardList.map(_=>{_!=l&&(_.isSelected=!1)}),this.cardSelected.emit(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-deck"]],viewQuery:function(l,_){if(1&l&&n.Gf(t.NW,5),2&l){let P;n.iGM(P=n.CRH())&&(_.paginator=P.first)}},inputs:{cardList:"cardList",app:"app",fullScreenWidth:"fullScreenWidth",smallWidth:"smallWidth",pageSize:"pageSize",fixedPageSize:"fixedPageSize"},outputs:{statusChanged:"statusChanged",cardSelected:"cardSelected"},features:[n.TTD],decls:1,vars:1,consts:[["class","card-deck row",4,"ngIf"],[1,"card-deck","row"],[3,"class",4,"ngFor","ngForOf"],["style","border-radius: 15px;",3,"hidePageSize","pageSize","showFirstLastButtons","length","page",4,"ngIf"],[3,"cardData","app","statusChanged","cardSelected"],[2,"border-radius","15px",3,"hidePageSize","pageSize","showFirstLastButtons","length","page"],["paginator",""]],template:function(l,_){1&l&&n.YNc(0,c,3,2,"div",0),2&l&&n.Q6J("ngIf",_.cardList.length>0)},dependencies:[t.NW,h.sg,h.O5,T.A]}),o})()},9515:(A,b,a)=>{a.d(b,{A:()=>f});var n=a(2223),t=a(4755),h=a(3148);function T(c,u){if(1&c&&n._UZ(0,"i",5),2&c){const o=n.oxw().fill;n.Udp("width",o,"%")}}function m(c,u){if(1&c&&(n.TgZ(0,"i",3),n.YNc(1,T,1,2,"i",4),n.qZA()),2&c){const o=u.fill,C=n.oxw();n.Udp("font-size",C.remSize,"rem")("color",C.color),n.xp6(1),n.Q6J("ngIf",o>0)}}let f=(()=>{class c{constructor(){this.puntuacion=3.6,this.remSize=1,this.color="var(--opiniones)"}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275cmp=n.Xpm({type:c,selectors:[["app-rating"]],inputs:{puntuacion:"puntuacion",remSize:"remSize",color:"color"},decls:4,vars:4,consts:[[1,"puntuacion"],["t",""],[3,"rate","starTemplate","readonly","max","rateChange"],[1,"bi-star"],["class","bi-star-fill filled",3,"width",4,"ngIf"],[1,"bi-star-fill","filled"]],template:function(o,C){if(1&o&&(n.TgZ(0,"div",0),n.YNc(1,m,2,5,"ng-template",null,1,n.W1O),n.TgZ(3,"ngb-rating",2),n.NdJ("rateChange",function(_){return C.puntuacion=_}),n.qZA()()),2&o){const l=n.MAs(2);n.xp6(3),n.Q6J("rate",C.puntuacion)("starTemplate",l)("readonly",!0)("max",5)}},dependencies:[t.O5,h.OC],styles:[".puntuacion[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;display:inline-block;padding-right:.1rem}.puntuacion[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{overflow:hidden;position:absolute;top:0;left:0}"]}),c})()}}]);