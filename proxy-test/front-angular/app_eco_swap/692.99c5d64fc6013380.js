"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[692],{692:(G,u,c)=>{c.r(u),c.d(u,{ColectaModule:()=>$});var m=c(4755),d=c(1531),C=c(5226),l=c.n(C),n=c(2223),_=c(4377),O=c(8628),v=c(3073),x=c(4893),M=c(5763),P=c(430),D=c(1728),r=c(6012),T=c(7876),w=c(4984),A=c(6247);function Z(o,i){if(1&o){const t=n.EpF();n.TgZ(0,"mat-icon",20),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(2);return n.KtG(a.showDireccion(a.colecta.fundacionDTO.usuario))}),n._uU(1,"place"),n.qZA()}}function I(o,i){1&o&&(n.TgZ(0,"mat-icon",21),n._uU(1,"star"),n.qZA())}function y(o,i){1&o&&(n.TgZ(0,"mat-icon",22),n._uU(1,"star"),n.qZA())}function b(o,i){if(1&o&&(n.TgZ(0,"div",23),n._uU(1),n.qZA()),2&o){const t=i.$implicit;n.xp6(1),n.AsE(" ",t.descripcion,": ",t.cantidadRecibida," ")}}function E(o,i){if(1&o){const t=n.EpF();n.TgZ(0,"button",24),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(2);return n.KtG(a.donar())}),n._uU(1,"QUIERO DONAR"),n.qZA()}}const p=function(){return[]};function S(o,i){if(1&o){const t=n.EpF();n.TgZ(0,"mat-card")(1,"mat-card-header",3)(2,"div",4)(3,"div",5),n._UZ(4,"div",6),n.TgZ(5,"div")(6,"mat-card-title",7),n._uU(7),n.YNc(8,Z,2,0,"mat-icon",8),n.qZA(),n.TgZ(9,"mat-card-subtitle"),n.YNc(10,I,2,0,"mat-icon",9),n.YNc(11,y,2,0,"mat-icon",10),n.qZA()()(),n.TgZ(12,"div",11),n._uU(13),n.qZA()()(),n.TgZ(14,"mat-card-content",12)(15,"img",13),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.zoomImage(a.colecta.imagen?a.colecta.imagen.split("/").at(-1):"assets/fundacion.png"))}),n.qZA(),n.TgZ(16,"div")(17,"h2",14),n._uU(18),n.qZA(),n.TgZ(19,"div",15),n._uU(20),n.qZA(),n.TgZ(21,"div",16)(22,"h4")(23,"u"),n._uU(24,"Productos"),n.qZA(),n._uU(25,":"),n.qZA(),n.YNc(26,b,2,2,"div",17),n.qZA()()(),n.TgZ(27,"mat-card-actions",18),n.YNc(28,E,2,0,"button",19),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(7),n.hij(" ",t.colecta.fundacionDTO.nombre," "),n.xp6(1),n.Q6J("ngIf",t.colecta.fundacionDTO.usuario),n.xp6(2),n.Q6J("ngForOf",n.DdM(10,p).constructor(t.colecta.fundacionDTO.puntaje||0)),n.xp6(1),n.Q6J("ngForOf",n.DdM(11,p).constructor(5-(t.colecta.fundacionDTO.puntaje||0))),n.xp6(2),n.Oqu(t.parseVigencia()),n.xp6(2),n.Q6J("src",t.colecta.imagen?t.colecta.imagen:"assets/fundacion.png",n.LSH),n.xp6(3),n.Oqu(t.colecta.titulo),n.xp6(2),n.hij(" ",t.colecta.descripcion," "),n.xp6(6),n.Q6J("ngForOf",t.colecta.productos),n.xp6(2),n.Q6J("ngIf",!(t.userData.isLoggedIn&&!t.userData.isSwapper))}}function U(o,i){1&o&&(n.TgZ(0,"div",11),n._uU(1,"Esta colecta no tiene donaciones a\xfan!"),n.qZA())}const F=function(o){return{name:"cancelar",icon:"close",color:"warn",status:"CANCELADA",disabled:o}},N=function(o){return[o]},J=function(o){return{name:"aceptar",icon:"check",color:"primary",status:"APROBADA",disabled:o}},q=function(o){return{name:"rechazar",icon:"close",color:"warn",status:"RECHAZADA",disabled:o}},Y=function(o){return{name:"recibida",icon:"done_all",color:"primary",status:"RECIBIDA",disabled:o}},B=function(o,i,t){return[o,i,t]};function Q(o,i){if(1&o&&n._UZ(0,"app-card-donacion",28),2&o){const t=i.$implicit,e=n.oxw(2);n.Q6J("donacion",t)("usuarioHeader",t.particularDTO)("buttons",e.userData.isSwapper?n.VKq(5,N,n.VKq(3,F,"PENDIENTE"!=t.estadoDonacion)):n.kEZ(13,B,n.VKq(7,J,"PENDIENTE"!=t.estadoDonacion),n.VKq(9,q,"PENDIENTE"!=t.estadoDonacion),n.VKq(11,Y,"APROBADA"!=t.estadoDonacion)))}}function z(o,i){if(1&o&&(n.TgZ(0,"div")(1,"h3",25),n._uU(2),n.qZA(),n.YNc(3,U,2,0,"div",26),n.YNc(4,Q,1,17,"app-card-donacion",27),n.qZA()),2&o){const t=n.oxw();n.xp6(2),n.hij(" ",t.userData.isSwapper?"Mi donaci\xf3n":"Donaciones"," "),n.xp6(1),n.Q6J("ngIf",0==t.donacionesToShow.length&&!t.loading),n.xp6(1),n.Q6J("ngForOf",t.donacionesToShow)}}const L=[{path:"",component:(()=>{class o{constructor(t,e,a,s,h,k,f){this.route=t,this.router=e,this.auth=a,this.donacionesService=s,this.showErrorService=h,this.productoService=k,this.usuarioService=f,this.id_colecta="",this.donaciones=[],this.loading=!0,this.showDonaciones=!1,this.donacionesToShow=[],this.buttonsCard=[],t.paramMap.subscribe(g=>{console.log(g),this.id_colecta=g.get("id_colecta")||"",this.id_colecta||h.show("Error!","No pudimos encontrar la informaci\xf3n de la colecta que seleccionaste, por favor volv\xe9 a intentarlo m\xe1s tarde.")}),this.userData={isSwapper:a.isUserSwapper(),isLoggedIn:a.isUserLoggedIn},this.userData&&this.userData.isLoggedIn&&f.getUserByID(a.getUserID()).subscribe({next:g=>{this.userInfo=g}})}ngOnInit(){this.getColecta()}getColecta(){this.donacionesService.getColecta(this.id_colecta).subscribe({next:t=>{t?(this.colecta=t,this.colecta.imagen=this.getImage(this.colecta.imagen),this.productoService.getProductosColecta(t.idColecta).subscribe({next:e=>{t.productos=e},error:e=>{console.log("error",e)}}),this.auth.isUserLoggedIn&&this.donacionesService.getDonacionesColecta(this.colecta.idColecta).subscribe({next:e=>{console.log(e),this.donaciones=e,this.donaciones.map(a=>{a.imagenes&&(a.parsedImagenes=a.imagenes.split("|"))}),this.userData.isSwapper?(this.donacionesToShow=this.donaciones.filter(a=>a.particularDTO.idParticular==this.userInfo.particularDTO.idParticular),this.showDonaciones=!0):this.userData&&(this.donacionesToShow=e,this.showDonaciones=!0),console.log(this.showDonaciones)},error:e=>{console.log("error",e)}}),this.loading=!1):this.showErrorService.show("Error!","No se encontr\xf3 la informaci\xf3n de la colecta que seleccionaste. Intent\xe1 nuevamente m\xe1s tarde.")},error:t=>{console.log(t)}})}donar(){this.auth.isUserLoggedIn?l().fire({title:"\xa1Est\xe1s un paso m\xe1s cerca de hacer tu donaci\xf3n!",text:"Te vamos a pedir algunos datos de lo que vas a donar. Es importante que completes la informaci\xf3n requerida para que la fundaci\xf3n conozca lo que vas a donar.",icon:"info",confirmButtonText:"\xa1VAMOS!"}).then(({isConfirmed:t})=>{t&&this.router.navigate(["donacion/"+this.id_colecta])}):l().fire({title:"\xa1Necesit\xe1s una cuenta!",text:"Para poder donar, ten\xe9s que usar tu cuenta.",icon:"warning",confirmButtonText:"Iniciar sesi\xf3n",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(({isConfirmed:t})=>{t&&this.router.navigate(["login"])})}zoomImage(t){t&&l().fire({html:`<img src="${this.getImage(t)}" style="width: 100%"/>`,showConfirmButton:!1,showCloseButton:!0})}showDireccion(t){let e="";for(const s of t.direcciones)s.direccion&&(e+=s.direccion+" "+s.altura);const a=e.split(" ");l().fire({title:"Informaci\xf3n de la fundaci\xf3n",text:e+" https://www.google.com/maps/search/?api=1&query="+a[0]+"+"+a[1],html:`\n\t\t\t<p style="font-weight: 400;"><b>Email: </b>${t.email}</p>\n\t\t\t<p style="font-weight: 500;"><b>Direcci\xf3n: </b>${e}</p>\n\t\t\t<a href="https://www.google.com/maps/search/?api=1&query=${a[0]}+${a[1]}" target="_blank">Ver en Google Maps</a>`,icon:"info"})}getImage(t){return this.donacionesService.getImagen(t)}isArray(t){return t.constructor===Array}parseVigencia(){return this.colecta.fechaInicio&&this.colecta.fechaFin?"Desde el "+new Date(this.colecta.fechaInicio).toLocaleDateString()+" hasta el "+new Date(this.colecta.fechaFin).toLocaleDateString():this.colecta.fechaInicio?"A partir del "+new Date(this.colecta.fechaInicio).toLocaleDateString():""}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(d.gz),n.Y36(d.F0),n.Y36(_.e),n.Y36(O.M),n.Y36(v.x),n.Y36(x.k),n.Y36(M.i))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-colecta"]],decls:5,vars:3,consts:[["id","main-colecta"],[3,"loading"],[4,"ngIf"],[2,"border-bottom","solid 1px var(--light-grey)","padding-bottom","10px"],[1,"div-header"],[1,"header-info"],["mat-card-avatar","",1,"example-header-image"],[2,"display","flex","align-items","center"],["class","address",3,"click",4,"ngIf"],["color","primary",4,"ngFor","ngForOf"],["class","empty-star",4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"card-content"],["mat-card-image","",1,"colecta-img",3,"src","click"],[1,"card-title"],[1,"descripcion"],[1,"productos"],["class","producto",4,"ngFor","ngForOf"],[1,"card-button"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"address",3,"click"],["color","primary"],[1,"empty-star"],[1,"producto"],["mat-raised-button","","color","primary",3,"click"],[2,"margin","20px 0 0 5px","font-weight","bold"],["style","text-align: center;",4,"ngIf"],[3,"donacion","usuarioHeader","buttons",4,"ngFor","ngForOf"],[3,"donacion","usuarioHeader","buttons"]],template:function(t,e){1&t&&(n._UZ(0,"app-header"),n.TgZ(1,"div",0),n._UZ(2,"app-spinner",1),n.YNc(3,S,29,12,"mat-card",2),n.YNc(4,z,5,3,"div",2),n.qZA()),2&t&&(n.xp6(2),n.Q6J("loading",e.loading),n.xp6(1),n.Q6J("ngIf",!e.loading&&e.colecta&&e.colecta.fundacionDTO),n.xp6(1),n.Q6J("ngIf",e.showDonaciones&&!e.loading))},dependencies:[m.sg,m.O5,P.Hw,D.lW,r.a8,r.hq,r.kc,r.dn,r.dk,r.G2,r.$j,r.n5,T.G,w.O,A._],styles:["#main-colecta[_ngcontent-%COMP%]{padding:2%}#main-colecta[_ngcontent-%COMP%]   .example-header-image[_ngcontent-%COMP%]{background-image:url(fundacion.83cbf2a177069f0a.png);background-size:cover;margin:0 10px 0 0}#main-colecta[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], #main-colecta[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], #main-colecta[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{margin:10px}#main-colecta[_ngcontent-%COMP%]   .div-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;width:100%;justify-content:space-between;align-items:flex-end}#main-colecta[_ngcontent-%COMP%]   .div-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{display:flex;align-items:center}#main-colecta[_ngcontent-%COMP%]   .div-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{color:var(--dark-grey);margin-left:10px}#main-colecta[_ngcontent-%COMP%]   .div-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]:hover{color:var(--grey-text);cursor:pointer}#main-colecta[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}#main-colecta[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .colecta-img[_ngcontent-%COMP%]{max-width:40%;margin:auto;border-radius:10px;box-shadow:2px 2px 5px var(--dark-grey)}#main-colecta[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .colecta-img[_ngcontent-%COMP%]:hover{cursor:pointer}#main-colecta[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]{font-weight:500;font-size:16px;margin-bottom:15px}#main-colecta[_ngcontent-%COMP%]   .card-button[_ngcontent-%COMP%]{align-self:center}#main-colecta[_ngcontent-%COMP%]   .donacion-example-header-image[_ngcontent-%COMP%]{background-image:url(persona.5bfdedb8d26ee878.png);background-size:cover}#main-colecta[_ngcontent-%COMP%]   .donacion-card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1fr;gap:1rem}#main-colecta[_ngcontent-%COMP%]   .donacion-card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:65px;margin:5px;border-radius:5px;box-shadow:2px 2px 5px var(--dark-grey)}#main-colecta[_ngcontent-%COMP%]   .donacion-card-content[_ngcontent-%COMP%]   .donacion-status[_ngcontent-%COMP%]{display:flex;flex-direction:column}#main-colecta[_ngcontent-%COMP%]   .donacion-card-content[_ngcontent-%COMP%]   .donacion-status[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px auto;width:150px}#main-colecta[_ngcontent-%COMP%]   .donacion-card-content[_ngcontent-%COMP%]   .aprobada[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500}#main-colecta[_ngcontent-%COMP%]   .donacion-card-content[_ngcontent-%COMP%]   .rechazada[_ngcontent-%COMP%]{color:var(--warn-color)}@media (min-width: 0px) and (max-width: 576px){.card-content[_ngcontent-%COMP%], .donacion-card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr!important}.div-header[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}"]}),o})()}];let R=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[d.Bz.forChild(L),d.Bz]}),o})();var j=c(2100),H=c(3148),V=c(9499),K=c(4466);let $=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[m.ez,R,j.q,H.IJ,V.O,K.m]}),o})()}}]);