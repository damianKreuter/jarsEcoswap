"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[610],{9499:(O,g,o)=>{o.d(g,{O:()=>u});var l=o(4755),f=o(9433),m=o(9401),p=o(3148),_=o(4466),t=o(2223);let u=(()=>{class s{}return s.\u0275fac=function(N){return new(N||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[l.ez,f.q,p.IJ,m.u5,m.UX,_.m]}),s})()},1610:(O,g,o)=>{o.r(g),o.d(g,{NotificacionesModule:()=>Z});var l=o(4755),f=o(1531),m=o(3276),p=o(5226),_=o.n(p),t=o(2223),u=o(1319),s=o(430),h=o(8467),N=o(1728),C=o(1330),v=o(1292),x=o(7876);function M(n,a){1&n&&t._UZ(0,"mat-spinner",4)}function E(n,a){1&n&&t._UZ(0,"mat-spinner",13)}const P=function(n,a){return{"even-row":n,"odd-row":a}};function T(n,a){if(1&n){const i=t.EpF();t.ynx(0),t.TgZ(1,"mat-list-item",14),t.NdJ("mouseenter",function(){const r=t.CHM(i).$implicit,d=t.oxw(2);return t.KtG(d.hoveredItem=r)})("mouseleave",function(){t.CHM(i);const c=t.oxw(2);return t.KtG(c.hoveredItem=null)}),t.TgZ(2,"mat-icon",15),t._uU(3),t.qZA(),t.TgZ(4,"div",16)(5,"div",17),t.NdJ("click",function(){const r=t.CHM(i).$implicit,d=t.oxw(2);return t.KtG(d.access(r))}),t.TgZ(6,"h4"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"div",18),t.NdJ("click",function(){const r=t.CHM(i).$implicit,d=t.oxw(2);return t.KtG(d.access(r))}),t.TgZ(11,"p"),t._uU(12),t.ALo(13,"date"),t.qZA()(),t.TgZ(14,"div")(15,"mat-checkbox",19),t.NdJ("change",function(c){const d=t.CHM(i).$implicit,R=t.oxw(2);return t.KtG(R.selectNotification(c,d))}),t.qZA()()()(),t.BQk()}if(2&n){const i=a.$implicit,e=a.even,c=a.odd;t.xp6(1),t.Udp("background-color","LEIDO"==i.estadoNotificacion?"inherit":"white"),t.Q6J("ngClass",t.WLB(13,P,e,c)),t.xp6(1),t.Q6J("ngClass","TRUEQUE"==i.tipoNotificacion||"NUEVO_ESTADO_TRUEQUE"==i.tipoNotificacion?"primary":"secondary"),t.xp6(1),t.Oqu("LEIDO"==i.estadoNotificacion?"drafts":"email"),t.xp6(4),t.Oqu(i.titulo),t.xp6(2),t.Oqu(i.mensaje),t.xp6(3),t.Oqu(t.xi3(13,10,i.fechaNotificacion,"dd/MM/yyyy")),t.xp6(3),t.Q6J("disabled","LEIDO"==i.estadoNotificacion)("color","TRUEQUE"==i.tipoNotificacion||"NUEVO_ESTADO_TRUEQUE"==i.tipoNotificacion?"primary":"secondary")}}function y(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"mat-paginator",20,21),t.NdJ("page",function(c){t.CHM(i);const r=t.oxw(2);return t.KtG(r.changePage(c))}),t.qZA()}if(2&n){const i=t.oxw(2);t.Q6J("pageSize",i.pageSize)("showFirstLastButtons",!0)("length",i.notifications.length)("hidePageSize",!0)}}function U(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"button",7),t.NdJ("click",function(){t.CHM(i);const c=t.oxw();return t.KtG(c.leerNotificaciones())}),t._uU(3," MARCAR COMO LE\xcdDO "),t.qZA(),t.TgZ(4,"div",8),t.YNc(5,E,1,0,"mat-spinner",9),t.qZA()(),t.TgZ(6,"mat-nav-list",10),t.YNc(7,T,16,16,"ng-container",11),t.qZA(),t.YNc(8,y,2,4,"mat-paginator",12),t.qZA()}if(2&n){const i=t.oxw();t.xp6(2),t.Q6J("disabled",0==i.selectedNotifications.length||i.loadingSave),t.xp6(3),t.Q6J("ngIf",i.loadingSave),t.xp6(2),t.Q6J("ngForOf",i.paginatedNotifications),t.xp6(1),t.Q6J("ngIf",i.notifications.length>0)}}const I=[{path:"",component:(()=>{class n{constructor(i,e){this.notificacionesService=i,this.router=e,this.notifications=[],this.selectedNotifications=[],this.paginatedNotifications=[],this.pageSize=10,this.loading=!0,this.loadingSave=!1,this.refreshHeader=0}ngOnInit(){this.getNotificaciones()}getNotificaciones(){this.notificacionesService.getMisNotificaciones().subscribe({next:i=>{this.notifications=i,this.notifications.sort((e,c)=>"LEIDO"===e.estadoNotificacion&&"LEIDO"!==c.estadoNotificacion?1:"LEIDO"!==e.estadoNotificacion&&"LEIDO"===c.estadoNotificacion?-1:0),this.paginatedNotifications=this.notifications.slice(0,this.pageSize),this.loading=!1}})}changePage(i){const e=i.pageIndex*i.pageSize;this.paginatedNotifications=this.notifications.slice(e,e+i.pageSize)}access(i){switch(this.notificacionesService.leerNotificaciones([i.idNotificacion]).subscribe({next:e=>{this.refreshHeader++}}),i.tipoNotificacion){case"DONACION":case"NUEVO_ESTADO_DONACION":this.router.navigate(["colecta",i.idReferenciaNotificacion]);break;case"TRUEQUE":case"NUEVO_ESTADO_TRUEQUE":this.router.navigate(["publicacion",i.idReferenciaNotificacion])}}selectNotification(i,e){i.checked?this.selectedNotifications.push(e.idNotificacion):this.selectedNotifications=this.selectedNotifications.filter(c=>c!=e.idNotificacion)}leerNotificaciones(){this.loadingSave=!0,this.notificacionesService.leerNotificaciones(this.selectedNotifications).subscribe({next:i=>{_().fire("\xa1Excelente!","Las notificaciones seleccionadas se marcaron como leidas.","success"),this.selectedNotifications=[],this.getNotificaciones(),this.loadingSave=!1,this.refreshHeader++}})}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.A),t.Y36(f.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-notificaciones"]],viewQuery:function(i,e){if(1&i&&t.Gf(m.NW,5),2&i){let c;t.iGM(c=t.CRH())&&(e.paginator=c.first)}},decls:4,vars:3,consts:[["title","Notificaciones",3,"refresh"],[2,"display","flex","justify-content","center"],["diameter","20",4,"ngIf"],["id","main-notificaciones","class","app-main-div",4,"ngIf"],["diameter","20"],["id","main-notificaciones",1,"app-main-div"],[1,"buttons"],["mat-fab","","extended","",3,"disabled","click"],[2,"width","25px"],["diameter","25",4,"ngIf"],[2,"gap","10px","display","flex","flex-direction","column"],[4,"ngFor","ngForOf"],["style","border-radius: 15px;",3,"pageSize","showFirstLastButtons","length","hidePageSize","page",4,"ngIf"],["diameter","25"],[2,"border-radius","15px",3,"ngClass","mouseenter","mouseleave"],["matListItemIcon","",3,"ngClass"],[1,"item-content"],[2,"width","100%",3,"click"],[2,"min-height","70px","display","flex","align-items","center",3,"click"],[3,"disabled","color","change"],[2,"border-radius","15px",3,"pageSize","showFirstLastButtons","length","hidePageSize","page"],["paginator",""]],template:function(i,e){1&i&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1),t.YNc(2,M,1,0,"mat-spinner",2),t.qZA(),t.YNc(3,U,9,4,"div",3)),2&i&&(t.Q6J("refresh",e.refreshHeader),t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading))},dependencies:[l.mk,l.sg,l.O5,s.Hw,h.Ou,N.cs,C.Hk,C.Tg,C.Yt,m.NW,v.oG,x.G,l.uU],styles:["#main-notificaciones[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;transform:scale(.8);transform-origin:right;align-items:center;gap:10px}#main-notificaciones[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff}#main-notificaciones[_ngcontent-%COMP%]   .even-row[_ngcontent-%COMP%]{background-color:#e2e1e1}#main-notificaciones[_ngcontent-%COMP%]   .odd-row[_ngcontent-%COMP%]{background-color:transparent}#main-notificaciones[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:5px}#main-notificaciones[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}#main-notificaciones[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{color:var(--primary-color)!important}#main-notificaciones[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{color:var(--secondary-color)!important}#main-notificaciones[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:10px;gap:15px}#main-notificaciones[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;text-wrap:wrap}#main-notificaciones[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px!important;text-wrap:wrap;margin:0}"]}),n})()}];let A=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(I),f.Bz]}),n})();var D=o(9499),S=o(9433);let Z=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,S.q,A,D.O]}),n})()}}]);