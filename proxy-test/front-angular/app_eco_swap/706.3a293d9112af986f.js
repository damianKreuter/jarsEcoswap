"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[706],{1706:(J,r,a)=>{a.r(r),a.d(r,{DonacionesModule:()=>S});var d=a(4755),l=a(1531),m=a(8088),p=a(5226),u=a.n(p),n=a(2223),h=a(5580),C=a(8628),f=a(4377),v=a(3073),D=a(7876),M=a(9229);function O(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div")(1,"app-deck",4),n.NdJ("statusChanged",function(){n.CHM(t);const s=n.oxw();return n.KtG(s.getDonaciones())}),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("cardList",t.donacionesCardList)("fullScreenWidth",!0)}}function x(e,i){1&e&&(n.TgZ(0,"div",5),n._uU(1," No hay ninguna donaci\xf3n para mostrar! "),n.qZA())}const P=[{path:"",component:(()=>{class e{constructor(t,o,s,c){this.dialog=t,this.donacionesService=o,this.auth=s,this.showErrorService=c,this.donaciones=[],this.donacionesCardList=[],this.loading=!1,this.getDonaciones()}getDonaciones(){this.loading=!0,this.donaciones.splice(0),this.donacionesService.getMisDonaciones().subscribe({next:t=>{t?(this.donaciones=t,this.donaciones.map(o=>{o.idDonacion&&(o.last_status=o.estado),o.imagenes&&(o.parsedImagenes=o.imagenes.split("|"))})):this.showErrorService.show("Error!","No se encontr\xf3 la informaci\xf3n de tus donaciones. Intent\xe1 nuevamente m\xe1s tarde.")},error:t=>{console.log(t),this.loading=!1},complete:()=>this.generateCardList()})}generateCardList(){this.donacionesCardList.splice(0);const t=[];for(const o of this.donaciones){let s="";for(const[w,g]of o.caracteristicaDonacion.entries())0==w?s=g.caracteristica:s+=" - "+g.caracteristica;t.push({id:o.idDonacion,imagen:o.parsedImagenes?o.parsedImagenes[0]:"no_image",titulo:o.descripcion,valorPrincipal:`${o.cantidadDonacion} unidades de ${o.producto.descripcion}`,valorSecundario:s,fecha:o.fechaDonacion,usuario:{imagen:o.particularDTO.usuarioDTO.avatar,nombre:o.particularDTO.nombre+" "+o.particularDTO.apellido,puntaje:o.particularDTO.puntaje,localidad:o.particularDTO.direcciones[0].localidad},action:"detail",buttons:[{name:"CANCELAR",icon:"close",color:"warn",status:"CANCELADA"}],estado:o.estadoDonacion,idAuxiliar:o.producto.colectaDTO.idColecta}),this.loading=!1}this.donacionesCardList=t}zoomImage(t){u().fire({html:`<img src="${t}" style="width: 100%"/>`,showConfirmButton:!1,showCloseButton:!0})}openDialog(){this.dialog.open(m.G,{maxWidth:"70vw",maxHeight:"60vh",height:"100%",width:"100%",panelClass:"full-screen-modal"})}getImage(t){return this.donacionesService.getImagen(t)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h.uw),n.Y36(C.M),n.Y36(f.e),n.Y36(v.x))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-donaciones"]],decls:4,vars:2,consts:[["title","Mis Donaciones"],[1,"app-main-div"],[4,"ngIf"],["style","margin: 10%; text-align: center;",4,"ngIf"],["app","donaciones",3,"cardList","fullScreenWidth","statusChanged"],[2,"margin","10%","text-align","center"]],template:function(t,o){1&t&&(n._UZ(0,"app-header",0),n.TgZ(1,"div",1),n.YNc(2,O,2,2,"div",2),n.YNc(3,x,2,0,"div",3),n.qZA()),2&t&&(n.xp6(2),n.Q6J("ngIf",o.donacionesCardList.length>0),n.xp6(1),n.Q6J("ngIf",0==o.donacionesCardList.length))},dependencies:[d.O5,D.G,M.o],styles:[".donacion-example-header-image[_ngcontent-%COMP%]{background-image:url(perfiles-24.8b8b387b71873795.jpg);background-size:cover}.donacion-card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1fr;gap:1rem;padding:16px}.donacion-card-content[_ngcontent-%COMP%]   .donacion-aceptada[_ngcontent-%COMP%]{font-weight:700;color:var(--success)}.donacion-card-content[_ngcontent-%COMP%]   .donacion-rechazada[_ngcontent-%COMP%]{font-weight:700;color:var(--warn)}.donacion-card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:65px;margin:5px}.donacion-card-content[_ngcontent-%COMP%]   .imagenes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer}.donacion-card-content[_ngcontent-%COMP%]   .donacion-status[_ngcontent-%COMP%]{display:flex;align-items:center}.donacion-card-content[_ngcontent-%COMP%]   .donacion-status[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:5px}"]}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[l.Bz.forChild(P),l.Bz]}),e})();var y=a(9433),I=a(3148),L=a(9499),A=a(4466);let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[d.ez,T,y.q,I.IJ,L.O,A.m]}),e})()}}]);