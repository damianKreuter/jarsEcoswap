"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[679],{9499:(h,g,e)=>{e.d(g,{O:()=>m});var _=e(4755),p=e(2611),r=e(9401),f=e(3148),s=e(4466),t=e(2223);let m=(()=>{class u{}return u.\u0275fac=function(P){return new(P||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[_.ez,p.q,f.IJ,r.u5,r.UX,s.m]}),u})()},8679:(h,g,e)=>{e.r(g),e.d(g,{FormPublicacionModule:()=>tt});var _=e(4755),p=e(1531),r=e(9401),f=e(5226),s=e.n(f),t=e(2223),m=e(2777),u=e(9114),b=e(430),P=e(9609),M=e(8657),v=e(8467),x=e(1728),C=e(6012),T=e(1292),Z=e(3649),F=e(7876),O=e(4984);function A(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function q(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function E(n,c){1&n&&(t.TgZ(0,"span",33),t._uU(1,"$\xa0"),t.qZA())}function U(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function y(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Debe ser menor al valor m\xe1ximo ingresado. "),t.qZA())}function I(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Debe ser mayor a cero. "),t.qZA())}function J(n,c){1&n&&(t.TgZ(0,"span",33),t._uU(1,"$\xa0"),t.qZA())}function N(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function D(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Debe ser mayor al valor m\xednimo ingresado y mayor a cero. "),t.qZA())}function Q(n,c){1&n&&(t.TgZ(0,"span",33),t._uU(1,"$\xa0"),t.qZA())}function w(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function S(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Precio de Venta"),t.qZA(),t.TgZ(3,"input",34),t.NdJ("focus",function(){t.CHM(o);const a=t.oxw(2);return t.KtG(a.focusVenta=!0)})("focusout",function(){t.CHM(o);const a=t.oxw(2);return t.KtG(a.focusVenta=!1)}),t.qZA(),t.YNc(4,Q,2,0,"span",11),t.YNc(5,w,2,0,"mat-error",8),t.qZA()}if(2&n){const o=t.oxw(2);t.xp6(4),t.Q6J("ngIf",o.focusVenta),t.xp6(1),t.Q6J("ngIf",o.publicacionForm.get("precioVenta").hasError("required"))}}function k(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," El campo no puede contener "),t.TgZ(2,"b"),t._uU(3,";"),t.qZA()())}function V(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function Y(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"div",35)(1,"mat-form-field"),t._UZ(2,"textarea",36,37),t.YNc(4,k,4,0,"mat-error",8),t.YNc(5,V,2,0,"mat-error",8),t.qZA(),t.TgZ(6,"button",38),t.NdJ("click",function(){const l=t.CHM(o).index,d=t.oxw(2);return t.KtG(d.removeCaracteristica(l))}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA()()()}if(2&n){const o=c.$implicit;t.Q6J("formGroupName",c.index),t.xp6(4),t.Q6J("ngIf",o.get("s_descripcion").hasError("pattern")),t.xp6(1),t.Q6J("ngIf",o.get("s_descripcion").hasError("required"))}}function K(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," La publicaci\xf3n debe tener al menos 1 caracter\xedstica "),t.qZA())}function G(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," La publicaci\xf3n debe tener al menos 1 imagen "),t.qZA())}function R(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"div",39),t.NdJ("click",function(){const l=t.CHM(o).index,d=t.oxw(2);return t.KtG(d.removeImagen(l))}),t.TgZ(1,"div",40),t._UZ(2,"div",41),t.TgZ(3,"mat-icon",42),t._uU(4,"delete"),t.qZA(),t._UZ(5,"img",43),t.qZA()()}if(2&n){const o=c.$implicit;t.xp6(5),t.Q6J("src",o,t.LSH)}}function H(n,c){1&n&&t._UZ(0,"mat-spinner",44)}function L(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"mat-card",3)(1,"mat-card-header",4)(2,"mat-card-title"),t._uU(3,"Complet\xe1 los datos de tu publicaci\xf3n!"),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"form",5)(6,"div",6)(7,"mat-form-field")(8,"mat-label"),t._uU(9,"T\xedtulo"),t.qZA(),t._UZ(10,"input",7),t.YNc(11,A,2,0,"mat-error",8),t.qZA()(),t.TgZ(12,"div",6)(13,"mat-form-field")(14,"mat-label"),t._uU(15,"Descripci\xf3n"),t.qZA(),t._UZ(16,"input",9),t.YNc(17,q,2,0,"mat-error",8),t.qZA()(),t.TgZ(18,"div",6)(19,"mat-form-field")(20,"mat-label"),t._uU(21,"Valor "),t.TgZ(22,"b"),t._uU(23,"m\xednimo"),t.qZA(),t._uU(24," de trueque"),t.qZA(),t.TgZ(25,"input",10),t.NdJ("focus",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.focusMin=!0)})("focusout",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.focusMin=!1)}),t.qZA(),t.YNc(26,E,2,0,"span",11),t.YNc(27,U,2,0,"mat-error",8),t.YNc(28,y,2,0,"mat-error",8),t.YNc(29,I,2,0,"mat-error",8),t.qZA()(),t.TgZ(30,"div",12)(31,"mat-form-field")(32,"mat-label"),t._uU(33,"Valor "),t.TgZ(34,"b"),t._uU(35,"m\xe1ximo"),t.qZA(),t._uU(36," de trueque"),t.qZA(),t.TgZ(37,"input",13),t.NdJ("focus",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.focusMax=!0)})("focusout",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.focusMax=!1)}),t.qZA(),t.YNc(38,J,2,0,"span",11),t.YNc(39,N,2,0,"mat-error",8),t.YNc(40,D,2,0,"mat-error",8),t.qZA()(),t.TgZ(41,"div",6)(42,"mat-checkbox",14),t.NdJ("change",function(a){t.CHM(o);const l=t.oxw();return t.KtG(l.allowVenta(a))}),t.TgZ(43,"label",15),t._uU(44," Acepta Venta "),t.TgZ(45,"mat-icon",16),t._uU(46," info "),t.qZA()()(),t.TgZ(47,"mat-form-field",17),t._UZ(48,"input",18),t.qZA()(),t.TgZ(49,"div",6),t.YNc(50,S,6,2,"mat-form-field",8),t.qZA(),t.TgZ(51,"section",19)(52,"div")(53,"label",20),t._uU(54," Caracter\xedsticas "),t.TgZ(55,"mat-icon",21),t._uU(56," info "),t.qZA()()(),t.TgZ(57,"div"),t.YNc(58,Y,9,3,"div",22),t.TgZ(59,"button",23),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.agregarCaracteristica())}),t.TgZ(60,"mat-icon"),t._uU(61,"add"),t.qZA(),t.TgZ(62,"label"),t._uU(63,"Agregar Caracter\xedstica"),t.qZA()(),t.YNc(64,K,2,0,"mat-error",8),t.qZA(),t._UZ(65,"div"),t.qZA(),t.TgZ(66,"section",6)(67,"div")(68,"label",24),t._uU(69,"Im\xe1genes"),t.qZA()(),t.TgZ(70,"button",25),t.NdJ("click",function(){t.CHM(o);const a=t.MAs(75);return t.KtG(a.click())}),t.TgZ(71,"mat-icon"),t._uU(72,"add"),t.qZA(),t._uU(73," Agregar Imagen "),t.qZA(),t.TgZ(74,"input",26,27),t.NdJ("change",function(a){t.CHM(o);const l=t.oxw();return t.KtG(l.onFileChange(a))}),t.qZA(),t.YNc(76,G,2,0,"mat-error",8),t.TgZ(77,"div",28),t.YNc(78,R,6,1,"div",29),t.qZA()()()(),t.TgZ(79,"mat-card-actions",30)(80,"button",31),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return a.publicar(),a.publicacionForm.markAllAsTouched(),t.KtG(a.publicacionForm.valid)}),t._uU(81," CREAR PUBLICACI\xd3N "),t.qZA(),t.YNc(82,H,1,0,"mat-spinner",32),t.qZA()()}if(2&n){const o=t.oxw();let i;t.xp6(5),t.Q6J("formGroup",o.publicacionForm),t.xp6(6),t.Q6J("ngIf",o.publicacionForm.get("titulo").hasError("required")),t.xp6(6),t.Q6J("ngIf",o.publicacionForm.get("descripcion").hasError("required")),t.xp6(8),t.Q6J("min",0)("max",o.publicacionForm.get("valorMaximo").value||null),t.xp6(1),t.Q6J("ngIf",o.focusMin),t.xp6(1),t.Q6J("ngIf",o.publicacionForm.get("valorMinimo").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.publicacionForm.get("valorMinimo").hasError("max")),t.xp6(1),t.Q6J("ngIf",o.publicacionForm.get("valorMinimo").hasError("min")),t.xp6(1),t.Q6J("ngClass",o.publicacionForm.get("valorMaximo").hasError("min")?"form-input-long-error":""),t.xp6(7),t.Q6J("min",o.publicacionForm.get("valorMinimo").value||0),t.xp6(1),t.Q6J("ngIf",o.focusMax),t.xp6(1),t.Q6J("ngIf",o.publicacionForm.get("valorMaximo").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.publicacionForm.get("valorMaximo").hasError("min")),t.xp6(10),t.Q6J("ngIf",null==(i=o.publicacionForm.get("finalidadVenta"))?null:i.value),t.xp6(8),t.Q6J("ngForOf",o.getCaracteristicasArray.controls),t.xp6(6),t.Q6J("ngIf",0==o.getCaracteristicasArray.length&&o.showErrors),t.xp6(12),t.Q6J("ngIf",o.publicacionForm.get("file").hasError("required")&&o.showErrors),t.xp6(2),t.Q6J("ngForOf",o.images),t.xp6(2),t.Q6J("disabled",o.loadingSave),t.xp6(2),t.Q6J("ngIf",o.loadingSave)}}const B=[{path:"",component:(()=>{class n{constructor(o,i,a){this.fb=o,this.truequeService=i,this.router=a,this.images=[],this.loading=!1,this.showErrors=!1,this.loadingSave=!1,this.focusMin=!1,this.focusMax=!1,this.focusVenta=!1,this.publicacionForm=o.group({titulo:["",r.kI.required],descripcion:["",r.kI.required],valorMinimo:["",r.kI.required],valorMaximo:["",r.kI.required],finalidadVenta:[!1],precioVenta:[""],caracteristicas:this.fb.array([]),file:["",r.kI.required],file_source:[""],tipoProducto:[""],idParticular:[""]})}get getCaracteristicasArray(){return this.publicacionForm.get("caracteristicas")}agregarCaracteristica(o){const i=this.fb.group({s_descripcion:["",[r.kI.pattern(/[^;]/g),r.kI.required]]});this.getCaracteristicasArray.push(i)}removeCaracteristica(o){this.getCaracteristicasArray.removeAt(o)}onFileChange(o){if(o.target.files&&o.target.files[0]){var i=o.target.files.length;for(let l=0;l<i;l++){var a=new FileReader;a.onload=d=>{this.images.push(d.target.result),this.publicacionForm.patchValue({file_source:this.images})},a.readAsDataURL(o.target.files[l]),console.log(this.images,this.publicacionForm.controls.file_source)}}}removeImagen(o){this.images.splice(o,1),this.publicacionForm.patchValue({file_source:this.images})}publicar(){if(this.showErrors=!0,this.publicacionForm.valid){this.loadingSave=!0;let i=[];(this.getCaracteristicasArray.value||[]).forEach(l=>{i.push(l.s_descripcion)}),console.log("PUBLICAR: ",this.publicacionForm.value);const a={titulo:this.publicacionForm.controls.titulo.value,descripcion:this.publicacionForm.controls.descripcion.value,imagen:this.publicacionForm.controls.file_source.value,tipoProducto:"OTROS",caracteristicasProducto:i,fechaPublicacion:new Date,esVenta:this.publicacionForm.controls.finalidadVenta.value,precioVenta:this.publicacionForm.controls.precioVenta.value,valorTruequeMin:this.publicacionForm.controls.valorMinimo.value,valorTruequeMax:this.publicacionForm.controls.valorMaximo.value};console.log("body",a),this.truequeService.crearPublicacion(a).subscribe({next:l=>{console.log("publicacion creada",l),s().fire({title:"\xa1Creada!",text:"La publicaci\xf3n se cre\xf3 correctamente, ya podes hacer un intercambio!",icon:"success"}).then(({})=>{this.router.navigate(["mis-publicaciones"])}),this.loadingSave=!1},error:l=>{console.log("error creando publicacion",l),this.loadingSave=!1}})}}allowVenta(o){o.checked?this.publicacionForm.controls.precioVenta.addValidators(r.kI.required):this.publicacionForm.controls.precioVenta.removeValidators(r.kI.required)}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(r.qu),t.Y36(m.x),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-form-publicacion"]],decls:4,vars:2,consts:[["id","main-publicacion",1,"app-main-div"],[3,"loading"],["id","main-card",4,"ngIf"],["id","main-card"],[2,"margin-bottom","20px"],[1,"form",3,"formGroup"],[1,"form-col"],["matInput","","formControlName","titulo","type","text"],[4,"ngIf"],["matInput","","formControlName","descripcion","type","text"],["matInput","","formControlName","valorMinimo","type","number",3,"min","max","focus","focusout"],["matTextPrefix","",4,"ngIf"],[1,"form-col",3,"ngClass"],["matInput","","formControlName","valorMaximo","type","number",3,"min","focus","focusout"],["formControlName","finalidadVenta",3,"change"],[1,"venta-label"],["matTooltip","Si cheque\xe1s este campo, adem\xe1s de propuestas de intercambio, te pueden llegar propuestas de compra de tu producto.",1,"material-icons-outlined",2,"color","var(--grey-text)","margin","5px"],["hidden",""],["matInput","","type","text"],["formArrayName","caracteristicas",1,"form-col"],[1,"caract-label"],["matTooltip","Por favor incluir medidas, estado del producto,  material del producto y cualquier caracter\xedstica que identifique a tu producto",1,"material-icons-outlined"],["class","caracteristica",3,"formGroupName",4,"ngFor","ngForOf"],["type","button","mat-fab","","extended","","color","light",2,"width","100%",3,"click"],[2,"font-weight","500","font-size","large","margin","7px 0"],["type","button","mat-fab","","extended","","color","light",3,"click"],["formControlName","file","id","file","type","file","multiple","",1,"form-control","hidden",3,"change"],["file",""],[1,"form-col","form-imgs"],["class","show-image",3,"click",4,"ngFor","ngForOf"],[1,"buttons"],["mat-fab","","extended","","color","primary",3,"disabled","click"],["diameter","20","style","margin-left: 10px;",4,"ngIf"],["matTextPrefix",""],["matInput","","formControlName","precioVenta","type","text",3,"focus","focusout"],[1,"caracteristica",3,"formGroupName"],["matInput","","placeholder","Descripci\xf3n*","formControlName","s_descripcion","cdkTextareaAutosize",""],["autosize","cdkTextareaAutosize"],["type","button","mat-icon-button","","color","light",2,"height","60px","margin-left","5px",3,"click"],[1,"show-image",3,"click"],[1,"image"],[1,"overlay"],["color","primary",1,"update"],[1,"img-producto",3,"src"],["diameter","20",2,"margin-left","10px"]],template:function(o,i){1&o&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0),t._UZ(2,"app-spinner",1),t.YNc(3,L,83,21,"mat-card",2),t.qZA()),2&o&&(t.xp6(2),t.Q6J("loading",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[_.mk,_.sg,_.O5,u.KE,u.hX,u.TO,u.qo,b.Hw,P.Nt,M.IC,v.Ou,x.RK,x.cs,C.a8,C.hq,C.dn,C.dk,C.n5,T.oG,Z.gM,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.Fd,r.sg,r.u,r.x0,r.CE,F.G,O.O],styles:["#main-publicacion[_ngcontent-%COMP%]{padding:2%}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;row-gap:10px}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col[_ngcontent-%COMP%]{padding:5px;display:flex;flex-direction:column;justify-content:center}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;padding:0}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;cursor:pointer;padding-top:5px}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;display:flex;align-items:center;justify-content:center}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]:hover > .overlay[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;background-color:#000;opacity:.5;transition:all 1s}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .img-producto[_ngcontent-%COMP%]{width:100px;margin:3px}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .img-producto[_ngcontent-%COMP%]:hover{cursor:pointer}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:block}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col.form-imgs[_ngcontent-%COMP%]   .show-image[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;display:none}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-col[_ngcontent-%COMP%]   .caracteristica[_ngcontent-%COMP%]{display:grid;grid-template-columns:5fr 1fr;align-items:center}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .venta-label[_ngcontent-%COMP%]{font-weight:500;font-size:medium;display:flex;align-items:center}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .caract-label[_ngcontent-%COMP%]{font-weight:500;font-size:large;display:flex;align-items:center}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .caract-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--grey-text);margin:5px}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .caract-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer;color:var(--dark-grey)}#main-publicacion[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}#main-publicacion[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (min-width: 0px) and (max-width: 576px){.form[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}"]}),n})()}];let z=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(B),p.Bz]}),n})();var $=e(2611),W=e(3148),j=e(9499),X=e(4466);let tt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.ez,z,$.q,W.IJ,j.O,X.m]}),n})()},2777:(h,g,e)=>{e.d(g,{x:()=>f});var _=e(2223),p=e(5500);const r="URImsUsuarios";let f=(()=>{class s{constructor(m){this.backendService=m}crearPublicacion(m){return this.backendService.post(r,"api/publicacion",m)}getPublicaciones(m={}){return this.backendService.get(r,"api/publicaciones",m)}getMisPublicaciones(){return this.backendService.get(r,"api/misPublicaciones")}getPublicacion(m){return this.backendService.get(r,"api/publicacion/"+m)}getImagen(m){return this.backendService.getUrlByName(r)+"api/getImage/"+m}crearTrueque(m,u){return this.backendService.post(r,"api/trueque",{idPublicacionOrigen:m,idPublicacionPropuesta:u})}getTruequesFromPublicacion(m){return this.backendService.get(r,`api/publicacion/${m}/trueques`)}getMisPublicacionesForTrueque(m){return this.backendService.get(r,`api/${m}/publicaciones`)}cambiarEstadoTrueque(m,u){return this.backendService.put(r,`api/trueque/${m}`,{nuevoEstado:u})}getTruequesParticular(m){return this.backendService.get(r,`api/trueques/particular/${m}`)}}return s.\u0275fac=function(m){return new(m||s)(_.LFG(p.k))},s.\u0275prov=_.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);