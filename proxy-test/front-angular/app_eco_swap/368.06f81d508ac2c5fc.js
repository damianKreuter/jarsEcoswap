"use strict";(self.webpackChunkapp_eco_swap=self.webpackChunkapp_eco_swap||[]).push([[368],{9499:(w,v,n)=>{n.d(v,{O:()=>T});var u=n(4755),g=n(7468),s=n(9401),p=n(3148),C=n(4466),m=n(2223);let T=(()=>{class t{}return t.\u0275fac=function(Z){return new(Z||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[u.ez,g.q,p.IJ,s.u5,s.UX,C.m]}),t})()},2368:(w,v,n)=>{n.r(v),n.d(v,{RegistroModule:()=>bt});var u=n(4755),g=n(1531),s=n(9401),p=n(1217),C=n(5226),m=n.n(C),T=n(6266),t=n(2223),x=n(5763),Z=n(4377),O=n(2342),P=n(8954),U=n(4212),h=n(9114),q=n(430),y=n(9609),D=n(8467),R=n(1728),N=n(787),A=n(8280),f=n(6012),F=n(8995),M=n(7876);function E(r,i){1&r&&(t.TgZ(0,"div",4),t._UZ(1,"mat-spinner",5),t.qZA())}function J(r,i){if(1&r&&(t.TgZ(0,"div")(1,"mat-card-title"),t._uU(2,"Registrate!"),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(4),t.hij("Complet\xe1 ",e.isSwapper?"tus datos":"los datos de la fundaci\xf3n"," para crear tu cuenta")}}function S(r,i){if(1&r&&(t.TgZ(0,"div")(1,"mat-card-title"),t._uU(2,"Actualizar contrase\xf1a"),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(4),t.hij("Complet\xe1 ",e.isSwapper?"tus datos":"los datos de la fundaci\xf3n"," para actualizar tu contrase\xf1a")}}function Q(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function Y(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Email inv\xe1lido "),t.qZA())}function B(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function V(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," El formato debe ser 11 1234-5678 "),t.qZA())}function K(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Tel\xe9fono"),t.qZA(),t.TgZ(3,"input",22),t.NdJ("keyup",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.formatearTelefono())}),t.qZA(),t.TgZ(4,"mat-hint"),t._uU(5,"Formato: 11 1234-5678"),t.qZA(),t.YNc(6,B,2,0,"mat-error",12),t.YNc(7,V,2,0,"mat-error",12),t.qZA()}if(2&r){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.mainForm.get("telefono").value),t.xp6(3),t.Q6J("ngIf",e.mainForm.get("telefono").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.mainForm.get("telefono").hasError("formatoInvalido"))}}function k(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function G(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Las contrase\xf1as no coinciden "),t.qZA())}function L(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Debe tener de 8 a 32 caracteres y al menos 1 min\xfascula, 1 may\xfascula, 1 n\xfamero y 1 caracter especial. "),t.qZA())}function j(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function z(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Las contrase\xf1as no coinciden "),t.qZA())}function H(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function W(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function $(r,i){if(1&r&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.Q6J("value",e.nombre),t.xp6(1),t.hij(" ",e.descripcion," ")}}function X(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function tt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function ot(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Formato inv\xe1lido "),t.qZA())}function et(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function rt(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"form",9)(1,"div",23)(2,"mat-form-field")(3,"mat-label"),t._uU(4,"Nombre"),t.qZA(),t._UZ(5,"input",24),t.YNc(6,H,2,0,"mat-error",12),t.qZA()(),t.TgZ(7,"div",23)(8,"mat-form-field")(9,"mat-label"),t._uU(10,"Apellido"),t.qZA(),t._UZ(11,"input",25),t.YNc(12,W,2,0,"mat-error",12),t.qZA()(),t.TgZ(13,"div",10)(14,"mat-form-field")(15,"mat-label"),t._uU(16,"Tipo Documento"),t.qZA(),t.TgZ(17,"mat-select",26),t.NdJ("selectionChange",function(a){t.CHM(e);const c=t.oxw(2);return t.KtG(c.formatDocument(a))}),t.YNc(18,$,2,2,"mat-option",27),t.qZA(),t.YNc(19,X,2,0,"mat-error",12),t.qZA()(),t.TgZ(20,"div",10)(21,"mat-form-field")(22,"mat-label"),t._uU(23,"N\xfamero de Documento"),t.qZA(),t._UZ(24,"input",28),t.YNc(25,tt,2,0,"mat-error",12),t.YNc(26,ot,2,0,"mat-error",12),t.qZA()(),t.TgZ(27,"div",10)(28,"mat-form-field",29)(29,"mat-label"),t._uU(30,"Fecha de Nacimiento"),t.qZA(),t._UZ(31,"input",30),t.TgZ(32,"mat-hint"),t._uU(33,"DD/MM/YYYY"),t.qZA(),t._UZ(34,"mat-datepicker-toggle",31)(35,"mat-datepicker",null,32),t.YNc(37,et,2,0,"mat-error",12),t.qZA()()()}if(2&r){const e=t.MAs(36),o=t.oxw(2);t.Q6J("formGroup",o.particularForm),t.xp6(6),t.Q6J("ngIf",o.particularForm.get("nombre").hasError("required")),t.xp6(6),t.Q6J("ngIf",o.particularForm.get("apellido").hasError("required")),t.xp6(6),t.Q6J("ngForOf",o.tiposDocumento),t.xp6(1),t.Q6J("ngIf",o.particularForm.get("tipoDocumento").hasError("required")),t.xp6(6),t.Q6J("ngIf",o.particularForm.get("nroDocumento").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.particularForm.get("nroDocumento").hasError("pattern")),t.xp6(5),t.Q6J("matDatepicker",e),t.xp6(3),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",o.particularForm.get("fechaNacimiento").hasError("required"))}}function at(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function it(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function nt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," CUIT inv\xe1lido "),t.qZA())}function st(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"form",9)(1,"div",23)(2,"mat-form-field")(3,"mat-label"),t._uU(4,"Nombre / Raz\xf3n Social"),t.qZA(),t._UZ(5,"input",24),t.YNc(6,at,2,0,"mat-error",12),t.qZA()(),t.TgZ(7,"div",10)(8,"mat-form-field")(9,"mat-label"),t._uU(10,"CUIT"),t.qZA(),t.TgZ(11,"input",34),t.NdJ("keyup",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.formatearCUIT())}),t.qZA(),t.TgZ(12,"mat-hint"),t._uU(13,"Formato: 20-12345678-9"),t.qZA(),t.YNc(14,it,2,0,"mat-error",12),t.YNc(15,nt,2,0,"mat-error",12),t.qZA()()()}if(2&r){const e=t.oxw(2);t.Q6J("formGroup",e.fundacionForm),t.xp6(6),t.Q6J("ngIf",e.fundacionForm.get("nombre").hasError("required")),t.xp6(8),t.Q6J("ngIf",e.fundacionForm.get("cuit").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.fundacionForm.get("cuit").hasError("invalidCUIT"))}}function ct(r,i){if(1&r&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.nombre," ")}}function lt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function mt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Localidad inv\xe1lida "),t.qZA())}function dt(r,i){if(1&r&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.nombre," ")}}function ut(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function pt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Localidad inv\xe1lida "),t.qZA())}function ft(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Campo obligatorio "),t.qZA())}function _t(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"form",9)(1,"div",23)(2,"mat-form-field",35)(3,"mat-label"),t._uU(4,"Localidad"),t.qZA(),t.TgZ(5,"input",36),t.NdJ("input",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.getLocalidades())}),t.qZA(),t.TgZ(6,"mat-autocomplete",37,38),t.NdJ("optionSelected",function(a){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onLocSelected(a.option.value))}),t.YNc(8,ct,2,2,"mat-option",27),t.qZA(),t.YNc(9,lt,2,0,"mat-error",12),t.YNc(10,mt,2,0,"mat-error",12),t.qZA()(),t.TgZ(11,"div",23)(12,"mat-form-field",35)(13,"mat-label"),t._uU(14,"Calle"),t.qZA(),t.TgZ(15,"input",39),t.NdJ("input",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.getCalles())}),t.qZA(),t.TgZ(16,"mat-autocomplete",37,40),t.NdJ("optionSelected",function(a){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onCalleSelected(a.option.value))}),t.YNc(18,dt,2,2,"mat-option",27),t.qZA(),t.YNc(19,ut,2,0,"mat-error",12),t.YNc(20,pt,2,0,"mat-error",12),t.qZA()(),t.TgZ(21,"div",10)(22,"mat-form-field")(23,"mat-label"),t._uU(24,"Altura"),t.qZA(),t._UZ(25,"input",41),t.YNc(26,ft,2,0,"mat-error",12),t.qZA()(),t.TgZ(27,"div",10)(28,"mat-form-field")(29,"mat-label"),t._uU(30,"Piso"),t.qZA(),t._UZ(31,"input",42),t.qZA()(),t.TgZ(32,"div",23)(33,"mat-form-field")(34,"mat-label"),t._uU(35,"Departamento"),t.qZA(),t._UZ(36,"input",43),t.qZA()()()}if(2&r){const e=t.MAs(7),o=t.MAs(17),a=t.oxw(2);t.Q6J("formGroup",a.direccionForm),t.xp6(5),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",a.displayItem),t.xp6(2),t.Q6J("ngForOf",a.localidades),t.xp6(1),t.Q6J("ngIf",a.direccionForm.get("localidad").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.direccionForm.get("localidad").hasError("invalidSelection")),t.xp6(5),t.Q6J("matAutocomplete",o),t.xp6(1),t.Q6J("displayWith",a.displayItem),t.xp6(2),t.Q6J("ngForOf",a.calles),t.xp6(1),t.Q6J("ngIf",a.direccionForm.get("calle").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.direccionForm.get("calle").hasError("invalidSelection")),t.xp6(6),t.Q6J("ngIf",a.direccionForm.get("altura").hasError("required"))}}function gt(r,i){1&r&&t._UZ(0,"mat-spinner",44)}function ht(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-card",6)(1,"mat-card-header"),t.YNc(2,J,5,1,"div",7),t.YNc(3,S,5,1,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(5,"mat-card-content")(6,"form",9)(7,"div",10)(8,"mat-form-field")(9,"mat-label"),t._uU(10,"Email"),t.qZA(),t._UZ(11,"input",11),t.YNc(12,Q,2,0,"mat-error",12),t.YNc(13,Y,2,0,"mat-error",12),t.qZA()(),t.TgZ(14,"div",13),t.YNc(15,K,8,3,"mat-form-field",12),t.qZA(),t.TgZ(16,"div",13)(17,"mat-form-field")(18,"mat-label"),t._uU(19,"Contrase\xf1a"),t.qZA(),t.TgZ(20,"input",14),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.refreshValidity())}),t.qZA(),t.TgZ(21,"mat-icon",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.togglePassword())}),t._uU(22),t.qZA(),t.YNc(23,k,2,0,"mat-error",12),t.YNc(24,G,2,0,"mat-error",12),t.YNc(25,L,2,0,"mat-error",12),t.qZA()(),t.TgZ(26,"div",10)(27,"mat-form-field")(28,"mat-label"),t._uU(29,"Confirm Password"),t.qZA(),t.TgZ(30,"input",16),t.NdJ("focus",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.refreshValidity())}),t.qZA(),t.TgZ(31,"mat-icon",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.togglePassword())}),t._uU(32),t.qZA(),t.YNc(33,j,2,0,"mat-error",12),t.YNc(34,z,2,0,"mat-error",12),t.qZA()()(),t.YNc(35,rt,38,10,"form",17),t.YNc(36,st,16,4,"form",17),t.TgZ(37,"div",18),t._uU(38,"Direcci\xf3n"),t.qZA(),t.YNc(39,_t,37,12,"form",17),t.qZA(),t.TgZ(40,"mat-card-actions",19)(41,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.submit(),a.mainForm.markAllAsTouched(),t.KtG(a.direccionForm.valid)}),t._uU(42),t.YNc(43,gt,1,0,"mat-spinner",21),t.qZA()()()}if(2&r){const e=t.MAs(4),o=t.oxw();t.xp6(2),t.Q6J("ngIf","resetPassword"!=o.origin)("ngIfElse",e),t.xp6(4),t.Q6J("formGroup",o.mainForm),t.xp6(6),t.Q6J("ngIf",o.mainForm.get("email").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.mainForm.get("email").hasError("pattern")),t.xp6(1),t.Q6J("ngClass",o.mainForm.get("telefono").hasError("formatoInvalido")?"form-input-medium-error":""),t.xp6(1),t.Q6J("ngIf","resetPassword"!=o.origin),t.xp6(1),t.Q6J("ngClass",o.mainForm.get("password").hasError("pattern")?"form-input-long-error":""),t.xp6(4),t.Q6J("type",o.passwordType),t.xp6(2),t.Oqu(o.passwordIcon),t.xp6(1),t.Q6J("ngIf",o.mainForm.get("password").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.mainForm.get("password").hasError("differentPassword")&&!o.mainForm.get("password").hasError("pattern")),t.xp6(1),t.Q6J("ngIf",o.mainForm.get("password").hasError("pattern")),t.xp6(5),t.Q6J("type",o.passwordType),t.xp6(2),t.Oqu(o.passwordIcon),t.xp6(1),t.Q6J("ngIf",o.mainForm.get("confirmPassword").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.mainForm.get("confirmPassword").hasError("differentPassword")),t.xp6(1),t.Q6J("ngIf",o.isSwapper&&"resetPassword"!=o.origin),t.xp6(1),t.Q6J("ngIf",!o.isSwapper&&"resetPassword"!=o.origin),t.xp6(3),t.Q6J("ngIf","resetPassword"!=o.origin),t.xp6(2),t.Q6J("disabled",!o.mainForm.valid||o.isSwapper&&!o.particularForm.valid||!o.isSwapper&&!o.fundacionForm.valid||!o.direccionForm.valid),t.xp6(1),t.hij(" ","resetPassword"==o.origin?"ACTUALIZAR CONTRASE\xd1A":"createAccount"==o.origin?"CREAR CUENTA":"GUARDAR CAMBIOS"," "),t.xp6(1),t.Q6J("ngIf",o.loadingSave)}}function Ct(r){const i=r.value;if(!i)return null;if(!/^\d{2}-\d{8,9}-\d{1,2}$/.test(i))return{invalidCUIT:!0};const o=i.replace(/-/g,""),a=parseInt(o.charAt(o.length-1)),c=[5,4,3,2,7,6,5,4,3,2];let l=0;for(let _=0;_<10;_++)l+=parseInt(o.charAt(_))*c[_];const d=l%11;return(0===d?0:11-d)!==a?{invalidCUIT:!0}:null}const xt=[{path:"",component:(()=>{class r{constructor(e,o,a,c,l,d,I,_,wt,Ot){this.fb=e,this.dateAdapter=o,this.usuarioService=a,this.location=c,this.auth=l,this.router=d,this.snackbar=I,this.cdr=_,this.phoneNumberPipe=wt,this.cuitPipe=Ot,this.isSwapper=!0,this.loading=!0,this.origin="createAccount",this.passwordIcon="visibility_off",this.passwordType="password",this.tiposDocumento=[],this.loadingSave=!1,this.localidades=[],this.calles=[],this.mainForm=e.group({email:["",[s.kI.required,s.kI.pattern(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)]],telefono:["",[s.kI.required,this.telefonoValidator()]],password:["",[s.kI.required,s.kI.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@#$%^&+=!*\-_.,])[a-zA-Z\d@#$%^&+=!*\-_.,]{8,32}$/),this.validarConfirmPassword()]],confirmPassword:["",[s.kI.required,this.validarConfirmPassword()]]}),this.particularForm=e.group({nombre:["",s.kI.required],apellido:["",s.kI.required],tipoDocumento:["",s.kI.required],nroDocumento:[{value:"",disabled:!0},s.kI.required],fechaNacimiento:["",s.kI.required]}),this.fundacionForm=e.group({nombre:["",s.kI.required],cuit:["",[s.kI.required,Ct]]}),this.direccionForm=e.group({localidad:["",[s.kI.required,this.validateItem.bind(this)]],calle:[{value:"",disabled:!0},[s.kI.required,this.validateItem.bind(this)]],altura:[{value:"",disabled:!0},s.kI.required],piso:[{value:"",disabled:!0}],departamento:[{value:"",disabled:!0}]}),this.screenWidth=window.innerWidth>0?window.innerWidth:screen.width,this.dateAdapter.setLocale("es-AR");const b=c.path();"/reset-password"==b?this.origin="resetPassword":"/edit-perfil"==b?(this.origin="editAccount",this.mainForm.controls.password.disable(),this.mainForm.controls.confirmPassword.disable(),this.mainForm.controls.email.disable()):this.mainForm.controls.telefono.addValidators(s.kI.required)}ngOnInit(){"createAccount"==this.origin?this.selectTipoPerfil():"editAccount"==this.origin?(this.loadUserInfo(),this.loading=!1):this.loading=!1,this.getTiposDocumentos()}getLocalidades(){const e=this.direccionForm.controls.localidad.value;0==e.length?(this.direccionForm.controls.calle.disable(),this.direccionForm.controls.altura.disable(),this.direccionForm.controls.piso.disable(),this.direccionForm.controls.departamento.disable()):e.length>=3&&fetch("https://apis.datos.gob.ar/georef/api/localidades?orden=id&provincia=02&nombre="+e).then(a=>a.json()).then(a=>{this.localidades=a.localidades}).catch(a=>console.error(a))}getCalles(){const e=this.direccionForm.controls.calle.value,o=this.direccionForm.controls.localidad.value.departamento.id;0==e.length&&(this.direccionForm.controls.altura.disable(),this.direccionForm.controls.piso.disable(),this.direccionForm.controls.departamento.disable()),e.length>=3&&fetch("https://apis.datos.gob.ar/georef/api/calles?orden=id&provincia=02&departamento="+o+"&nombre="+e).then(c=>c.json()).then(c=>{this.calles=c.calles}).catch(c=>console.error(c))}onLocSelected(e){e&&this.direccionForm.controls.calle.enable()}onCalleSelected(e){e&&(this.direccionForm.controls.altura.enable(),this.direccionForm.controls.piso.enable(),this.direccionForm.controls.departamento.enable())}ngOnDestroy(){m().close()}loadUserInfo(){this.auth.getUserID()?this.usuarioService.getUserByID(this.auth.getUserID()).subscribe({next:o=>{console.log(o),this.mainForm.patchValue({email:o.email,telefono:o.telefono}),o.particularDTO?this.particularForm.patchValue({nombre:o.particularDTO.nombre,apellido:o.particularDTO.apellido,tipoDocumento:o.particularDTO.tipoDocumento,nroDocumento:o.particularDTO.dni,fechaNacimiento:o.particularDTO.fechaNacimiento}):this.fundacionForm.patchValue({nombre:o.fundacionDTO.nombre,cuit:o.fundacionDTO.cuil}),this.direccionForm.patchValue({calle:o.particularDTO?o.particularDTO.direcciones[0].direccion:o.fundacionDTO.direcciones[0].direccion,altura:o.particularDTO?o.particularDTO.direcciones[0].altura:o.fundacionDTO.direcciones[0].altura,piso:o.particularDTO?o.particularDTO.direcciones[0].piso:o.fundacionDTO.direcciones[0].piso,departamento:o.particularDTO?o.particularDTO.direcciones[0].departamento:o.fundacionDTO.direcciones[0].departamento,codigoPostal:o.particularDTO?o.particularDTO.direcciones[0].codigoPostal:o.fundacionDTO.direcciones[0].codigoPostal})},error:o=>{console.log("error",o)}}):m().fire("Error!","Ocurri\xf3 un error al traer tu informaci\xf3n. Intentalo devuelta m\xe1s tarde","error")}selectTipoPerfil(){m().fire({title:"\xa1Te damos la bienvenida!",text:"Nos alegra que te sumes a nuestra comunidad, antes de seguir, \n\t\t\tnecesitamos saber si te quer\xe9s registrar como fundaci\xf3n o como Particular",confirmButtonText:"Represento a una fundaci\xf3n",confirmButtonColor:"#87db59",cancelButtonText:"No soy de una fundaci\xf3n",showCancelButton:!0,cancelButtonColor:"#ae59db",icon:"question",allowOutsideClick:!1,allowEscapeKey:!1}).then(e=>{console.log(e),e.isConfirmed?(this.isSwapper=!1,this.particularForm=this.fb.group({})):this.fundacionForm=this.fb.group({}),console.log(this.isSwapper),this.loading=!1})}getTiposDocumentos(){this.usuarioService.getTiposDocumentos().subscribe({next:e=>{console.log("TIPOS DOC:",e),this.tiposDocumento=e},error:e=>{console.log("ERROR TIPOS DOC:",e)}})}submit(){if(this.loadingSave=!0,console.log("registro",this.mainForm.value),this.mainForm.valid)if("resetPassword"==this.origin)this.auth.resetPassword({username:this.mainForm.controls.email.value,nuevoPassword:this.mainForm.controls.password.value,confirmarPassword:this.mainForm.controls.confirmPassword.value}).subscribe({next:o=>{console.log(o),this.loadingSave=!1},error:o=>{console.log("error:",o),this.loadingSave=!1}});else if(this.direccionForm.valid){let e={username:this.mainForm.controls.email.value,email:this.mainForm.controls.email.value,password:this.mainForm.controls.password.value,telefono:this.mainForm.controls.telefono.value,confirmPassword:this.mainForm.controls.confirmPassword.value,direccion:{codigoPostal:this.direccionForm.controls.localidad.value.nombre,direccion:this.direccionForm.controls.calle.value.nombre,altura:this.direccionForm.controls.altura.value,piso:this.direccionForm.controls.piso.value,departamento:this.direccionForm.controls.departamento.value}},o=!1;this.isSwapper?this.particularForm.valid?(e.particular={fechaNacimiento:new Date(this.particularForm.controls.fechaNacimiento.value),dni:this.particularForm.controls.nroDocumento.value,cuil:this.particularForm.controls.nroDocumento.value,nombre:this.particularForm.controls.nombre.value,apellido:this.particularForm.controls.apellido.value,tipoDocumento:this.particularForm.controls.tipoDocumento.value},o=!0):(this.showMessage("\xa1Campos incorrectos!","Por favor, revis\xe1 los campos y volv\xe9 a intentar","OK","","error"),this.loadingSave=!1):this.fundacionForm.valid?(e.fundacion={nombre:this.fundacionForm.controls.nombre.value,cuil:this.fundacionForm.controls.cuit.value},o=!0):(this.showMessage("\xa1Campos incorrectos!","Por favor, revis\xe1 los campos y volv\xe9 a intentar","OK","","error"),this.loadingSave=!1),console.log(e),o&&("createAccount"==this.origin?this.usuarioService.createUser(e).subscribe({next:a=>{console.log("next",a),this.id_user=a,this.messageWithTimer(),this.loadingSave=!1},error:a=>{console.error("error",a),this.loadingSave=!1}}):this.usuarioService.editUser(e).subscribe({next:a=>{console.log("next",a),this.showMessage("\xa1\xc9xito!","Tus datos se editaron exitosamente.","Genial!","edit","success"),this.loadingSave=!1},error:a=>{console.error("error",a),this.loadingSave=!1}}))}else this.showMessage("\xa1Campos incorrectos!","Por favor, revis\xe1 los campos y volv\xe9 a intentar","OK","","error"),this.loadingSave=!1;else this.showMessage("\xa1Campos incorrectos!","Por favor, revis\xe1 los campos y volv\xe9 a intentar","OK","","error"),this.loadingSave=!1}showMessage(e,o,a,c,l){m().fire({title:e,text:o,confirmButtonText:a,icon:l,allowOutsideClick:"success"!=l}).then(({isConfirmed:d})=>{d&&"error"!=l&&("ir_a_home"==c?this.router.navigate(["home"]):"edit"==c&&this.router.navigate(["mi-perfil"]))})}validarConfirmPassword(){return e=>{if(e.value){const o=this.mainForm.controls.password.value,a=this.mainForm.controls.confirmPassword.value;if(o&&a&&o!=a)return{differentPassword:!0};this.mainForm.controls.password.setErrors(null),this.mainForm.controls.confirmPassword.setErrors(null)}return null}}formatearTelefono(){this.mainForm.get("telefono")?.setValue(this.phoneNumberPipe.transform(this.mainForm.get("telefono")?.value)),this.cdr.detectChanges()}telefonoValidator(){const e=/^11\s\d{4}-\d{4}$/;return o=>o.value?e.test(o.value)?null:{formatoInvalido:!0}:null}togglePassword(){this.passwordType="text"===this.passwordType?"password":"text",this.passwordIcon="visibility"===this.passwordIcon?"visibility_off":"visibility"}refreshValidity(){this.mainForm.updateValueAndValidity()}formatDocument(e){console.log(e),this.particularForm.controls.nroDocumento.enable(),this.particularForm.controls.nroDocumento.addValidators(s.kI.pattern(/^(?!0+$)[1-9]\d{6,7}$/))}formatearCUIT(){this.fundacionForm.get("cuit")?.setValue(this.cuitPipe.transform(this.fundacionForm.get("cuit")?.value)),this.cdr.detectChanges()}messageWithTimer(){let e=60;m().fire({title:"\xa1Gracias por registrarte!",text:"Te enviamos un email a la cuenta que ingresaste, con un c\xf3digo para verificar tu cuenta. Por favor ingresalo a continuaci\xf3n. Si no verific\xe1s la cuenta ahora, podr\xe1s hacerlo la pr\xf3xima vez que inicies sesi\xf3n.",icon:"success",showDenyButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,denyButtonText:"Reenviar email en 60 segundos",denyButtonColor:"#ae59db",confirmButtonColor:"#87db59",confirmButtonText:"Confirmar",input:"text",didOpen:()=>{const o=document.querySelector(".swal2-deny"),a=setInterval(()=>{e--,o&&(o.setAttribute("style","background-color: #a3a3a3;"),o.textContent=`Reenviar email en ${e} segundos`),e<=0&&o&&(o.disabled=!1,o.setAttribute("style","background-color: #9c30d4;"),o.textContent="Reenviar email",clearInterval(a))},1e3)},preDeny:()=>(console.log("pre deny",e),this.id_user&&0==e&&this.auth.sendEmailAgain(this.id_user).subscribe({next:o=>{console.log(o),this.snackbar.open("Se envi\xf3 el nuevo mail!","",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})}}),!1),reverseButtons:!0}).then(({isConfirmed:o,value:a})=>{console.log(o),o&&this.id_user&&(console.log("conf",a),this.usuarioService.confirmarCuenta(this.id_user,a).subscribe({next:c=>{console.log(c),m().fire("Excelente!","Tu cuenta fue verificada, ya podes usar Ecoswap!","success"),this.router.navigate(["/"])},error:c=>{console.log(c),this.router.navigate(["/login"])}}))})}displayItem(e){return e?function Tt(r){return r.toLowerCase().split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}(e.nombre):""}validateItem(e){const o=e.value,a=e.parent;if(!a)return{invalidSelection:!0};const c=Object.keys(a.controls).find(l=>e===a.get(l));return o&&this.localidades?("localidad"==c?this.localidades:this.calles).some(d=>d.nombre.toUpperCase()==(o.nombre||o).toUpperCase())?null:{invalidSelection:!0}:null}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(s.qu),t.Y36(p._A),t.Y36(x.i),t.Y36(u.Ye),t.Y36(Z.e),t.Y36(g.F0),t.Y36(O.ux),t.Y36(t.sBO),t.Y36(P.X),t.Y36(U.K))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-registro"]],features:[t._Bn([{provide:p.Ad,useValue:"en-GB"},{provide:p._A,useClass:T.e}])],decls:4,vars:2,consts:[["url","registro"],["id","main-container",1,"app-main-div"],["style","height: 65vh; display: flex; justify-content: center;",4,"ngIf"],["id","main-card",4,"ngIf"],[2,"height","65vh","display","flex","justify-content","center"],["diameter","20"],["id","main-card"],[4,"ngIf","ngIfElse"],["resetHeader",""],[1,"form",3,"formGroup"],[1,"form-input"],["matInput","","formControlName","email","type","email"],[4,"ngIf"],[1,"form-input",3,"ngClass"],["matInput","","formControlName","password",3,"type","change"],["matSuffix","",1,"eye",3,"click"],["matInput","","formControlName","confirmPassword",3,"type","focus"],["class","form",3,"formGroup",4,"ngIf"],[2,"margin","20px 5% 0px","font-weight","bold"],[1,"buttons"],["mat-fab","","extended","","color","primary",3,"disabled","click"],["diameter","20","style","margin-left: 10px;",4,"ngIf"],["matInput","","formControlName","telefono",3,"ngModel","keyup"],[1,"form-input","capitalize-input"],["matInput","","formControlName","nombre"],["matInput","","formControlName","apellido"],["formControlName","tipoDocumento","name","tipoDocumento",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","nroDocumento","type","number"],["floatLabel","always"],["matInput","","formControlName","fechaNacimiento","readonly","",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[3,"value"],["matInput","","formControlName","cuit",3,"keyup"],[1,"example-full-width"],["type","text","matInput","","formControlName","localidad",3,"matAutocomplete","input"],["requireSelection","",3,"displayWith","optionSelected"],["autoLoc","matAutocomplete"],["type","text","matInput","","formControlName","calle",3,"matAutocomplete","input"],["autoCalle","matAutocomplete"],["matInput","","formControlName","altura","type","number"],["matInput","","formControlName","piso","type","number"],["matInput","","formControlName","departamento"],["diameter","20",2,"margin-left","10px"]],template:function(e,o){1&e&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1),t.YNc(2,E,2,0,"div",2),t.YNc(3,ht,44,23,"mat-card",3),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",!o.loading))},dependencies:[u.mk,u.sg,u.O5,h.KE,h.hX,h.bx,h.TO,h.R9,q.Hw,y.Nt,D.Ou,R.cs,N.gD,p.ey,A.Mq,A.hl,A.nW,f.a8,f.hq,f.dn,f.dk,f.$j,f.n5,F.XC,F.ZL,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,M.G],styles:["#main-container[_ngcontent-%COMP%]{padding:2%}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]{width:80%;margin:2% auto}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:grid;align-items:center;margin-top:20px;grid-template-columns:1fr 1fr;row-gap:10px;column-gap:5px;justify-items:center}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{display:flex;justify-content:center;width:80%}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-input.capitalize-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-transform:capitalize}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]   .eye[_ngcontent-%COMP%]:hover{cursor:pointer}#main-container[_ngcontent-%COMP%]   #main-card[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (min-width: 0px) and (max-width: 768px){.form[_ngcontent-%COMP%]{grid-template-columns:1fr!important;row-gap:10px!important;column-gap:5px!important}}"]}),r})()}];let Zt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[g.Bz.forChild(xt),g.Bz]}),r})();var At=n(7468),Ft=n(3148),It=n(9499);let bt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[u.ez,Zt,At.q,Ft.IJ,It.O]}),r})()}}]);