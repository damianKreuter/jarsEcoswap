{"version":3,"file":"src_app_pages_form-donacion_form-donacion_module_ts.js","mappings":"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","sources":["./src/app/pages/form-donacion/form-donacion-routing.module.ts","./src/app/pages/form-donacion/form-donacion.component.ts","./src/app/pages/form-donacion/form-donacion.component.html","./src/app/pages/form-donacion/form-donacion.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { FormDonacionComponent } from './form-donacion.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FormDonacionComponent,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class FormDonacionRoutingModule {}","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ColectaModel } from 'src/app/models/colecta.model';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { DonacionesService } from 'src/app/services/donaciones.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n\tselector: 'app-donacion',\r\n\ttemplateUrl: './form-donacion.component.html',\r\n\tstyleUrls: ['./form-donacion.component.scss']\r\n})\r\nexport class FormDonacionComponent implements OnInit {\r\n\r\n\tdonacionForm: FormGroup;\r\n\tcolecta!: ColectaModel;\r\n\tscreenWidth: number;\r\n\r\n\timages: any[] = [];\r\n\r\n\tloading: boolean = true;\r\n\tid_colecta?: string;\r\n\r\n\tconstructor(private fb: FormBuilder, private route: ActivatedRoute, private router: Router,\r\n\t\tprivate donacionesService: DonacionesService, private auth: AuthService) {\r\n\r\n\t\troute.paramMap.subscribe(params => {\r\n\t\t\tconsole.log(params);\r\n\t\t\tthis.id_colecta = params.get('id_colecta') || '';\r\n\t\t})\r\n\r\n\t\tthis.donacionForm = fb.group({\r\n\t\t\tproducto: ['', Validators.required],\r\n\t\t\tcaracteristicas: this.fb.array([]),\r\n\t\t\tfile: [''],\r\n\t\t\tfile_source: ['', Validators.required],\r\n\t\t\tn_cantidad: ['', Validators.required],\r\n\t\t\tmensaje: ['']\r\n\t\t})\r\n\r\n\t\tthis.screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\tthis.donacionesService.getColecta(this.id_colecta).subscribe({\r\n\t\t\tnext: (res: any) => {\r\n\t\t\t\tthis.colecta = res;\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t},\r\n\t\t\terror: (error) => {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tget getCaracteristicasArray() {\r\n\t\treturn <FormArray>this.donacionForm.get('caracteristicas');\r\n\t}\r\n\r\n\tagregarCaracteristica(caract?: number) {\r\n\t\tconst caracteristica = this.fb.group({\r\n\t\t\ts_descripcion: ['', [Validators.pattern(/[^;]/g), Validators.required]],\r\n\t\t});\r\n\r\n\t\tlet caracteristicas = this.getCaracteristicasArray;\r\n\t\tcaracteristicas.push(caracteristica);\r\n\t}\r\n\r\n\tconfirmarDonacion() {\r\n\t\tconsole.log(this.donacionForm.value);\r\n\t\t\r\n\t\tif(this.donacionForm.valid){\r\n\t\t\tlet caracteristicas: any[] = this.getCaracteristicasArray.value || [];\r\n\t\t\tlet sendCaracteristicas: string[] = [];\r\n\t\t\tcaracteristicas.forEach(item => {\r\n\t\t\t\tsendCaracteristicas.push(item.s_descripcion);\r\n\t\t\t})\r\n\t\t\tconst objetoToSend = {\r\n\t\t\t\ttipoProducto: \"MUEBLES\",\r\n\t\t\t\tproductoId: this.donacionForm.controls['producto'].value,\r\n\t\t\t\tcantidadOfrecida: this.donacionForm.controls['n_cantidad'].value,\r\n\t\t\t\tmensaje: this.donacionForm.controls['mensaje'].value,\r\n\t\t\t\tcaracteristicas: sendCaracteristicas,\r\n\t\t\t\timagenes: this.donacionForm.controls['file_source'].value\r\n\t\t\t}\r\n\t\t\tconsole.log('obj to send',objetoToSend);\r\n\t\r\n\t\t\tthis.donacionesService.crearDonacion(this.colecta.idColecta, objetoToSend).subscribe({\r\n\t\t\t\tnext: (res) => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif(JSON.parse(JSON.stringify(res)).descripcion)\t{\r\n\t\t\t\t\t\tthis.showMessage('Donación Creada!', 'La donacion se creó exitosamente. Ahora te toca a vos! Llevá tu donación a la fundación para que la puedan empezar a usar.', 'success')\r\n\t\t\t\t\t\tthis.router.navigateByUrl('colecta/'+ this.id_colecta)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse this.showMessage('Ocurrió un error', 'No pudimos crear la donacion. Intentá nuevamente luego.', 'error')\r\n\t\t\t\t},\r\n\t\t\t\terror: (error) =>{\r\n\t\t\t\t\tconsole.log('error creando donacion', error);\r\n\t\t\t\t\tthis.showMessage('Ocurrió un error', 'No pudimos crear la donacion. Intentá nuevamente luego.', 'error')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else this.showMessage('Error en los campos.', 'Revisá los campos y completalos correctamente.', 'error')\r\n\t}\r\n\r\n\tremoveCaracteristica(i: number) {\r\n\t\tlet caracteristicas = this.getCaracteristicasArray;\r\n\t\tcaracteristicas.removeAt(i);\r\n\t}\r\n\r\n\tonFileChange(event: any) {\r\n\t\tif (event.target.files && event.target.files[0]) {\r\n\t\t\tvar filesAmount = event.target.files.length;\r\n\t\t\tfor (let i = 0; i < filesAmount; i++) {\r\n\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\treader.onload = (event: any) => {\r\n\t\t\t\t\tthis.images.push(event.target.result);\r\n\t\t\t\t\tthis.donacionForm.patchValue({\r\n\t\t\t\t\t\tfile_source: this.images\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treader.readAsDataURL(event.target.files[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveImagen(i:number) {\r\n\t\tthis.images.splice(i, 1)\r\n\t\tthis.donacionForm.patchValue({\r\n\t\t\tfile_source: this.images\r\n\t\t});\r\n\t}\r\n\r\n\tshowMessage(title: string, text: string, icon:'warning'| 'error'| 'success'| 'info'| 'question'){\r\n\t\tSwal.fire({\r\n\t\t\ttitle,\r\n\t\t\ttext,\r\n\t\t\ticon,\r\n\t\t\tconfirmButtonText: '¡OK!'\r\n\t\t})\r\n\t}\r\n}\r\n","<app-header></app-header>\r\n\r\n<div id=\"main-donacion\">\r\n\t<app-spinner [loading]=\"loading\"></app-spinner>\r\n\t<mat-card id=\"main-card\" *ngIf=\"!loading\">\r\n\t\t<mat-card-header style=\"margin-bottom: 20px;\">\r\n\t\t\t<mat-card-title>Completá los datos de tu donación!</mat-card-title>\r\n\t\t</mat-card-header>\r\n\t\t<mat-card-content>\r\n\t\t\t<form [formGroup]=\"donacionForm\" class=\"form\" [ngClass]=\"screenWidth > 576 ? 'big-form':'small-form'\">\r\n\t\t\t\t<div class=\"form-input form-col\">\r\n\t\t\t\t\t<mat-form-field>\r\n\t\t\t\t\t\t<mat-label>Producto</mat-label>\r\n\t\t\t\t\t\t<mat-select formControlName=\"producto\">\r\n\t\t\t\t\t\t\t<mat-option *ngFor=\"let prod of colecta.productos\" [value]=\"prod.idProducto\">\r\n\t\t\t\t\t\t\t\t{{prod.descripcion}}\r\n\t\t\t\t\t\t\t</mat-option>\r\n\t\t\t\t\t\t</mat-select>\r\n\t\t\t\t\t\t<mat-error *ngIf=\"donacionForm.get('producto')!.hasError('required')\">\r\n\t\t\t\t\t\t\tCampo obligatorio\r\n\t\t\t\t\t\t</mat-error>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"form-col\">\r\n\t\t\t\t\t<mat-form-field>\r\n\t\t\t\t\t\t<mat-label>Cantidad</mat-label>\r\n\t\t\t\t\t\t<input matInput formControlName=\"n_cantidad\" type=\"number\">\r\n\t\t\t\t\t\t<mat-error *ngIf=\"donacionForm.get('n_cantidad')!.hasError('required')\">\r\n\t\t\t\t\t\t\tCampo obligatorio\r\n\t\t\t\t\t\t</mat-error>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<section formArrayName=\"caracteristicas\" class=\"form-col\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label class=\"caract-label\">\r\n\t\t\t\t\t\t\tCaracterísticas\r\n\t\t\t\t\t\t\t<mat-icon class=\"material-icons-outlined\"\r\n\t\t\t\t\t\t\tmatTooltip=\"Por favor incluir medidas, estado del producto,  material del producto y cualquier característica que identifique a tu producto\">\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t\t</mat-icon>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div *ngFor=\"let caracteristica of getCaracteristicasArray.controls; let i=index\"\r\n\t\t\t\t\t\t\tclass=\"caracteristica\" [formGroupName]=\"i\">\r\n\t\t\t\t\t\t\t<mat-form-field>\r\n\t\t\t\t\t\t\t\t<input matInput placeholder=\"Descripción*\" formControlName=\"s_descripcion\">\r\n\t\t\t\t\t\t\t\t<mat-error *ngIf=\"caracteristica.get('s_descripcion')!.hasError('pattern')\">\r\n\t\t\t\t\t\t\t\t\tEl campo no puede contener <b>;</b>\r\n\t\t\t\t\t\t\t\t</mat-error>\r\n\t\t\t\t\t\t\t\t<mat-error *ngIf=\"caracteristica.get('s_descripcion')!.hasError('required')\">\r\n\t\t\t\t\t\t\t\t\tCampo obligatorio\r\n\t\t\t\t\t\t\t\t</mat-error>\r\n\t\t\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t\t\t\t<button type=\"button\" (click)=\"removeCaracteristica(i)\" mat-icon-button color=\"light\"\r\n\t\t\t\t\t\t\tstyle=\"height: 60px; margin-left: 5px;\">\r\n\t\t\t\t\t\t\t\t<mat-icon>delete</mat-icon>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button type=\"button\" (click)=\"agregarCaracteristica()\" mat-raised-button color=\"light\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t<mat-icon>add</mat-icon>\r\n\t\t\t\t\t\t\t<label>Agregar Característica</label>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<div class=\"form-col\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label style=\"font-weight: 500; font-size: large; margin: 7px 0;\">Imágenes</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button type=\"button\" mat-raised-button color=\"light\" (click)=\"file.click()\">\r\n\t\t\t\t\t\t<mat-icon>add</mat-icon>\r\n\t\t\t\t\t\tAgregar Imagen\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<input formControlName=\"file\" id=\"file\" type=\"file\" class=\"form-control hidden\" multiple=\"\"\r\n\t\t\t\t\t\t(change)=\"onFileChange($event)\" #file>\r\n\t\t\t\t\t<div class=\"form-col form-imgs\">\r\n\t\t\t\t\t\t<div class=\"show-image\" *ngFor='let url of images; let i = index;' (click)=\"removeImagen(i)\" >\r\n\t\t\t\t\t\t\t<div class=\"image\" >\r\n\t\t\t\t\t\t\t\t<div class=\"overlay\">\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<mat-icon class=\"update\" color=\"primary\">delete</mat-icon>\r\n\t\t\t\t\t\t\t\t<img [src]=\"url\" class=\"img-producto\">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"form-col mensaje-field\">\r\n\t\t\t\t\t<mat-form-field>\r\n\t\t\t\t\t\t<mat-label>Mensaje Adicional</mat-label>\r\n\t\t\t\t\t\t<textarea matInput\r\n\t\t\t\t\t\tcdkTextareaAutosize\r\n\t\t\t\t\t\t#autosize=\"cdkTextareaAutosize\"\r\n\t\t\t\t\t\tcdkAutosizeMinRows=\"1\"\r\n\t\t\t\t\t\tcdkAutosizeMaxRows=\"5\"\r\n\t\t\t\t\t\tformControlName=\"mensaje\"></textarea>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</mat-card-content>\r\n\t\t<mat-card-actions class=\"buttons\">\r\n\t\t\t<button mat-raised-button color=\"primary\"\r\n\t\t\t\t(click)=\"confirmarDonacion();donacionForm.markAllAsTouched(); donacionForm.valid\">\r\n\t\t\t\tCONFIRMAR DONACIÓN\r\n\t\t\t</button>\r\n\t\t</mat-card-actions>\r\n\t</mat-card>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormDonacionComponent } from './form-donacion.component';\r\nimport { FormDonacionRoutingModule } from './form-donacion-routing.module';\r\nimport { MaterialModule } from 'src/app/shared/material/material.module';\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { HeaderModule } from 'src/app/layout/header/header.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\n@NgModule({\r\n  declarations: [FormDonacionComponent],\r\n  imports: [\r\n    CommonModule,\r\n\tFormDonacionRoutingModule,\r\n\tMaterialModule,\r\n\tNgbModule,\r\n\tHeaderModule,\r\n\tSharedModule\r\n  ],\r\n  exports: [FormDonacionComponent]\r\n})\r\nexport class FormDonacionModule { }"],"names":["RouterModule","FormDonacionComponent","routes","path","component","FormDonacionRoutingModule","forChild","imports","i1","exports","Validators","Swal","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","prod_r8","idProducto","ɵɵadvance","ɵɵtextInterpolate1","descripcion","ɵɵelement","ɵɵtemplate","FormDonacionComponent_mat_card_3_div_26_mat_error_3_Template","FormDonacionComponent_mat_card_3_div_26_mat_error_4_Template","ɵɵlistener","FormDonacionComponent_mat_card_3_div_26_Template_button_click_5_listener","restoredCtx","ɵɵrestoreView","_r14","i_r10","index","ctx_r13","ɵɵnextContext","ɵɵresetView","removeCaracteristica","caracteristica_r9","get","hasError","FormDonacionComponent_mat_card_3_div_43_Template_div_click_0_listener","_r18","i_r16","ctx_r17","removeImagen","url_r15","ɵɵsanitizeUrl","FormDonacionComponent_mat_card_3_mat_option_11_Template","FormDonacionComponent_mat_card_3_mat_error_12_Template","FormDonacionComponent_mat_card_3_mat_error_18_Template","FormDonacionComponent_mat_card_3_div_26_Template","FormDonacionComponent_mat_card_3_Template_button_click_27_listener","_r20","ctx_r19","agregarCaracteristica","FormDonacionComponent_mat_card_3_Template_button_click_36_listener","_r5","ɵɵreference","click","FormDonacionComponent_mat_card_3_Template_input_change_40_listener","$event","ctx_r22","onFileChange","FormDonacionComponent_mat_card_3_div_43_Template","FormDonacionComponent_mat_card_3_Template_button_click_51_listener","ctx_r23","confirmarDonacion","donacionForm","markAllAsTouched","valid","ctx_r0","screenWidth","colecta","productos","getCaracteristicasArray","controls","images","constructor","fb","route","router","donacionesService","auth","loading","paramMap","subscribe","params","console","log","id_colecta","group","producto","required","caracteristicas","array","file","file_source","n_cantidad","mensaje","window","innerWidth","screen","width","ngOnInit","getColecta","next","res","error","caract","caracteristica","s_descripcion","pattern","push","value","sendCaracteristicas","forEach","item","objetoToSend","tipoProducto","productoId","cantidadOfrecida","imagenes","crearDonacion","idColecta","JSON","parse","stringify","showMessage","navigateByUrl","i","removeAt","event","target","files","filesAmount","length","reader","FileReader","onload","result","patchValue","readAsDataURL","splice","title","text","icon","fire","confirmButtonText","ɵɵdirectiveInject","FormBuilder","i2","ActivatedRoute","Router","i3","DonacionesService","i4","AuthService","selectors","decls","vars","consts","template","FormDonacionComponent_Template","rf","ctx","FormDonacionComponent_mat_card_3_Template","CommonModule","MaterialModule","NgbModule","HeaderModule","SharedModule","FormDonacionModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}